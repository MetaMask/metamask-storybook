"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[73382],{"./shared/constants/app-state.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{PY:()=>ACCOUNT_OVERVIEW_TAB_KEY_TO_METAMETRICS_EVENT_NAME_MAP,hG:()=>AccountOverviewTabKey,rE:()=>PasswordChangeToastType,v_:()=>ACCOUNT_OVERVIEW_TAB_KEY_TO_TRACE_NAME_MAP});var _obj,_obj1,_lib_trace__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./shared/lib/trace.ts"),_metametrics__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./shared/constants/metametrics.ts");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var AccountOverviewTabKey=function(AccountOverviewTabKey){return AccountOverviewTabKey.Tokens="tokens",AccountOverviewTabKey.Nfts="nfts",AccountOverviewTabKey.Activity="activity",AccountOverviewTabKey.DeFi="defi",AccountOverviewTabKey}({}),ACCOUNT_OVERVIEW_TAB_KEY_TO_METAMETRICS_EVENT_NAME_MAP=(_define_property(_obj={},"tokens",_metametrics__WEBPACK_IMPORTED_MODULE_1__.gP.TokenScreenOpened),_define_property(_obj,"defi",_metametrics__WEBPACK_IMPORTED_MODULE_1__.gP.DeFiScreenOpened),_define_property(_obj,"nfts",_metametrics__WEBPACK_IMPORTED_MODULE_1__.gP.NftScreenOpened),_define_property(_obj,"activity",_metametrics__WEBPACK_IMPORTED_MODULE_1__.gP.ActivityScreenOpened),_obj),ACCOUNT_OVERVIEW_TAB_KEY_TO_TRACE_NAME_MAP=(_define_property(_obj1={},"tokens",_lib_trace__WEBPACK_IMPORTED_MODULE_0__.dg.AccountOverviewAssetListTab),_define_property(_obj1,"nfts",_lib_trace__WEBPACK_IMPORTED_MODULE_0__.dg.AccountOverviewNftsTab),_define_property(_obj1,"activity",_lib_trace__WEBPACK_IMPORTED_MODULE_0__.dg.AccountOverviewActivityTab),_define_property(_obj1,"defi",_lib_trace__WEBPACK_IMPORTED_MODULE_0__.dg.AccountOverviewDeFiTab),_obj1),PasswordChangeToastType=function(PasswordChangeToastType){return PasswordChangeToastType.Success="success",PasswordChangeToastType.Errored="errored",PasswordChangeToastType}({})},"./ui/components/app/password-form/password-form.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>PasswordForm});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),zxcvbn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/zxcvbn/lib/main.js"),zxcvbn__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(zxcvbn__WEBPACK_IMPORTED_MODULE_1__),_component_library__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/component-library/index.ts"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/hooks/useI18nContext.js"),_helpers_constants_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/helpers/constants/common.ts"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/helpers/constants/design-system.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function PasswordForm(param){var onChange=param.onChange,pwdInputTestId=param.pwdInputTestId,confirmPwdInputTestId=param.confirmPwdInputTestId,t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_3__.P)(),_useState=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),2),password=_useState[0],setPassword=_useState[1],_useState1=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),showPassword=_useState1[0],setShowPassword=_useState1[1],_useState2=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),2),confirmPassword=_useState2[0],setConfirmPassword=_useState2[1],_useState3=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),showConfirmPassword=_useState3[0],setShowConfirmPassword=_useState3[1],_useState4=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),2),confirmPasswordError=_useState4[0],setConfirmPasswordError=_useState4[1],getPasswordStrengthLabel=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(isTooShort,score){return isTooShort?{className:"create-password__weak",dataTestId:"short-password-error",text:t("passwordNotLongEnough"),description:""}:score>=4?{className:"create-password__strong",dataTestId:"strong-password",text:t("strong"),description:""}:3===score?{className:"create-password__average",dataTestId:"average-password",text:t("average"),description:t("passwordStrengthDescription")}:{className:"create-password__weak",dataTestId:"weak-password",text:t("weak"),description:t("passwordStrengthDescription")}},[t]),_useState5=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),2),passwordStrengthElement=_useState5[0],setPasswordStrengthElement=_useState5[1],handlePasswordChange=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(passwordInput){var isTooShort=passwordInput.length<_helpers_constants_common__WEBPACK_IMPORTED_MODULE_4__.wz,score=zxcvbn__WEBPACK_IMPORTED_MODULE_1___default()(passwordInput).score,passwordStrengthLabel=getPasswordStrengthLabel(isTooShort,score),passwordStrengthComponent=isTooShort?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.J3.inherit,as:"span",key:score,"data-testid":passwordStrengthLabel.dataTestId,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.r7.textAlternative},passwordStrengthLabel.text):t("passwordStrength",[react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.J3.inherit,as:"span",key:score,"data-testid":passwordStrengthLabel.dataTestId,className:passwordStrengthLabel.className},passwordStrengthLabel.text)]),confirmError=confirmPassword&&passwordInput!==confirmPassword?t("passwordsDontMatch"):"";setPassword(passwordInput),setPasswordStrengthElement(passwordStrengthComponent),setConfirmPasswordError(confirmError)},[confirmPassword,t,getPasswordStrengthLabel]),handleConfirmPasswordChange=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(confirmPasswordInput){var error=password===confirmPasswordInput||0===confirmPasswordInput.length?"":t("passwordsDontMatch");setConfirmPassword(confirmPasswordInput),setConfirmPasswordError(error)},[password,t]);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function(){password.length>=_helpers_constants_common__WEBPACK_IMPORTED_MODULE_4__.wz&&confirmPassword.length>=_helpers_constants_common__WEBPACK_IMPORTED_MODULE_4__.wz&&password===confirmPassword?onChange(password):onChange("")},[password,confirmPassword,onChange]),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.az,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.YJ,{label:t("newPasswordCreate"),id:"create-password-new",autoFocus:!0,autoComplete:!0,size:_component_library__WEBPACK_IMPORTED_MODULE_2__.dY.Lg,value:password,inputProps:{"data-testid":pwdInputTestId||"create-password-new-input",type:showPassword?_component_library__WEBPACK_IMPORTED_MODULE_2__.NZ.Text:_component_library__WEBPACK_IMPORTED_MODULE_2__.NZ.Password},onChange:function(e){handlePasswordChange(e.target.value)},helpTextProps:{color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_5__.r7.textAlternative},helpText:passwordStrengthElement&&passwordStrengthElement,endAccessory:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.a2,{iconName:showPassword?_component_library__WEBPACK_IMPORTED_MODULE_2__.$M.EyeSlash:_component_library__WEBPACK_IMPORTED_MODULE_2__.$M.Eye,"data-testid":"show-password",type:"button",onClick:function(e){e.stopPropagation(),setShowPassword(!showPassword)},ariaLabel:showPassword?t("passwordToggleHide"):t("passwordToggleShow")})}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.YJ,{label:t("confirmPassword"),id:"create-password-confirm",autoComplete:!0,marginTop:4,size:_component_library__WEBPACK_IMPORTED_MODULE_2__.dY.Lg,error:!!confirmPasswordError,helpTextProps:{"data-testid":"confirm-password-error"},helpText:confirmPasswordError,value:confirmPassword,inputProps:{"data-testid":confirmPwdInputTestId||"create-password-confirm-input",type:showConfirmPassword?_component_library__WEBPACK_IMPORTED_MODULE_2__.NZ.Text:_component_library__WEBPACK_IMPORTED_MODULE_2__.NZ.Password},onChange:function(e){handleConfirmPasswordChange(e.target.value)},endAccessory:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.a2,{iconName:showConfirmPassword?_component_library__WEBPACK_IMPORTED_MODULE_2__.$M.EyeSlash:_component_library__WEBPACK_IMPORTED_MODULE_2__.$M.Eye,"data-testid":"show-confirm-password",type:"button",onClick:function(e){e.stopPropagation(),setShowConfirmPassword(!showConfirmPassword)},ariaLabel:showConfirmPassword?t("passwordToggleHide"):t("passwordToggleShow")})}))}try{passwordform.displayName="passwordform",passwordform.__docgenInfo={description:"",displayName:"passwordform",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(password: string) => void"}},pwdInputTestId:{defaultValue:null,description:"",name:"pwdInputTestId",required:!1,type:{name:"string"}},confirmPwdInputTestId:{defaultValue:null,description:"",name:"confirmPwdInputTestId",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/components/app/password-form/password-form.tsx#passwordform"]={docgenInfo:passwordform.__docgenInfo,name:"passwordform",path:"ui/components/app/password-form/password-form.tsx#passwordform"})}catch(__react_docgen_typescript_loader_error){}},"./ui/components/ui/mascot/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>_mascot_component__WEBPACK_IMPORTED_MODULE_0__.A});var _mascot_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/ui/mascot/mascot.component.js")},"./ui/components/ui/spinner/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>spinner});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),Spinner=function(param){var _param_className=param.className,_param_color=param.color,color=void 0===_param_color?"var(--color-icon-muted)":_param_color;return react.createElement("div",{className:"spinner ".concat(void 0===_param_className?"":_param_className)},react.createElement("svg",{className:"lds-spinner",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",style:{background:"none"}},react.createElement("g",{transform:"rotate(0 50 50)"},react.createElement("rect",{x:45,y:0,rx:0,ry:0,width:10,height:30,fill:color},react.createElement("animate",{attributeName:"opacity",values:"1;0",dur:"1s",begin:"-0.9166666666666666s",repeatCount:"indefinite"}))),react.createElement("g",{transform:"rotate(30 50 50)"},react.createElement("rect",{x:45,y:0,rx:0,ry:0,width:10,height:30,fill:color},react.createElement("animate",{attributeName:"opacity",values:"1;0",dur:"1s",begin:"-0.8333333333333334s",repeatCount:"indefinite"}))),react.createElement("g",{transform:"rotate(60 50 50)"},react.createElement("rect",{x:45,y:0,rx:0,ry:0,width:10,height:30,fill:color},react.createElement("animate",{attributeName:"opacity",values:"1;0",dur:"1s",begin:"-0.75s",repeatCount:"indefinite"}))),react.createElement("g",{transform:"rotate(90 50 50)"},react.createElement("rect",{x:45,y:0,rx:0,ry:0,width:10,height:30,fill:color},react.createElement("animate",{attributeName:"opacity",values:"1;0",dur:"1s",begin:"-0.6666666666666666s",repeatCount:"indefinite"}))),react.createElement("g",{transform:"rotate(120 50 50)"},react.createElement("rect",{x:45,y:0,rx:0,ry:0,width:10,height:30,fill:color},react.createElement("animate",{attributeName:"opacity",values:"1;0",dur:"1s",begin:"-0.5833333333333334s",repeatCount:"indefinite"}))),react.createElement("g",{transform:"rotate(150 50 50)"},react.createElement("rect",{x:45,y:0,rx:0,ry:0,width:10,height:30,fill:color},react.createElement("animate",{attributeName:"opacity",values:"1;0",dur:"1s",begin:"-0.5s",repeatCount:"indefinite"}))),react.createElement("g",{transform:"rotate(180 50 50)"},react.createElement("rect",{x:45,y:0,rx:0,ry:0,width:10,height:30,fill:color},react.createElement("animate",{attributeName:"opacity",values:"1;0",dur:"1s",begin:"-0.4166666666666667s",repeatCount:"indefinite"}))),react.createElement("g",{transform:"rotate(210 50 50)"},react.createElement("rect",{x:45,y:0,rx:0,ry:0,width:10,height:30,fill:color},react.createElement("animate",{attributeName:"opacity",values:"1;0",dur:"1s",begin:"-0.3333333333333333s",repeatCount:"indefinite"}))),react.createElement("g",{transform:"rotate(240 50 50)"},react.createElement("rect",{x:45,y:0,rx:0,ry:0,width:10,height:30,fill:color},react.createElement("animate",{attributeName:"opacity",values:"1;0",dur:"1s",begin:"-0.25s",repeatCount:"indefinite"}))),react.createElement("g",{transform:"rotate(270 50 50)"},react.createElement("rect",{x:45,y:0,rx:0,ry:0,width:10,height:30,fill:color},react.createElement("animate",{attributeName:"opacity",values:"1;0",dur:"1s",begin:"-0.16666666666666666s",repeatCount:"indefinite"}))),react.createElement("g",{transform:"rotate(300 50 50)"},react.createElement("rect",{x:45,y:0,rx:0,ry:0,width:10,height:30,fill:color},react.createElement("animate",{attributeName:"opacity",values:"1;0",dur:"1s",begin:"-0.08333333333333333s",repeatCount:"indefinite"}))),react.createElement("g",{transform:"rotate(330 50 50)"},react.createElement("rect",{x:45,y:0,rx:0,ry:0,width:10,height:30,fill:color},react.createElement("animate",{attributeName:"opacity",values:"1;0",dur:"1s",begin:"0s",repeatCount:"indefinite"})))))};Spinner.propTypes={className:prop_types_default().string,color:prop_types_default().string},Spinner.__docgenInfo={description:"",methods:[],displayName:"Spinner",props:{className:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},color:{defaultValue:{value:"'var(--color-icon-muted)'",computed:!1},description:"",type:{name:"string"},required:!1}}};let spinner=Spinner;Spinner.__docgenInfo={description:"",methods:[],displayName:"Spinner",props:{className:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},color:{defaultValue:{value:"'var(--color-icon-muted)'",computed:!1},description:"",type:{name:"string"},required:!1}}}},"./ui/pages/settings/security-tab/change-password/change-password.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_change_password__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/pages/settings/security-tab/change-password/change-password.tsx");let __WEBPACK_DEFAULT_EXPORT__={title:"Pages/SettingsPage/ChangePassword"};var DefaultStory=function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_change_password__WEBPACK_IMPORTED_MODULE_1__.A,null)};DefaultStory.storyName="Default",DefaultStory.parameters={...DefaultStory.parameters,docs:{...DefaultStory.parameters?.docs,source:{originalSource:"() => <ChangePassword />",...DefaultStory.parameters?.docs?.source}}};let __namedExportsOrder=["DefaultStory"]},"./ui/pages/settings/security-tab/change-password/change-password.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>change_password});var events=__webpack_require__("./node_modules/events/events.js"),events_default=__webpack_require__.n(events),react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),dist=__webpack_require__("./node_modules/react-router/dist/index.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),build_types=__webpack_require__("./ui/helpers/utils/build-types.js"),mascot=__webpack_require__("./ui/components/ui/mascot/index.js"),spinner=__webpack_require__("./ui/components/ui/spinner/index.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),actions=__webpack_require__("./ui/__mocks__/actions.js"),password_form=__webpack_require__("./ui/components/app/password-form/password-form.tsx"),routes=__webpack_require__("./ui/helpers/constants/routes.ts"),utils=__webpack_require__("./ui/components/app/toast-master/utils.ts"),app_state=__webpack_require__("./shared/constants/app-state.ts"),selectors=__webpack_require__("./ui/selectors/index.js"),zendesk_url=__webpack_require__("./ui/helpers/constants/zendesk-url.js"),metametrics=__webpack_require__("./ui/contexts/metametrics.js"),constants_metametrics=__webpack_require__("./shared/constants/metametrics.ts");function ChangePasswordWarning(param){var onConfirm=param.onConfirm,onCancel=param.onCancel,t=(0,useI18nContext.P)(),changePasswordLearnMore=react.createElement("a",{key:"change-password__link-text",href:zendesk_url.A.PASSWORD_RESET,target:"_blank",rel:"noopener noreferrer"},react.createElement("span",{className:"change-password__link-text"},t("learnMoreUpperCase")));return react.createElement(component_library.aF,{isOpen:!0,onClose:onCancel,className:"change-password-warning-modal","data-testid":"change-password-warning-modal"},react.createElement(component_library.mH,null),react.createElement(component_library.$m,{alignItems:design_system.k2.center},react.createElement(component_library.rQ,null,react.createElement(component_library.az,null,react.createElement(component_library.az,{display:design_system.nl.Flex,justifyContent:design_system.A9.center},react.createElement(component_library.In,{name:component_library.$M.Danger,size:component_library.lK.Xl,color:design_system.Li.warningDefault})),react.createElement(component_library.EY,{variant:design_system.J3.headingMd,textAlign:design_system.nO.Center,marginTop:4},t("changePasswordWarning")),react.createElement(component_library.EY,{variant:design_system.J3.bodySm,marginTop:4},t("changePasswordWarningDescription")," ",changePasswordLearnMore))),react.createElement(component_library.az,{paddingLeft:4,paddingRight:4},react.createElement(component_library.az,{display:design_system.nl.Flex,marginTop:2,gap:4},react.createElement(component_library.$n,{variant:component_library.Ak.Secondary,"data-testid":"change-password-warning-cancel",size:component_library.Mp.Lg,block:!0,onClick:function(){return onCancel()}},t("cancel")),react.createElement(component_library.$n,{"data-testid":"change-password-warning-confirm",size:component_library.Mp.Lg,block:!0,onClick:function(){return onConfirm()}},t("confirm"))))))}try{changepasswordwarning.displayName="changepasswordwarning",changepasswordwarning.__docgenInfo={description:"",displayName:"changepasswordwarning",props:{onConfirm:{defaultValue:null,description:"",name:"onConfirm",required:!0,type:{name:"() => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/settings/security-tab/change-password/change-password-warning.tsx#changepasswordwarning"]={docgenInfo:changepasswordwarning.__docgenInfo,name:"changepasswordwarning",path:"ui/pages/settings/security-tab/change-password/change-password-warning.tsx#changepasswordwarning"})}catch(__react_docgen_typescript_loader_error){}function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function _ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var ChangePasswordSteps={VerifyCurrentPassword:1,ChangePassword:2,ChangePasswordLoading:3};let change_password=function(){var t=(0,useI18nContext.P)(),dispatch=(0,es.wA)(),navigate=(0,dist.Zp)(),trackEvent=(0,react.useContext)(metametrics.O2),isSocialLoginFlow=(0,es.d4)(selectors.nT$),animationEventEmitter=(0,react.useRef)(new(events_default())),_useState=_sliced_to_array((0,react.useState)(ChangePasswordSteps.VerifyCurrentPassword),2),step=_useState[0],setStep=_useState[1],_useState1=_sliced_to_array((0,react.useState)(""),2),currentPassword=_useState1[0],setCurrentPassword=_useState1[1],_useState2=_sliced_to_array((0,react.useState)(!1),2),isIncorrectPasswordError=_useState2[0],setIsIncorrectPasswordError=_useState2[1],_useState3=_sliced_to_array((0,react.useState)(!1),2),termsChecked=_useState3[0],setTermsChecked=_useState3[1],_useState4=_sliced_to_array((0,react.useState)(""),2),newPassword=_useState4[0],setNewPassword=_useState4[1],_useState5=_sliced_to_array((0,react.useState)(!1),2),showChangePasswordWarning=_useState5[0],setShowChangePasswordWarning=_useState5[1],onChangePassword=function(){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),setShowChangePasswordWarning(!1),setStep(ChangePasswordSteps.ChangePasswordLoading),[4,dispatch((0,actions.changePassword)(newPassword,currentPassword))];case 1:return _state.sent(),trackEvent({category:constants_metametrics.FZ.Settings,event:constants_metametrics.gP.PasswordChanged,properties:{biometrics_enabled:!1}}),navigate(routes.Vg),dispatch((0,utils.un)(app_state.rE.Success)),[3,3];case 2:return console.error(_state.sent()),setStep(ChangePasswordSteps.ChangePassword),dispatch((0,utils.un)(app_state.rE.Errored)),[3,3];case 3:return[2]}})})()},createPasswordLink=react.createElement("a",{onClick:function(event){event.stopPropagation(),trackEvent({category:constants_metametrics.FZ.Onboarding,event:constants_metametrics.gP.ExternalLinkClicked,properties:{text:"Learn More",location:"change_password",url:zendesk_url.A.PASSWORD_ARTICLE}})},key:"change-password__link-text",href:zendesk_url.A.PASSWORD_ARTICLE,target:"_blank",rel:"noopener noreferrer"},react.createElement("span",{className:"change-password__link-text"},t("learnMoreUpperCaseWithDot")));return(0,react.useEffect)(function(){_async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!isSocialLoginFlow)return[3,2];return[4,dispatch((0,actions.checkIsSeedlessPasswordOutdated)())];case 1:_state.sent(),_state.label=2;case 2:return[2]}})})()},[dispatch,isSocialLoginFlow]),react.createElement(component_library.az,{padding:4,className:"change-password"},step===ChangePasswordSteps.VerifyCurrentPassword&&react.createElement(component_library.az,{as:"form",display:design_system.nl.Flex,flexDirection:design_system.bo.Column,gap:6,justifyContent:design_system.A9.spaceBetween,height:design_system.Zf.Full,onSubmit:function(e){e.preventDefault(),_async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,(0,actions.verifyPassword)(currentPassword)];case 1:return _state.sent(),setIsIncorrectPasswordError(!1),setStep(ChangePasswordSteps.ChangePassword),[3,3];case 2:return _state.sent(),setIsIncorrectPasswordError(!0),[3,3];case 3:return[2]}})})()}},react.createElement(component_library.YJ,{id:"current-password",label:t("enterPasswordCurrent"),textFieldProps:{type:component_library.ux.Password},size:component_library.dY.Lg,labelProps:{marginBottom:1},inputProps:{autoFocus:!0,"data-testid":"verify-current-password-input"},value:currentPassword,error:isIncorrectPasswordError,helpText:isIncorrectPasswordError?t("unlockPageIncorrectPassword"):null,onChange:function(e){setCurrentPassword(e.target.value),setIsIncorrectPasswordError(!1)}}),react.createElement(component_library.$n,{type:"submit",block:!0,size:component_library.Mp.Lg,disabled:isIncorrectPasswordError||!currentPassword,"data-testid":"verify-current-password-button"},t("continue"))),step===ChangePasswordSteps.ChangePassword&&react.createElement(component_library.az,{as:"form",display:design_system.nl.Flex,flexDirection:design_system.bo.Column,gap:6,justifyContent:design_system.A9.spaceBetween,height:design_system.Zf.Full,onSubmit:function(e){e.preventDefault(),isSocialLoginFlow?setShowChangePasswordWarning(!0):onChangePassword()}},react.createElement(component_library.az,null,react.createElement(component_library.EY,{variant:design_system.J3.bodyMd,color:design_system.r7.textAlternative,marginBottom:4,as:"h2"},t(isSocialLoginFlow?"createPasswordDetailsSocial":"createPasswordDetails")),react.createElement(password_form.A,{onChange:function(password){return setNewPassword(password)},pwdInputTestId:"change-password-input",confirmPwdInputTestId:"change-password-confirm-input"}),react.createElement(component_library.az,{className:"create-password__terms-container",alignItems:design_system.k2.center,justifyContent:design_system.A9.spaceBetween,marginTop:6},react.createElement(component_library.Sc,{inputProps:{"data-testid":"change-password-terms"},alignItems:design_system.k2.flexStart,isChecked:termsChecked,onChange:function(){setTermsChecked(!termsChecked)},label:react.createElement(react.Fragment,null,t(isSocialLoginFlow?"passwordTermsWarningSocial":"passwordTermsWarning")," ",createPasswordLink)}))),react.createElement(component_library.$n,{type:"submit",disabled:!currentPassword||!newPassword||!termsChecked,"data-testid":"change-password-button",block:!0},t("save"))),step===ChangePasswordSteps.ChangePasswordLoading&&react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Column,alignItems:design_system.k2.center,marginTop:12},react.createElement("div",null,(0,build_types.YT)()||(0,build_types.Vb)()?react.createElement("img",{src:"./images/logo/metamask-fox.svg",width:"100",height:"100"}):react.createElement(mascot.A,{animationEventEmitter:animationEventEmitter.current,width:"100",height:"100"})),react.createElement(spinner.A,{className:"change-password__spinner"}),react.createElement(component_library.EY,{variant:design_system.J3.bodyLgMedium,marginBottom:4},t("changePasswordLoading")),react.createElement(component_library.EY,{variant:design_system.J3.bodySm,color:design_system.r7.textAlternative},t("changePasswordLoadingNote"))),showChangePasswordWarning&&react.createElement(ChangePasswordWarning,{onConfirm:function(){onChangePassword()},onCancel:function(){return setShowChangePasswordWarning(!1)}}))}}}]);