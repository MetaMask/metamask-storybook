"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[76336],{"./node_modules/@metamask/assets-controllers/dist/selectors/token-selectors.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>selectAssetsBySelectedAccountGroup});var util=__webpack_require__("./node_modules/@metamask/controller-utils/dist/util.mjs"),number=__webpack_require__("./node_modules/@metamask/utils/dist/number.mjs"),caip_types=__webpack_require__("./node_modules/@metamask/utils/dist/caip-types.mjs"),reselect=__webpack_require__("./node_modules/reselect/dist/reselect.mjs");function stringifyBalanceWithDecimals(balance,decimals,balanceDecimals=5){if(0n===balance||0===decimals)return balance.toString();let bal=balance.toString(),len=bal.length,decimalIndex=len-decimals,prefix="";if(decimalIndex<=0){for(;prefix.length<=-1*decimalIndex;)prefix+="0",len+=1;bal=prefix+bal,decimalIndex=1}let whole=bal.slice(0,len-decimals);if(0===balanceDecimals)return whole;let fractional=bal.slice(decimalIndex,decimalIndex+balanceDecimals);if(/0+$/u.test(fractional)){let withOnlySigZeroes=bal.slice(decimalIndex).replace(/0+$/u,"");return withOnlySigZeroes.length>0&&(withOnlySigZeroes=`.${withOnlySigZeroes}`),`${whole}${withOnlySigZeroes}`}return`${whole}.${fractional}`}function parseBalanceWithDecimals(balanceString,decimals){if(!/^\d+(\.\d+)?$/u.test(balanceString))return;let[integerPart,fractionalPart=""]=balanceString.split(".");return 0===decimals?(0,number.Q9)(BigInt(integerPart)):fractionalPart.length>=decimals?(0,number.Q9)(BigInt(`${integerPart}${fractionalPart.slice(0,decimals)}`)):(0,number.Q9)(BigInt(`${integerPart}${fractionalPart}${"0".repeat(decimals-fractionalPart.length)}`))}var codefi_v2=__webpack_require__("./node_modules/@metamask/assets-controllers/dist/token-prices-service/codefi-v2.mjs");let MULTICHAIN_NATIVE_ASSET_IDS=["bip122:000000000019d6689c085ae165831e93/slip44:0","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp/slip44:501"],createAssetListSelector=reselect.Mz.withTypes(),selectAccountsToGroupIdMap=createAssetListSelector([state=>state.accountTree,state=>state.internalAccounts],(accountTree,internalAccounts)=>{let accountsMap={};for(let{groups}of Object.values(accountTree.wallets))for(let{id:accountGroupId,accounts}of Object.values(groups))for(let accountId of accounts){let internalAccount=internalAccounts.accounts[accountId];accountsMap[internalAccount.type.startsWith("eip155")?internalAccount.address:accountId]={accountGroupId,type:internalAccount.type,accountId}}return accountsMap}),selectAllEvmAccountNativeBalances=createAssetListSelector([selectAccountsToGroupIdMap,state=>state.accountsByChainId,state=>state.marketData,state=>state.currencyRates,state=>state.currentCurrency,state=>state.networkConfigurationsByChainId],(accountsMap,accountsByChainId,marketData,currencyRates,currentCurrency,networkConfigurationsByChainId)=>{var _a;let groupAssets={};for(let[chainId,chainAccounts]of Object.entries(accountsByChainId))for(let[accountAddress,accountBalance]of Object.entries(chainAccounts)){let account=accountsMap[accountAddress.toLowerCase()];if(!account)continue;let{accountGroupId,type,accountId}=account;groupAssets[accountGroupId]??(groupAssets[accountGroupId]={}),(_a=groupAssets[accountGroupId])[chainId]??(_a[chainId]=[]);let groupChainAssets=groupAssets[accountGroupId][chainId],rawBalance=accountBalance.balance||"0x0",nativeCurrency=networkConfigurationsByChainId[chainId]?.nativeCurrency||"NATIVE",nativeToken={address:(0,codefi_v2.NH)(chainId),decimals:18,name:"ETH"===nativeCurrency?"Ethereum":nativeCurrency,symbol:nativeCurrency,image:""},fiatData=getFiatBalanceForEvmToken(rawBalance,nativeToken.decimals,marketData,currencyRates,chainId,nativeToken.address);groupChainAssets.push({type:type,assetId:nativeToken.address,isNative:!0,address:nativeToken.address,image:nativeToken.image,name:nativeToken.name,symbol:nativeToken.symbol,accountId,decimals:nativeToken.decimals,rawBalance,balance:stringifyBalanceWithDecimals((0,number.uU)(rawBalance),nativeToken.decimals),fiat:fiatData?{balance:fiatData.balance,currency:currentCurrency,conversionRate:fiatData.conversionRate}:void 0,chainId})}return groupAssets}),selectAllEvmAssets=createAssetListSelector([selectAccountsToGroupIdMap,state=>state.allTokens,state=>state.allIgnoredTokens,state=>state.tokenBalances,state=>state.marketData,state=>state.currencyRates,state=>state.currentCurrency],(accountsMap,evmTokens,ignoredEvmTokens,tokenBalances,marketData,currencyRates,currentCurrency)=>{var _a;let groupAssets={};for(let[chainId,chainTokens]of Object.entries(evmTokens))for(let[accountAddress,addressTokens]of Object.entries(chainTokens))for(let token of addressTokens){let tokenAddress=token.address,account=accountsMap[accountAddress];if(!account)continue;let{accountGroupId,type,accountId}=account;if(ignoredEvmTokens[chainId]?.[accountAddress]?.includes(tokenAddress))continue;let rawBalance=tokenBalances[accountAddress]?.[chainId]?.[tokenAddress];if(!rawBalance)continue;groupAssets[accountGroupId]??(groupAssets[accountGroupId]={}),(_a=groupAssets[accountGroupId])[chainId]??(_a[chainId]=[]);let groupChainAssets=groupAssets[accountGroupId][chainId],fiatData=getFiatBalanceForEvmToken(rawBalance,token.decimals,marketData,currencyRates,chainId,tokenAddress);groupChainAssets.push({type:type,assetId:tokenAddress,isNative:!1,address:tokenAddress,image:token.image??"",name:token.name??token.symbol,symbol:token.symbol,accountId,decimals:token.decimals,rawBalance,balance:stringifyBalanceWithDecimals((0,number.uU)(rawBalance),token.decimals),fiat:fiatData?{balance:fiatData.balance,currency:currentCurrency,conversionRate:fiatData.conversionRate}:void 0,chainId})}return groupAssets}),selectAllMultichainAssets=createAssetListSelector([selectAccountsToGroupIdMap,state=>state.accountsAssets,state=>state.assetsMetadata,state=>state.balances,state=>state.conversionRates,state=>state.currentCurrency],(accountsMap,multichainTokens,multichainAssetsMetadata,multichainBalances,multichainConversionRates,currentCurrency)=>{var _a;let groupAssets={};for(let[accountId,accountAssets]of Object.entries(multichainTokens))for(let assetId of accountAssets){let caipAsset;try{caipAsset=(0,caip_types.Ts)(assetId)}catch{continue}let{chainId}=caipAsset,asset=`${caipAsset.assetNamespace}:${caipAsset.assetReference}`,account=accountsMap[accountId],assetMetadata=multichainAssetsMetadata[assetId];if(!account||!assetMetadata)continue;let{accountGroupId,type}=account;groupAssets[accountGroupId]??(groupAssets[accountGroupId]={}),(_a=groupAssets[accountGroupId])[chainId]??(_a[chainId]=[]);let groupChainAssets=groupAssets[accountGroupId][chainId],balance=multichainBalances[accountId]?.[assetId],decimals=assetMetadata.units.find(unit=>unit.name===assetMetadata.name&&unit.symbol===assetMetadata.symbol)?.decimals;if(!balance||void 0===decimals)continue;let rawBalance=parseBalanceWithDecimals(balance.amount,decimals);if(!rawBalance)continue;let fiatData=getFiatBalanceForMultichainAsset(balance,multichainConversionRates,assetId);groupChainAssets.push({type:type,assetId,isNative:MULTICHAIN_NATIVE_ASSET_IDS.includes(assetId),image:assetMetadata.iconUrl,name:assetMetadata.name??assetMetadata.symbol??asset,symbol:assetMetadata.symbol??asset,accountId,decimals,rawBalance,balance:balance.amount,fiat:fiatData?{balance:fiatData.balance,currency:currentCurrency,conversionRate:fiatData.conversionRate}:void 0,chainId})}return groupAssets}),selectAllAssets=createAssetListSelector([selectAllEvmAssets,selectAllMultichainAssets,selectAllEvmAccountNativeBalances],(evmAssets,multichainAssets,evmAccountNativeBalances)=>{let groupAssets={};return mergeAssets(groupAssets,evmAssets),mergeAssets(groupAssets,multichainAssets),mergeAssets(groupAssets,evmAccountNativeBalances),groupAssets}),selectAssetsBySelectedAccountGroup=createAssetListSelector([selectAllAssets,state=>state.accountTree],(groupAssets,accountTree)=>{let{selectedAccountGroup}=accountTree;return selectedAccountGroup&&groupAssets[selectedAccountGroup]||{}});function mergeAssets(existingAssets,newAssets){for(let[accountGroupId,accountAssets]of Object.entries(newAssets)){let existingAccountGroupAssets=existingAssets[accountGroupId];if(existingAccountGroupAssets)for(let[network,chainAssets]of Object.entries(accountAssets))existingAccountGroupAssets[network]??(existingAccountGroupAssets[network]=[]),existingAccountGroupAssets[network].push(...chainAssets);else for(let[network,chainAssets]of(existingAssets[accountGroupId]={},Object.entries(accountAssets)))existingAssets[accountGroupId][network]=[...chainAssets]}}function getFiatBalanceForEvmToken(rawBalance,decimals,marketData,currencyRates,chainId,tokenAddress){let tokenMarketData=marketData[chainId]?.[tokenAddress];if(!tokenMarketData)return;let currencyRate=currencyRates[tokenMarketData.currency];if(currencyRate?.conversionRate)return{balance:(0,util.n6)(rawBalance)/10**decimals*tokenMarketData.price*currencyRate.conversionRate,conversionRate:currencyRate.conversionRate}}function getFiatBalanceForMultichainAsset(balance,multichainConversionRates,assetId){let assetMarketData=multichainConversionRates[assetId];if(assetMarketData?.rate)return{balance:Number(balance.amount)*Number(assetMarketData.rate),conversionRate:Number(assetMarketData.rate)}}},"./shared/lib/snaps/snaps.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>isSnapPreinstalled});var FORCE_PREINSTALLED_SNAPS="true"===__webpack_require__("./node_modules/process/browser.js").env.FORCE_PREINSTALLED_SNAPS,PREINSTALLED_SNAPS=["npm:@metamask/message-signing-snap","npm:@metamask/ens-resolver-snap","npm:@metamask/institutional-wallet-snap","npm:@metamask/account-watcher","npm:@metamask/preinstalled-example-snap","npm:@metamask/bitcoin-wallet-snap","npm:@metamask/solana-wallet-snap"];function isSnapPreinstalled(snapId){return!!(FORCE_PREINSTALLED_SNAPS&&snapId.startsWith("local:"))||PREINSTALLED_SNAPS.some(function(snap){return snap===snapId})}},"./shared/lib/translate.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>t});var _app_locales_en_messages_json__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./app/_locales/en/messages.json"),_modules_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./shared/modules/i18n.ts"),currentLocale=_modules_i18n__WEBPACK_IMPORTED_MODULE_1__.MY;function t(key){for(var _len=arguments.length,substitutions=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)substitutions[_key-1]=arguments[_key];return(0,_modules_i18n__WEBPACK_IMPORTED_MODULE_1__.I4)(currentLocale,_app_locales_en_messages_json__WEBPACK_IMPORTED_MODULE_0__,key,substitutions)||(0,_modules_i18n__WEBPACK_IMPORTED_MODULE_1__.I4)(_modules_i18n__WEBPACK_IMPORTED_MODULE_1__.MY,_app_locales_en_messages_json__WEBPACK_IMPORTED_MODULE_0__,key,substitutions)}},"./ui/components/multichain/create-account/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>CreateAccount});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),react_router=__webpack_require__("./node_modules/react-router-dom/node_modules/react-router/esm/react-router.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),form_text_field=__webpack_require__("./ui/components/component-library/form-text-field/form-text-field.tsx"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),utils_accounts=__webpack_require__("./ui/helpers/utils/accounts.js"),selectors=__webpack_require__("./ui/selectors/index.js"),selectors_selectors=__webpack_require__("./ui/selectors/selectors.js"),history_history=__webpack_require__("./ui/ducks/history/history.js"),metametrics=__webpack_require__("./shared/constants/metametrics.ts"),contexts_metametrics=__webpack_require__("./ui/contexts/metametrics.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),select_srp=__webpack_require__("./ui/components/multichain/multi-srp/select-srp/select-srp.tsx"),dist=__webpack_require__("./node_modules/@metamask/keyring-api/dist/index.mjs"),util=__webpack_require__("./shared/modules/selectors/util.js"),assets=__webpack_require__("./ui/selectors/assets.ts"),snaps=__webpack_require__("./shared/lib/accounts/snaps.ts"),string_utils=__webpack_require__("./shared/modules/string-utils.ts"),snaps_snaps=__webpack_require__("./shared/lib/snaps/snaps.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var isPrimaryHdAndFirstPartySnapAccount=(0,util._)(function(_state,account){return account},selectors.Qv$,function(account,hdKeyrings){var _account_options,primaryKeyring=_sliced_to_array(hdKeyrings,1)[0];return!!primaryKeyring&&!!(primaryKeyring.accounts.find(function(address){return(0,string_utils.y)(account.address,address)})||account.metadata.snap&&(0,snaps.e)(account.metadata.snap.id)&&(null==(_account_options=account.options)?void 0:_account_options.entropySource)===primaryKeyring.metadata.id)});(0,util._)(function(state){return state},function(_state,account){return account},selectors.c3v,selectors.We4,function(state,account){return(0,assets.q6)(state,account)},function(state,account){return isPrimaryHdAndFirstPartySnapAccount(state,account)},function(state,account,tokens,crossChainBalances,aggregatedBalance,isAccountAPrimaryHdOrFirstPartySnapAccount){var _state_metamask=state.metamask,seedPhraseBackedUp=_state_metamask.seedPhraseBackedUp,dismissSeedBackUpReminder=_state_metamask.dismissSeedBackUpReminder;if(!account||!isAccountAPrimaryHdOrFirstPartySnapAccount)return!1;var hasBalance=!1;return hasBalance=(0,dist.aw)(account.type)?Object.values(tokens).some(function(chains){return chains.some(function(chain){return chain.balance&&parseInt(chain.balance,16)>0})})||Object.values(crossChainBalances).some(function(chain){return(null==chain?void 0:chain[account.address])&&parseInt(null==chain?void 0:chain[account.address],16)>0}):aggregatedBalance>0,!1===seedPhraseBackedUp&&hasBalance&&!1===dismissSeedBackUpReminder});var getSnapAccountsByKeyringId=(0,util._)(selectors.atg,function(_state,keyringId){return keyringId},function(accounts,keyringId){return accounts.filter(function(account){var _account_options;return account.metadata.snap&&(0,snaps_snaps.w)(account.metadata.snap.id)&&(null==(_account_options=account.options)?void 0:_account_options.entropySource)===keyringId})}),trace=__webpack_require__("./shared/lib/trace.ts");function create_account_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function create_account_array_with_holes(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _instanceof(left,right){return null!=right&&"undefined"!=typeof Symbol&&right[Symbol.hasInstance]?!!right[Symbol.hasInstance](left):left instanceof right}function create_account_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function create_account_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function create_account_sliced_to_array(arr,i){return create_account_array_with_holes(arr)||create_account_iterable_to_array_limit(arr,i)||create_account_unsupported_iterable_to_array(arr,i)||create_account_non_iterable_rest()}function create_account_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return create_account_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return create_account_array_like_to_array(o,minLen)}}function _ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var CreateAccount=react.memo(react.forwardRef(function(param,ref){var getNextAvailableAccountName=param.getNextAvailableAccountName,onCreateAccount=param.onCreateAccount,onSelectSrp=param.onSelectSrp,selectedKeyringId=param.selectedKeyringId,onActionComplete=param.onActionComplete,scope=param.scope,_param_redirectToOverview=param.redirectToOverview,redirectToOverview=void 0===_param_redirectToOverview||_param_redirectToOverview,t=(0,useI18nContext.P)(),history=(0,react_router.W6)(),trackEvent=(0,react.useContext)(contexts_metametrics.O2),hdEntropyIndex=(0,es.d4)(selectors_selectors.gDl),mostRecentOverviewPage=(0,es.d4)(history_history.fs),accounts=(0,es.d4)(selectors.zi3),_useState=create_account_sliced_to_array((0,react.useState)(!1),2),loading=_useState[0],setLoading=_useState[1],_useState1=create_account_sliced_to_array((0,react.useState)(""),2),defaultAccountName=_useState1[0],setDefaultAccountName=_useState1[1];(0,react.useEffect)(function(){getNextAvailableAccountName(accounts).then(setDefaultAccountName)},[]);var _useState2=create_account_sliced_to_array((0,react.useState)(""),2),newAccountName=_useState2[0],setNewAccountName=_useState2[1],_useState3=create_account_sliced_to_array((0,react.useState)(""),2),creationError=_useState3[0],setCreationError=_useState3[1],trimmedAccountName=newAccountName.trim(),_getAccountNameErrorMessage=(0,utils_accounts.kN)(accounts,{t:t},trimmedAccountName||defaultAccountName,defaultAccountName),isValidAccountName=_getAccountNameErrorMessage.isValidAccountName,errorMessage=_getAccountNameErrorMessage.errorMessage,hdKeyrings=(0,es.d4)(selectors.Qv$),selectedKeyring=(0,es.d4)(function(state){return(0,selectors.hrs)(state,selectedKeyringId)}),firstPartySnapAccounts=(0,es.d4)(function(state){return getSnapAccountsByKeyringId(state,selectedKeyringId)}),selectedHdKeyringIndex=(0,es.d4)(function(state){return(0,selectors.mJ8)(state,selectedKeyringId)}),onSubmit=(0,react.useCallback)(function(event){return _async_to_generator(function(){var error,message;return _ts_generator(this,function(_state){switch(_state.label){case 0:setLoading(!0),setCreationError(""),event.preventDefault(),_state.label=1;case 1:return _state.trys.push([1,3,4,5]),(0,trace.uP)({name:trace.dg.CreateAccount}),[4,onCreateAccount(trimmedAccountName||defaultAccountName)];case 2:return _state.sent(),trackEvent({category:metametrics.FZ.Accounts,event:metametrics.gP.AccountAdded,properties:{account_type:metametrics.co.Default,location:"Home",hd_entropy_index:hdEntropyIndex,chain_id_caip:scope,is_suggested_name:!trimmedAccountName||trimmedAccountName===defaultAccountName}}),redirectToOverview&&history.push(mostRecentOverviewPage),[3,5];case 3:return error=_state.sent(),setLoading(!1),message="An unexpected error occurred.",_instanceof(error,Error)&&(message=error.message),setCreationError(message),selectedKeyringId?trackEvent({category:metametrics.FZ.Accounts,event:metametrics.gP.AccountImportFailed,properties:{account_type:metametrics.co.Imported,error:message,hd_entropy_index:hdEntropyIndex,chain_id_caip:scope}}):trackEvent({category:metametrics.FZ.Accounts,event:metametrics.gP.AccountAddFailed,properties:{account_type:metametrics.co.Default,error:message,hd_entropy_index:hdEntropyIndex,chain_id_caip:scope}}),[3,5];case 4:return(0,trace.t7)({name:trace.dg.CreateAccount}),[7];case 5:return[2]}})})()},[trimmedAccountName,defaultAccountName,mostRecentOverviewPage]);return react.createElement(component_library.az,{as:"form",onSubmit:onSubmit},react.createElement(form_text_field.Y,{"data-testid":"account-name-input",inputRef:ref,size:component_library.dY.Lg,gap:2,autoFocus:!0,id:"account-name",label:t("accountName"),placeholder:defaultAccountName,onChange:function(e){return setNewAccountName(e.target.value)},helpText:creationError||errorMessage,error:!isValidAccountName||!!creationError,onKeyPress:function(e){"Enter"===e.key&&onSubmit(e)}}),hdKeyrings.length>1&&onSelectSrp&&selectedKeyring?react.createElement(component_library.az,{marginBottom:3},react.createElement(select_srp.S,{onClick:onSelectSrp,srpName:t("secretRecoveryPhrasePlusNumber",[selectedHdKeyringIndex+1]),srpAccounts:selectedKeyring.accounts.length+firstPartySnapAccounts.length})):null,react.createElement(component_library.az,{display:design_system.nl.Flex,marginTop:1,gap:2},react.createElement(component_library.nR,{"data-testid":"cancel-add-account-with-name",type:"button",onClick:function(){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,onActionComplete(!1)];case 1:return[2,_state.sent()]}})})()},block:!0},t("cancel")),react.createElement(component_library.$$,{"data-testid":"submit-add-account-with-name",type:"submit",disabled:!isValidAccountName||loading,loading:loading,block:!0},t("addAccount"))))}));try{CreateAccount.displayName="CreateAccount",CreateAccount.__docgenInfo={description:"",displayName:"CreateAccount",props:{getNextAvailableAccountName:{defaultValue:null,description:"Callback to get the next available account name.",name:"getNextAvailableAccountName",required:!0,type:{name:'(accounts: { type: "eip155:eoa" | "eip155:erc4337" | "bip122:p2pkh" | "bip122:p2sh" | "bip122:p2wpkh" | "bip122:p2tr" | "solana:data-account" | "tron:eoa" | "any:account"; id: string; ... 4 more ...; methods: string[]; }[]) => Promise<...>'}},onCreateAccount:{defaultValue:null,description:"Callback to create the account.",name:"onCreateAccount",required:!0,type:{name:"(name: string) => Promise<void>"}},onActionComplete:{defaultValue:null,description:"Callback called once the account has been created",name:"onActionComplete",required:!0,type:{name:'(completed: boolean, newAccount?: { type: "eip155:eoa" | "eip155:erc4337" | "bip122:p2pkh" | "bip122:p2sh" | "bip122:p2wpkh" | "bip122:p2tr" | "solana:data-account" | "tron:eoa" | "any:account"; ... 5 more ...; methods: string[]; } | undefined) => Promise<...>'}},scope:{defaultValue:null,description:"The scope of the account",name:"scope",required:!1,type:{name:"`${string}:${string}`"}},onSelectSrp:{defaultValue:null,description:"Callback to select the SRP",name:"onSelectSrp",required:!1,type:{name:"(() => void)"}},selectedKeyringId:{defaultValue:null,description:"",name:"selectedKeyringId",required:!1,type:{name:"string"}},redirectToOverview:{defaultValue:null,description:"",name:"redirectToOverview",required:!1,type:{name:"boolean"}},as:{defaultValue:null,description:`An override of the default HTML tag.
Can also be a React component.`,name:"as",required:!1,type:{name:"ElementType<any>"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/components/multichain/create-account/create-account.tsx#CreateAccount"]={docgenInfo:CreateAccount.__docgenInfo,name:"CreateAccount",path:"ui/components/multichain/create-account/create-account.tsx#CreateAccount"})}catch(__react_docgen_typescript_loader_error){}},"./ui/components/multichain/create-eth-account/create-eth-account.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),___WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/components/multichain/create-eth-account/index.js");let __WEBPACK_DEFAULT_EXPORT__={title:"Components/Multichain/CreateEthAccount",component:___WEBPACK_IMPORTED_MODULE_1__.t};var DefaultStory=function(args){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(___WEBPACK_IMPORTED_MODULE_1__.t,args)};DefaultStory.storyName="Default",DefaultStory.parameters={...DefaultStory.parameters,docs:{...DefaultStory.parameters?.docs,source:{originalSource:"args => <CreateEthAccount {...args} />",...DefaultStory.parameters?.docs?.source}}};let __namedExportsOrder=["DefaultStory"]},"./ui/components/multichain/create-eth-account/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>CreateEthAccount});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-redux/es/index.js"),KeyringController=__webpack_require__("./node_modules/@metamask/keyring-controller/dist/KeyringController.mjs"),actions=__webpack_require__("./ui/__mocks__/actions.js"),trace=__webpack_require__("./shared/lib/trace.ts"),create_account=__webpack_require__("./ui/components/multichain/create-account/index.js");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var CreateEthAccount=function(param){var onActionComplete=param.onActionComplete,onSelectSrp=param.onSelectSrp,selectedKeyringId=param.selectedKeyringId,redirectToOverview=param.redirectToOverview,dispatch=(0,es.wA)();return react.createElement(create_account.m,{onActionComplete:onActionComplete,onCreateAccount:function(name){return _async_to_generator(function(){var newAccount;return _ts_generator(this,function(_state){switch(_state.label){case 0:(0,trace.uP)({name:trace.dg.AddAccount}),_state.label=1;case 1:return _state.trys.push([1,,3,4]),[4,dispatch((0,actions.addNewAccount)(selectedKeyringId))];case 2:return newAccount=_state.sent(),name&&dispatch((0,actions.setAccountLabel)(newAccount.address,name)),onActionComplete(!0,newAccount),[3,4];case 3:return(0,trace.t7)({name:trace.dg.AddAccount}),[7];case 4:return[2]}})})()},getNextAvailableAccountName:function(){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,(0,actions.getNextAvailableAccountName)(KeyringController.rI.hd)];case 1:return[2,_state.sent()]}})})()},onSelectSrp:onSelectSrp,selectedKeyringId:selectedKeyringId,redirectToOverview:redirectToOverview})};CreateEthAccount.propTypes={onActionComplete:prop_types_default().func.isRequired,onSelectSrp:prop_types_default().func,selectedKeyringId:prop_types_default().string,redirectToOverview:prop_types_default().bool},CreateEthAccount.__docgenInfo={description:"",methods:[],displayName:"CreateEthAccount",props:{onActionComplete:{description:"Executes when the Create button is clicked",type:{name:"func"},required:!0},onSelectSrp:{description:"Callback to select the SRP",type:{name:"func"},required:!1},selectedKeyringId:{description:"Currently selected HD keyring",type:{name:"string"},required:!1},redirectToOverview:{description:"Whether to redirect to the overview page after creating the account",type:{name:"bool"},required:!1}}}},"./ui/components/multichain/multi-srp/select-srp/select-srp.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>SelectSrp});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_ui_card__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/components/ui/card/index.js"),_component_library__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/component-library/index.ts"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/hooks/useI18nContext.js"),SelectSrp=function(param){var srpName=param.srpName,srpAccounts=param.srpAccounts,onClick=param.onClick,t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_4__.P)();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.az,{"data-testid":"select-srp-container"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.JU,{marginBottom:2},t("selectSecretRecoveryPhrase")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_ui_card__WEBPACK_IMPORTED_MODULE_1__.A,{onClick:onClick,paddingTop:1,paddingBottom:1,className:"select-srp__container","data-testid":"select-srp-".concat(srpName)},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.az,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.nl.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.bo.Row,alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.k2.center,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.A9.spaceBetween},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.az,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,null,srpName),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.J3.bodySm,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.r7.textMuted},t(srpAccounts>1?"srpListNumberOfAccounts":"srpListSingleOrZero",[srpAccounts]))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.In,{name:_component_library__WEBPACK_IMPORTED_MODULE_2__.$M.ArrowRight,size:_component_library__WEBPACK_IMPORTED_MODULE_2__.lK.Sm}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.J3.bodySm,marginTop:1},t("srpListSelectionDescription")))};try{SelectSrp.displayName="SelectSrp",SelectSrp.__docgenInfo={description:"",displayName:"SelectSrp",props:{srpName:{defaultValue:null,description:"",name:"srpName",required:!0,type:{name:"string"}},srpAccounts:{defaultValue:null,description:"",name:"srpAccounts",required:!0,type:{name:"number"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/components/multichain/multi-srp/select-srp/select-srp.tsx#SelectSrp"]={docgenInfo:SelectSrp.__docgenInfo,name:"SelectSrp",path:"ui/components/multichain/multi-srp/select-srp/select-srp.tsx#SelectSrp"})}catch(__react_docgen_typescript_loader_error){}},"./ui/components/ui/box/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>_box__WEBPACK_IMPORTED_MODULE_0__.Ay,Ve:()=>_box__WEBPACK_IMPORTED_MODULE_0__.Ve});var _box__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/ui/box/box.js")},"./ui/components/ui/card/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>card});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),box=__webpack_require__("./ui/components/ui/box/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function _object_without_properties(source,excluded){if(null==source)return{};var key,i,target=_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}var Card=function(_param){var _param_border=_param.border,border=void 0===_param_border||_param_border,_param_backgroundColor=_param.backgroundColor,backgroundColor=void 0===_param_backgroundColor?design_system.i0.backgroundDefault:_param_backgroundColor,children=_param.children,props=_object_without_properties(_param,["border","backgroundColor","children"]);return react.createElement(box.Ay,_object_spread({borderColor:border?design_system.cG.borderMuted:null,borderRadius:border?design_system.Z6.MD:null,borderStyle:border?design_system.kD.solid:null,backgroundColor:backgroundColor,padding:4},props),children)};Card.propTypes=_object_spread({border:prop_types_default().bool,backgroundColor:prop_types_default().oneOf(Object.values(design_system.i0))},box.Ay.propTypes);let card=Card;Card.__docgenInfo={description:"",methods:[],displayName:"Card",props:{border:{defaultValue:{value:"true",computed:!1},description:`Whether the Card has a border or not.
Defaults to true`,type:{name:"bool"},required:!1},backgroundColor:{defaultValue:{value:"BackgroundColor.backgroundDefault",computed:!0},description:`The background color of the card
Defaults to Color.backgroundDefault`,type:{name:"union",value:[{name:"custom",raw:"ValidBackgroundColor"},{name:"custom",raw:"ArrayOfValidBackgroundColor"}]},required:!1},children:{description:"",type:{name:"union",value:[{name:"node"},{name:"func"}]},required:!1},flexDirection:{description:"",type:{name:"union",value:[{name:"enum",computed:!0,value:"Object.values(FlexDirection)"},{name:"arrayOf",value:{name:"enum",computed:!0,value:"Object.values(FlexDirection)"}}]},required:!1},flexWrap:{description:"",type:{name:"union",value:[{name:"enum",computed:!0,value:"Object.values(FlexWrap)"},{name:"arrayOf",value:{name:"enum",computed:!0,value:"Object.values(FlexWrap)"}}]},required:!1},gap:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSize"},{name:"custom",raw:"ArrayOfValidSizes"}]},required:!1},margin:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSizeAndAuto"},{name:"custom",raw:"ArrayOfValidSizesAndAuto"}]},required:!1},marginTop:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSizeAndAuto"},{name:"custom",raw:"ArrayOfValidSizesAndAuto"}]},required:!1},marginBottom:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSizeAndAuto"},{name:"custom",raw:"ArrayOfValidSizesAndAuto"}]},required:!1},marginRight:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSizeAndAuto"},{name:"custom",raw:"ArrayOfValidSizesAndAuto"}]},required:!1},marginLeft:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSizeAndAuto"},{name:"custom",raw:"ArrayOfValidSizesAndAuto"}]},required:!1},marginInline:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSizeAndAuto"},{name:"custom",raw:"ArrayOfValidSizesAndAuto"}]},required:!1},marginInlineStart:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSizeAndAuto"},{name:"custom",raw:"ArrayOfValidSizesAndAuto"}]},required:!1},marginInlineEnd:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSizeAndAuto"},{name:"custom",raw:"ArrayOfValidSizesAndAuto"}]},required:!1},padding:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSize"},{name:"custom",raw:"ArrayOfValidSizes"}]},required:!1},paddingTop:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSize"},{name:"custom",raw:"ArrayOfValidSizes"}]},required:!1},paddingBottom:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSize"},{name:"custom",raw:"ArrayOfValidSizes"}]},required:!1},paddingRight:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSize"},{name:"custom",raw:"ArrayOfValidSizes"}]},required:!1},paddingLeft:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSize"},{name:"custom",raw:"ArrayOfValidSizes"}]},required:!1},paddingInline:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSize"},{name:"custom",raw:"ArrayOfValidSizes"}]},required:!1},paddingInlineStart:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSize"},{name:"custom",raw:"ArrayOfValidSizes"}]},required:!1},paddingInlineEnd:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidSize"},{name:"custom",raw:"ArrayOfValidSizes"}]},required:!1},borderColor:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidBorderColors"},{name:"custom",raw:"ArrayOfValidBorderColors"}]},required:!1},borderWidth:{description:"",type:{name:"union",value:[{name:"number"},{name:"arrayOf",value:{name:"number"}}]},required:!1},borderRadius:{description:"",type:{name:"union",value:[{name:"enum",computed:!0,value:"Object.values(BorderRadius)"},{name:"arrayOf",value:{name:"enum",computed:!0,value:"Object.values(BorderRadius)"}}]},required:!1},borderStyle:{description:"",type:{name:"union",value:[{name:"enum",computed:!0,value:"Object.values(BorderStyle)"},{name:"arrayOf",value:{name:"enum",computed:!0,value:"Object.values(BorderStyle)"}}]},required:!1},alignItems:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidAlignItem"},{name:"custom",raw:"ArrayOfValidAlignItems"}]},required:!1},justifyContent:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidJustifyContent"},{name:"custom",raw:"ArrayOfValidJustifyContents"}]},required:!1},textAlign:{description:"",type:{name:"union",value:[{name:"enum",computed:!0,value:"Object.values(TextAlign)"},{name:"arrayOf",value:{name:"enum",computed:!0,value:"Object.values(TextAlign)"}}]},required:!1},display:{description:"",type:{name:"union",value:[{name:"enum",computed:!0,value:"Object.values(Display)"},{name:"arrayOf",value:{name:"enum",computed:!0,value:"Object.values(Display)"}}]},required:!1},width:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidBlockSize"},{name:"custom",raw:"ArrayOfValidBlockSizes"}]},required:!1},height:{description:"",type:{name:"union",value:[{name:"custom",raw:"ValidBlockSize"},{name:"custom",raw:"ArrayOfValidBlockSizes"}]},required:!1},className:{description:"",type:{name:"string"},required:!1},style:{description:"",type:{name:"object"},required:!1},as:{description:`The polymorphic \`as\` prop allows you to change the root HTML element of the Box component
Defaults to 'div'`,type:{name:"string"},required:!1},color:{description:`The color of the Typography component Should use the COLOR object from
./ui/helpers/constants/design-system.js`,type:{name:"union",value:[{name:"custom",raw:"ValidTextColors"},{name:"custom",raw:"ArrayOfValidTextColors"},{name:"custom",raw:"ValidIconColors"},{name:"custom",raw:"ArrayOfValidIconColors"}]},required:!1},ariaLabel:{description:"",type:{name:"string"},required:!1},"aria-label":{description:"",type:{name:"string"},required:!1}}}},"./ui/helpers/utils/accounts.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B8:()=>getAccountLabels,kN:()=>getAccountNameErrorMessage,ZX:()=>getAvatarNetworkColor});var _obj,_obj1,Icon=__webpack_require__("./node_modules/@metamask/snaps-sdk/dist/jsx/components/Icon.mjs"),caip_types=__webpack_require__("./node_modules/@metamask/utils/dist/caip-types.mjs"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),network=__webpack_require__("./shared/constants/network.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),constants_keyring=__webpack_require__("./shared/constants/keyring.ts"),hardware_wallets=__webpack_require__("./shared/constants/hardware-wallets.ts"),translate=__webpack_require__("./shared/lib/translate.ts"),snaps=__webpack_require__("./shared/lib/snaps/snaps.ts"),dist=__webpack_require__("./node_modules/@metamask/keyring-api/dist/index.mjs"),bitcoin_wallet_snap=__webpack_require__("./shared/lib/accounts/bitcoin-wallet-snap.ts"),solana_wallet_snap=__webpack_require__("./shared/lib/accounts/solana-wallet-snap.ts");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}_define_property(_obj={},dist.fi.P2pkh,bitcoin_wallet_snap.S),_define_property(_obj,dist.fi.P2sh,bitcoin_wallet_snap.S),_define_property(_obj,dist.fi.P2wpkh,bitcoin_wallet_snap.S),_define_property(_obj,dist.fi.P2tr,bitcoin_wallet_snap.S),_define_property(_obj,dist.Ux.DataAccount,solana_wallet_snap.O);var MULTICHAIN_ACCOUNT_TYPE_TO_NAME=(_define_property(_obj1={},dist.fi.P2pkh,"Legacy"),_define_property(_obj1,dist.fi.P2sh,"SegWit"),_define_property(_obj1,dist.fi.P2wpkh,"Native SegWit"),_define_property(_obj1,dist.fi.P2tr,"Taproot"),_obj1);function getAccountNameErrorMessage(accounts,context,newAccountName,defaultAccountName){var errorMessage,isDuplicateAccountName=accounts.some(function(item){var _item_metadata_name,_item_metadata;return(null==(_item_metadata=item.metadata)||null==(_item_metadata_name=_item_metadata.name)?void 0:_item_metadata_name.toLowerCase())===(null==newAccountName?void 0:newAccountName.toLowerCase())}),isEmptyAccountName=!newAccountName||""===newAccountName,localizedWordForAccount=context.t("newAccountNumberName").replace(" $1",""),isReservedAccountName=RegExp("^\\s*".concat(localizedWordForAccount," \\d+\\s*$"),"iu").test(newAccountName||""),isValidAccountName=(null==newAccountName?void 0:newAccountName.toLowerCase())===(null==defaultAccountName?void 0:defaultAccountName.toLowerCase())||!isDuplicateAccountName&&!isReservedAccountName&&!isEmptyAccountName;return isValidAccountName?errorMessage=component_library.jM:isDuplicateAccountName?errorMessage=context.t("accountNameDuplicate"):isReservedAccountName?errorMessage=context.t("accountNameReserved"):isEmptyAccountName&&(errorMessage=context.t("required")),{isValidAccountName:isValidAccountName,errorMessage:errorMessage}}function getAvatarNetworkColor(name){switch(name){case network.iqD:return design_system.i0.goerli;case network.u$P:return design_system.i0.lineaGoerli;case network.Zkf:return design_system.i0.lineaSepolia;case network.hRi:return design_system.i0.sepolia;default:return}}var toSrpLabel=function(index){return"SRP #".concat(index+1)};function getAccountLabels(type,account,keyrings,snapName){if(!account)return[];var labels=[],hdKeyrings=keyrings.filter(function(keyring){return keyring.type===constants_keyring.ci.hdKeyTree});switch(type){case constants_keyring.ci.hdKeyTree:if(hdKeyrings.length>1){var hdKeyringIndex=hdKeyrings.findIndex(function(kr){return kr.accounts.includes(account.address)});labels.push({label:toSrpLabel(hdKeyringIndex),icon:null})}break;case constants_keyring.ci.imported:labels.push({label:(0,translate.t)("imported"),icon:null});break;case constants_keyring.ci.qr:labels.push({label:hardware_wallets.GZ.qr,icon:null});break;case constants_keyring.ci.trezor:labels.push({label:hardware_wallets.GZ.trezor,icon:null});break;case constants_keyring.ci.ledger:labels.push({label:hardware_wallets.GZ.ledger,icon:null});break;case constants_keyring.ci.oneKey:labels.push({label:hardware_wallets.GZ.oneKey,icon:null});break;case constants_keyring.ci.lattice:labels.push({label:hardware_wallets.GZ.lattice,icon:null});break;case constants_keyring.ci.snap:var entropySource=account.options.entropySource;if(entropySource&&hdKeyrings.length>1){var hdKeyringIndex1=hdKeyrings.findIndex(function(kr){return kr.metadata.id===entropySource});labels.push({label:toSrpLabel(hdKeyringIndex1),icon:null})}if((0,snaps.w)(account.metadata.snap.id))break;if(snapName){labels.push({label:"".concat(snapName," (").concat((0,translate.t)("beta"),")"),icon:Icon.$.Snaps});break}labels.push({label:"".concat((0,translate.t)("snaps")," (").concat((0,translate.t)("beta"),")"),icon:Icon.$.Snaps})}return(0,caip_types.rW)(account.type).namespace===caip_types.wV.Bip122&&labels.push({label:"".concat(MULTICHAIN_ACCOUNT_TYPE_TO_NAME[account.type]),icon:null}),labels}},"./ui/hooks/useTokenBalances.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{mz:()=>stringifyBalance,mK:()=>useTokenBalances,H6:()=>useTokenTracker});var es=__webpack_require__("./node_modules/react-redux/es/index.js"),bn=__webpack_require__("./node_modules/bn.js/lib/bn.js"),bn_default=__webpack_require__.n(bn),actions=__webpack_require__("./ui/store/actions.ts"),metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts"),networks=__webpack_require__("./ui/selectors/multichain/networks.ts"),react=__webpack_require__("./node_modules/react/index.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}let hooks_useMultiPolling=function(usePollingOptions){var pollingTokens=(0,react.useRef)(new Map);(0,react.useEffect)(function(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=usePollingOptions.input[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)!function(){var input=_step.value,key=JSON.stringify(input);pollingTokens.current.has(key)||usePollingOptions.startPolling(input).then(function(token){return pollingTokens.current.set(key,token)})}()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion1=!0,_didIteratorError1=!1,_iteratorError1=void 0;try{for(var _step1,_iterator1=pollingTokens.current.entries()[Symbol.iterator]();!(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done);_iteratorNormalCompletion1=!0)!function(){var _step_value=_sliced_to_array(_step1.value,2),inputKey=_step_value[0],token=_step_value[1];usePollingOptions.input.some(function(i){return inputKey===JSON.stringify(i)})||(usePollingOptions.stopPollingByPollingToken(token),pollingTokens.current.delete(inputKey))}()}catch(err){_didIteratorError1=!0,_iteratorError1=err}finally{try{_iteratorNormalCompletion1||null==_iterator1.return||_iterator1.return()}finally{if(_didIteratorError1)throw _iteratorError1}}},[usePollingOptions.input&&JSON.stringify(usePollingOptions.input)]),(0,react.useEffect)(function(){return function(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=pollingTokens.current.values()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var token=_step.value;usePollingOptions.stopPollingByPollingToken(token)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},[])};var useTokenBalances=function(){var chainIds=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chainIds,tokenBalances=(0,es.d4)(metamask.HF),enabledChainIds=(0,es.d4)(networks.Rq),pollableChains=chainIds&&chainIds.length>0?chainIds:enabledChainIds;return hooks_useMultiPolling({startPolling:actions.tokenBalancesStartPolling,stopPollingByPollingToken:actions.tokenBalancesStopPollingByPollingToken,input:[pollableChains]}),{tokenBalances:tokenBalances}},useTokenTracker=function(param){var chainId=param.chainId,tokens=param.tokens,address=param.address,hideZeroBalanceTokens=param.hideZeroBalanceTokens,tokenBalances=useTokenBalances({chainIds:[chainId]}).tokenBalances;return{tokensWithBalances:tokens.reduce(function(acc,token){var _tokenBalances_address_chainId,_tokenBalances_address,_tokenBalances_address_chainId_token_address,hexBalance=null!=(_tokenBalances_address_chainId_token_address=null==(_tokenBalances_address=tokenBalances[address])||null==(_tokenBalances_address_chainId=_tokenBalances_address[chainId])?void 0:_tokenBalances_address_chainId[token.address])?_tokenBalances_address_chainId_token_address:"0x0";if("0x0"!==hexBalance||!hideZeroBalanceTokens){var decimalBalance=(0,conversion_utils.I0)(hexBalance);acc.push({address:token.address,symbol:token.symbol,decimals:token.decimals,balance:decimalBalance,balanceError:null,string:stringifyBalance(new(bn_default())(decimalBalance),new(bn_default())(token.decimals))})}return acc},[])}};function stringifyBalance(balance,bnDecimals){var balanceDecimals=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(balance.eq(new(bn_default())(0)))return"0";var decimals=parseInt(bnDecimals.toString(),10);if(0===decimals)return balance.toString();var bal=balance.toString(),len=bal.length,decimalIndex=len-decimals,prefix="";if(decimalIndex<=0){for(;prefix.length<=-1*decimalIndex;)prefix+="0",len+=1;bal=prefix+bal,decimalIndex=1}var whole=bal.substr(0,len-decimals);if(0===balanceDecimals)return whole;var fractional=bal.substr(decimalIndex,balanceDecimals);if(/0+$/u.test(fractional)){var withOnlySigZeroes=bal.substr(decimalIndex).replace(/0+$/u,"");return withOnlySigZeroes.length>0&&(withOnlySigZeroes=".".concat(withOnlySigZeroes)),"".concat(whole).concat(withOnlySigZeroes)}return"".concat(whole,".").concat(fractional)}},"./ui/pages/asset/util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{HC:()=>getShortDateFormatterV2,x8:()=>findAssetByAddress}),__webpack_require__("./node_modules/luxon/src/luxon.js");var getShortDateFormatterV2=function(){return Intl.DateTimeFormat(navigator.language,{year:"numeric",month:"short",day:"numeric"})},findAssetByAddress=function(data,address,chainId){if(!chainId)return console.error("Chain ID is required."),null;var tokens=data[chainId];return tokens?address?tokens.find(function(token){return token.address&&token.address.toLowerCase()===address.toLowerCase()}):tokens.find(function(token){return!token.address}):(console.warn("No tokens found for chainId: ".concat(chainId)),null)}},"./ui/selectors/assets.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x5:()=>getAccountAssets,DQ:()=>getAssetsMetadata,D7:()=>getAssetsRates,Zj:()=>getDefiPositions,iu:()=>getHistoricalMultichainAggregatedBalance,Ok:()=>getMultiChainAssets,q6:()=>getMultichainAggregatedBalance,NM:()=>getMultichainNativeTokenBalance,$T:()=>getTokenBalancesEvm});var token_selectors=__webpack_require__("./node_modules/@metamask/assets-controllers/dist/selectors/token-selectors.mjs"),caip_types=__webpack_require__("./node_modules/@metamask/utils/dist/caip-types.mjs"),bignumber=__webpack_require__("./node_modules/bignumber.js/bignumber.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),network=__webpack_require__("./shared/constants/network.ts"),util=__webpack_require__("./shared/modules/selectors/util.js"),bn=__webpack_require__("./node_modules/bn.js/lib/bn.js"),bn_default=__webpack_require__.n(bn),dist_util=__webpack_require__("./node_modules/@metamask/controller-utils/dist/util.mjs"),useTokenBalances=__webpack_require__("./ui/hooks/useTokenBalances.ts"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts");function calculateTokenBalance(param){var isNative=param.isNative,chainId=param.chainId,address=param.address,decimals=param.decimals,nativeBalances=param.nativeBalances,selectedAccountTokenBalancesAcrossChains=param.selectedAccountTokenBalancesAcrossChains;if(isNative){var nativeTokenBalanceHex=null==nativeBalances?void 0:nativeBalances[chainId];balance=nativeTokenBalanceHex&&"0x0"!==nativeTokenBalanceHex?(0,useTokenBalances.mz)(new(bn_default())((0,conversion_utils.I0)(nativeTokenBalanceHex)),new(bn_default())(decimals),5):"0"}else{var balance,_selectedAccountTokenBalancesAcrossChains_chainId,_selectedAccountTokenBalancesAcrossChains_chainId1,hexBalance=(null==selectedAccountTokenBalancesAcrossChains||null==(_selectedAccountTokenBalancesAcrossChains_chainId=selectedAccountTokenBalancesAcrossChains[chainId])?void 0:_selectedAccountTokenBalancesAcrossChains_chainId[(0,dist_util.sX)(address)])||(null==selectedAccountTokenBalancesAcrossChains||null==(_selectedAccountTokenBalancesAcrossChains_chainId1=selectedAccountTokenBalancesAcrossChains[chainId])?void 0:_selectedAccountTokenBalancesAcrossChains_chainId1[address]);balance=hexBalance&&"0x0"!==hexBalance?(0,useTokenBalances.mz)(new(bn_default())((0,conversion_utils.I0)(hexBalance)),new(bn_default())(decimals)):"0"}return balance}function calculateTokenFiatAmount(param){var _marketData_chainId_address,_marketData_chainId,_marketData_chainId_address1,_marketData_chainId1,_currencyRates_baseCurrency,_currencyRates_symbol,token=param.token,chainId=param.chainId,balance=param.balance,marketData=param.marketData,currencyRates=param.currencyRates,address=token.address,isNative=token.isNative,symbol=token.symbol,baseCurrency=null==(_marketData_chainId=marketData[chainId])||null==(_marketData_chainId_address=_marketData_chainId[address])?void 0:_marketData_chainId_address.currency,tokenMarketPrice=Number(null==(_marketData_chainId1=marketData[chainId])||null==(_marketData_chainId_address1=_marketData_chainId1[address])?void 0:_marketData_chainId_address1.price)||0,tokenExchangeRate=(null==(_currencyRates_baseCurrency=currencyRates[baseCurrency])?void 0:_currencyRates_baseCurrency.conversionRate)||0,parsedBalance=parseFloat(String(balance));return isNative&&currencyRates?((null==(_currencyRates_symbol=currencyRates[symbol])?void 0:_currencyRates_symbol.conversionRate)||0)*parsedBalance:tokenMarketPrice?tokenMarketPrice*tokenExchangeRate*parsedBalance:null}var metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),asset_util=__webpack_require__("./ui/pages/asset/util.ts"),accounts=__webpack_require__("./ui/selectors/accounts.ts"),multichain=__webpack_require__("./ui/selectors/multichain.ts"),selectors=__webpack_require__("./ui/selectors/selectors.js"),networks=__webpack_require__("./ui/selectors/multichain/networks.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function getAccountAssets(state){return state.metamask.accountsAssets}function getAssetsMetadata(state){return state.metamask.assetsMetadata}function getAssetsRates(state){return state.metamask.conversionRates}function getDefiPositions(state){var _state_metamask;return null==state||null==(_state_metamask=state.metamask)?void 0:_state_metamask.allDeFiPositions}var getTokenBalancesEvm=(0,util._)(selectors.xR5,selectors.vF0,metamask.HF,function(_state,accountAddress){return accountAddress},selectors.HWx,selectors.$4m,selectors.lX9,selectors.Xn,selectors.SLx,function(selectedAccountTokensChains,nativeBalances,tokenBalances,selectedAccountAddress,marketData,currencyRates,preferences,isOnCurrentNetwork,currentNetwork){var hideZeroBalanceTokens=preferences.hideZeroBalanceTokens,selectedAccountTokenBalancesAcrossChains=tokenBalances[selectedAccountAddress],isTestNetwork=network.YPx.includes(currentNetwork.chainId),filteredAccountTokensChains=Object.fromEntries(Object.entries(selectedAccountTokensChains).filter(function(param){var chainId=_sliced_to_array(param,1)[0];return isTestNetwork?network.YPx.includes(chainId):!network.YPx.includes(chainId)})),tokensWithBalance=[];return Object.entries(filteredAccountTokensChains).forEach(function(param){var _param=_sliced_to_array(param,2),stringChainKey=_param[0];_param[1].forEach(function(token){var title,balance=calculateTokenBalance({isNative:token.isNative,chainId:stringChainKey,address:token.address,decimals:token.decimals,nativeBalances:nativeBalances,selectedAccountTokenBalancesAcrossChains:selectedAccountTokenBalancesAcrossChains})||"0",tokenFiatAmount=calculateTokenFiatAmount({token:token,chainId:stringChainKey,balance:balance,marketData:marketData,currencyRates:currencyRates});(!hideZeroBalanceTokens||"0"!==balance||token.isNative&&isOnCurrentNetwork)&&(title=token.isNative?"ETH"===token.symbol?"Ethereum":token.symbol:token.name||token.symbol,tokensWithBalance.push(_object_spread_props(_object_spread({},token),{address:token.address,balance:balance,tokenFiatAmount:tokenFiatAmount,chainId:stringChainKey,string:String(balance),primary:"",secondary:0,title:title})))})}),tokensWithBalance}),getMultiChainAssets=(0,util._)(function(_state,selectedAccount){return selectedAccount},multichain.aQ,getAccountAssets,getAssetsMetadata,getAssetsRates,selectors.lX9,function(selectedAccountAddress,multichainBalances,accountAssets,assetsMetadata,assetRates,preferences){var hideZeroBalanceTokens=preferences.hideZeroBalanceTokens,assetIds=(null==accountAssets?void 0:accountAssets[selectedAccountAddress.id])||[],balances=null==multichainBalances?void 0:multichainBalances[selectedAccountAddress.id],allAssets=[];return assetIds.forEach(function(assetId){var _assetRates_assetId,_metadata_units_,_parseCaipAssetType=(0,caip_types.Ts)(assetId),chainId=_parseCaipAssetType.chainId,isNative="slip44"===_parseCaipAssetType.assetNamespace,balance=(null==balances?void 0:balances[assetId])||{amount:"0",unit:""},rate=null==assetRates||null==(_assetRates_assetId=assetRates[assetId])?void 0:_assetRates_assetId.rate,balanceInFiat=rate?new bignumber.BigNumber(balance.amount).times(rate).toNumber():null,assetMetadataFallback={name:balance.unit,symbol:balance.unit||"",fungible:!0,units:[{name:assetId,symbol:balance.unit||"",decimals:0}]},metadata=assetsMetadata[assetId]||assetMetadataFallback,decimals=(null==(_metadata_units_=metadata.units[0])?void 0:_metadata_units_.decimals)||0;(!hideZeroBalanceTokens||"0"!==balance.amount||isNative)&&allAssets.push({title:metadata.name,address:assetId,symbol:metadata.symbol,image:metadata.iconUrl,decimals:decimals,chainId:chainId,isNative:isNative,primary:balance.amount,secondary:balanceInFiat,string:"",tokenFiatAmount:balanceInFiat,isStakeable:!1})}),allAssets});(0,util._)(function(state){return state},function(_state,account){return account},function(_state,_account,tokenAddress){return tokenAddress},function(_state,_account,_tokenAddress,_chainId){return _chainId},function(state,account,tokenAddress,chainId){var accountToUse=null!=account?account:(0,accounts._r)(state),assetsToSearch=(0,multichain.Bu)(state,accountToUse)?(0,selectors.c3v)(state):(0,lodash.groupBy)(getMultiChainAssets(state,accountToUse),"chainId");return(0,asset_util.x8)(assetsToSearch,tokenAddress,chainId)});var zeroBalanceAssetFallback={amount:0,unit:""},getMultichainAggregatedBalance=(0,util._)(function(_state,selectedAccount){return selectedAccount},multichain.aQ,getAccountAssets,getAssetsRates,function(selectedAccountAddress,multichainBalances,accountAssets,assetRates){var id=(null!=selectedAccountAddress?selectedAccountAddress:{}).id,assetIds=id&&(null==accountAssets?void 0:accountAssets[id])||[],balances=id?null==multichainBalances?void 0:multichainBalances[id]:{},aggregatedBalance=new bignumber.BigNumber(0);return assetIds.forEach(function(assetId){var _assetRates_assetId,balance=(null==balances?void 0:balances[assetId])||zeroBalanceAssetFallback,rate=(null==assetRates||null==(_assetRates_assetId=assetRates[assetId])?void 0:_assetRates_assetId.rate)||"0",balanceInFiat=new bignumber.BigNumber(balance.amount).times(rate);aggregatedBalance=aggregatedBalance.plus(balanceInFiat)}),aggregatedBalance.toNumber()}),getHistoricalMultichainAggregatedBalance=(0,util._)(function(_state,selectedAccount){return selectedAccount},multichain.aQ,getAccountAssets,getAssetsRates,function(selectedAccountAddress,multichainBalances,accountAssets,assetRates){var assetIds=(null==accountAssets?void 0:accountAssets[selectedAccountAddress.id])||[],balances=null==multichainBalances?void 0:multichainBalances[selectedAccountAddress.id],historicalBalances={PT1H:{balance:0,percentChange:0,amountChange:0},P1D:{balance:0,percentChange:0,amountChange:0},P7D:{balance:0,percentChange:0,amountChange:0},P14D:{balance:0,percentChange:0,amountChange:0},P30D:{balance:0,percentChange:0,amountChange:0},P200D:{balance:0,percentChange:0,amountChange:0},P1Y:{balance:0,percentChange:0,amountChange:0}},totalCurrentBalance=new bignumber.BigNumber(0);assetIds.forEach(function(assetId){var _assetRate_marketData,balance=(null==balances?void 0:balances[assetId])||zeroBalanceAssetFallback,assetRate=null==assetRates?void 0:assetRates[assetId];if((null==assetRate||null==(_assetRate_marketData=assetRate.marketData)?void 0:_assetRate_marketData.pricePercentChange)&&assetRate.rate){var pricePercentChange=assetRate.marketData.pricePercentChange,currentBalanceInFiat=new bignumber.BigNumber(balance.amount).times(assetRate.rate||"0");totalCurrentBalance=totalCurrentBalance.plus(currentBalanceInFiat),Object.entries(pricePercentChange).forEach(function(param){var _param=_sliced_to_array(param,2),period=_param[0],percentChange=_param[1];if(period in historicalBalances){var historicalBalance=currentBalanceInFiat.div(Number((1+percentChange/100).toFixed(8))).toNumber();historicalBalances[period].balance+=historicalBalance}})}});var totalCurrentBalanceNum=totalCurrentBalance.toNumber();return Object.entries(historicalBalances).forEach(function(param){var _param=_sliced_to_array(param,2),data=(_param[0],_param[1]);if(0!==totalCurrentBalanceNum){var amountChange=totalCurrentBalanceNum-data.balance,percentChange=amountChange/data.balance*100;data.amountChange=Number(amountChange.toFixed(8)),data.percentChange=Number(percentChange.toFixed(8))}}),historicalBalances}),getMultichainNativeAssetType=(0,util._)(accounts._r,getAccountAssets,networks.O4,function(selectedAccount,accountAssets,currentNetwork){return((null==accountAssets?void 0:accountAssets[selectedAccount.id])||[]).find(function(assetType){var _parseCaipAssetType=(0,caip_types.Ts)(assetType),chainId=_parseCaipAssetType.chainId,assetNamespace=_parseCaipAssetType.assetNamespace;return chainId===currentNetwork.chainId&&"slip44"===assetNamespace})}),getMultichainNativeTokenBalance=(0,util._)(function(_state,selectedAccount){return selectedAccount},multichain.aQ,getMultichainNativeAssetType,function(selectedAccountAddress,multichainBalances,nativeAssetType){var balances=null==multichainBalances?void 0:multichainBalances[selectedAccountAddress.id];return nativeAssetType&&(null==balances?void 0:balances[nativeAssetType])?balances[nativeAssetType]:zeroBalanceAssetFallback});(0,util._)(function(param){var metamask=param.metamask,initialState={accountTree:metamask.accountTree,internalAccounts:metamask.internalAccounts,allTokens:metamask.allTokens,allIgnoredTokens:metamask.allIgnoredTokens,tokenBalances:metamask.tokenBalances,marketData:metamask.marketData,currencyRates:metamask.currencyRates,currentCurrency:metamask.currentCurrency,networkConfigurationsByChainId:metamask.networkConfigurationsByChainId,accountsByChainId:metamask.accountsByChainId};return _object_spread({},initialState,{accountsAssets:metamask.accountsAssets,assetsMetadata:metamask.assetsMetadata,balances:metamask.balances,conversionRates:metamask.conversionRates})},function(assetListState){return(0,token_selectors.w)(assetListState)})}}]);