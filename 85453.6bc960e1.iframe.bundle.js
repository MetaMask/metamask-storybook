"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[85453],{"./ui/helpers/constants/gas.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{BW:()=>GAS_FORM_ERRORS,x6:()=>PRIORITY_LEVEL_ICON_MAP,xf:()=>getGasFormErrorText});var GAS_FORM_ERRORS={GAS_LIMIT_OUT_OF_BOUNDS:"editGasLimitOutOfBounds",MAX_PRIORITY_FEE_TOO_LOW:"editGasMaxPriorityFeeLow",MAX_FEE_TOO_LOW:"editGasMaxFeeLow",MAX_PRIORITY_FEE_BELOW_MINIMUM:"editGasMaxPriorityFeeBelowMinimum",MAX_PRIORITY_FEE_HIGH_WARNING:"editGasMaxPriorityFeeHigh",MAX_FEE_HIGH_WARNING:"editGasMaxFeeHigh",MAX_FEE_IMBALANCE:"editGasMaxFeeImbalance",GAS_PRICE_TOO_LOW:"editGasPriceTooLow"};function getGasFormErrorText(type,t){var minimumGasLimit=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).minimumGasLimit;switch(type){case GAS_FORM_ERRORS.GAS_LIMIT_OUT_OF_BOUNDS:return t("editGasLimitOutOfBounds",[minimumGasLimit]);case GAS_FORM_ERRORS.MAX_PRIORITY_FEE_TOO_LOW:return t("editGasMaxPriorityFeeLow");case GAS_FORM_ERRORS.MAX_FEE_TOO_LOW:return t("editGasMaxFeeLow");case GAS_FORM_ERRORS.MAX_PRIORITY_FEE_BELOW_MINIMUM:return t("editGasMaxPriorityFeeBelowMinimum");case GAS_FORM_ERRORS.MAX_PRIORITY_FEE_HIGH_WARNING:return t("editGasMaxPriorityFeeHigh");case GAS_FORM_ERRORS.MAX_FEE_HIGH_WARNING:return t("editGasMaxFeeHigh");case GAS_FORM_ERRORS.MAX_FEE_IMBALANCE:return t("editGasMaxFeePriorityImbalance");case GAS_FORM_ERRORS.GAS_PRICE_TOO_LOW:return t("editGasPriceTooLow");default:return""}}var PRIORITY_LEVEL_ICON_MAP={low:"ðŸ¢",medium:"ðŸ¦Š",high:"ðŸ¦",dappSuggested:"ðŸŒ",dappSuggestedHigh:"ðŸŒ",swapSuggested:"ðŸ”„",tenPercentIncreased:"â¬†",custom:"âš™ï¸"}},"./ui/helpers/utils/gas.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V4:()=>formatGasFeeOrFeeRange,Y8:()=>editGasModeIsSpeedUpOrCancel,fi:()=>addTenPercentAndRound,s_:()=>isMetamaskSuggestedGasEstimate,xR:()=>gasEstimateGreaterThanGasUsedPlusTenPercent});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/lodash.js"),bignumber_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/bignumber.js/bignumber.js"),bignumber_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(bignumber_js__WEBPACK_IMPORTED_MODULE_1__),_shared_constants_gas__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./shared/constants/gas.ts"),_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/modules/conversion.utils.ts"),_shared_modules_Numeric__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./shared/modules/Numeric.ts"),_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/helpers/utils/util.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var TEN_PERCENT_NUMERIC=new _shared_modules_Numeric__WEBPACK_IMPORTED_MODULE_4__.e(1.1,10),gasEstimateGreaterThanGasUsedPlusTenPercent=function(gasUsed,gasFeeEstimates,estimate){var _gasFeeEstimates_estimate,maxFeePerGasInTransaction=gasUsed.maxFeePerGas;maxFeePerGasInTransaction=new(bignumber_js__WEBPACK_IMPORTED_MODULE_1___default())((0,_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_3__.kZ)(addTenPercentAndRound(maxFeePerGasInTransaction)));var maxFeePerGasFromEstimate=null==gasFeeEstimates||null==(_gasFeeEstimates_estimate=gasFeeEstimates[estimate])?void 0:_gasFeeEstimates_estimate.suggestedMaxFeePerGas;return(0,_util__WEBPACK_IMPORTED_MODULE_5__.Yg)(maxFeePerGasFromEstimate,maxFeePerGasInTransaction)};function addTenPercentAndRound(hexStringValue){if(void 0!==hexStringValue)return new _shared_modules_Numeric__WEBPACK_IMPORTED_MODULE_4__.e(hexStringValue,16).times(TEN_PERCENT_NUMERIC).round(0).toPrefixedHexString()}function isMetamaskSuggestedGasEstimate(estimate){return[_shared_constants_gas__WEBPACK_IMPORTED_MODULE_2__.et.high,_shared_constants_gas__WEBPACK_IMPORTED_MODULE_2__.et.medium,_shared_constants_gas__WEBPACK_IMPORTED_MODULE_2__.et.low].includes(estimate)}function formatGasFeeOrFeeRange(feeOrFeeRange){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},tmp=_ref.precision,precisionOrPrecisions=void 0===tmp?2:tmp;if((0,_util__WEBPACK_IMPORTED_MODULE_5__.uy)(feeOrFeeRange)||Array.isArray(feeOrFeeRange)&&0===feeOrFeeRange.length)return null;var range=Array.isArray(feeOrFeeRange)?feeOrFeeRange.slice(0,2):[feeOrFeeRange],precisions=Array.isArray(precisionOrPrecisions)?precisionOrPrecisions.slice(0,2):(0,lodash__WEBPACK_IMPORTED_MODULE_0__.times)(range.length,(0,lodash__WEBPACK_IMPORTED_MODULE_0__.constant)(precisionOrPrecisions)),formattedRange=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.uniq)((0,lodash__WEBPACK_IMPORTED_MODULE_0__.zip)(range,precisions).map(function(param){var _param=_sliced_to_array(param,2),fee=_param[0],precision=_param[1];return void 0===precision?fee:(0,_util__WEBPACK_IMPORTED_MODULE_5__.eP)(fee,precision)})).join(" - ");return"".concat(formattedRange," GWEI")}function editGasModeIsSpeedUpOrCancel(editGasMode){return editGasMode===_shared_constants_gas__WEBPACK_IMPORTED_MODULE_2__.W5.cancel||editGasMode===_shared_constants_gas__WEBPACK_IMPORTED_MODULE_2__.W5.speedUp}},"./ui/hooks/useGasFeeEstimates.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>useGasFeeEstimates});var isEqual=__webpack_require__("./node_modules/lodash/isEqual.js"),isEqual_default=__webpack_require__.n(isEqual),es=__webpack_require__("./node_modules/react-redux/es/index.js"),react=__webpack_require__("./node_modules/react/index.js"),metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),actions=__webpack_require__("./ui/store/actions.ts"),networks=__webpack_require__("./shared/modules/selectors/networks.ts");let hooks_usePolling=function(usePollingOptions){var pollTokenRef=(0,react.useRef)(null),cleanupRef=(0,react.useRef)(null),isMounted=!1;(0,react.useEffect)(function(){if(!1===usePollingOptions.enabled)return function(){};isMounted=!0;var cleanup=function(){if(pollTokenRef.current){var _cleanupRef_current;usePollingOptions.stopPollingByPollingToken(pollTokenRef.current),null==(_cleanupRef_current=cleanupRef.current)||_cleanupRef_current.call(cleanupRef,pollTokenRef.current)}};return usePollingOptions.startPolling(usePollingOptions.input).then(function(pollToken){var _usePollingOptions_callback;pollTokenRef.current=pollToken,cleanupRef.current=(null==(_usePollingOptions_callback=usePollingOptions.callback)?void 0:_usePollingOptions_callback.call(usePollingOptions,pollToken))||null,isMounted||cleanup()}),function(){isMounted=!1,cleanup()}},[usePollingOptions.input&&JSON.stringify(usePollingOptions.input),usePollingOptions.enabled])};function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function useGasFeeEstimates(_networkClientId){var selectedNetworkClientId=(0,es.d4)(networks.EQ),networkClientId=null!=_networkClientId?_networkClientId:selectedNetworkClientId,_useState=_sliced_to_array((0,react.useState)(""),2),chainId=_useState[0],setChainId=_useState[1],gasEstimateType=(0,es.d4)(function(state){return(0,metamask.HV)(state,chainId)}),gasFeeEstimates=(0,es.d4)(function(state){return(0,metamask.ge)(state,chainId)},isEqual_default()),isGasEstimatesLoading=(0,es.d4)(function(state){return(0,metamask.Uh)(state,{chainId:chainId,networkClientId:networkClientId})}),isNetworkBusy=(0,es.d4)(function(state){return(0,metamask.hc)(state,chainId)});return(0,react.useEffect)(function(){var isMounted=!0;return(0,actions.getNetworkConfigurationByNetworkClientId)(networkClientId).then(function(networkConfig){networkConfig&&isMounted&&setChainId(networkConfig.chainId)}),function(){isMounted=!1}},[networkClientId]),hooks_usePolling({startPolling:function(input){return(0,actions.gasFeeStartPollingByNetworkClientId)(input.networkClientId)},stopPollingByPollingToken:actions.gasFeeStopPollingByPollingToken,input:{networkClientId:networkClientId}}),{gasFeeEstimates:gasFeeEstimates,gasEstimateType:gasEstimateType,isGasEstimatesLoading:isGasEstimatesLoading,isNetworkBusy:isNetworkBusy}}},"./ui/hooks/useUserPreferencedCurrency.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>useUserPreferencedCurrency});var es=__webpack_require__("./node_modules/react-redux/es/index.js"),selectors=__webpack_require__("./ui/selectors/index.js"),multichain=__webpack_require__("./ui/selectors/multichain.ts"),common=__webpack_require__("./ui/helpers/constants/common.ts"),constants_common=__webpack_require__("./shared/constants/common.ts"),network=__webpack_require__("./shared/constants/network.ts"),useMultichainSelector=__webpack_require__("./ui/hooks/useMultichainSelector.ts");function useUserPreferencedCurrency(type){var _opts_account,opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},chainId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,selectedAccount=(0,es.d4)(selectors._rF),account=null!=(_opts_account=opts.account)?_opts_account:selectedAccount,nativeCurrency=(0,useMultichainSelector.t)(multichain.zz,account),showNativeTokenAsMainBalance=(0,es.d4)(selectors.lX9,es.bN).showNativeTokenAsMainBalance,showFiat=(0,useMultichainSelector.t)(multichain.J7,account),fiatReturn={currency:(0,useMultichainSelector.t)(multichain.H5,account),numberOfDecimals:opts.numberOfDecimals||2},nativeReturn={currency:chainId?network.Ow6[chainId]||nativeCurrency||constants_common.sk.ETH:nativeCurrency||constants_common.sk.ETH,numberOfDecimals:opts.numberOfDecimals||opts.ethNumberOfDecimals||8};return opts.showNativeOverride?nativeReturn:opts.showFiatOverride?fiatReturn:showFiat?opts.shouldCheckShowNativeToken&&showNativeTokenAsMainBalance||!opts.shouldCheckShowNativeToken?type===common.jd?nativeReturn:fiatReturn:type===common.jd?fiatReturn:nativeReturn:nativeReturn}},"./ui/pages/confirmations/hooks/useGasFeeInputs.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>useGasFeeInputs});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),gas=__webpack_require__("./shared/constants/gas.ts"),constants_gas=__webpack_require__("./ui/helpers/constants/gas.js"),selectors=__webpack_require__("./ui/selectors/index.js"),transactions_util=__webpack_require__("./ui/helpers/utils/transactions.util.js"),useGasFeeEstimates=__webpack_require__("./ui/hooks/useGasFeeEstimates.js"),utils_gas=__webpack_require__("./ui/helpers/utils/gas.js"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts"),Numeric=__webpack_require__("./shared/modules/Numeric.ts"),common=__webpack_require__("./shared/constants/common.ts"),types=__webpack_require__("./node_modules/@metamask/transaction-controller/dist/types.mjs"),util=__webpack_require__("./ui/helpers/utils/util.js"),transactions=__webpack_require__("./ui/helpers/constants/transactions.js");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}var validateGasLimit=function(gasLimit,minimumGasLimit){if(new Numeric.e(gasLimit,10).lessThan(new Numeric.e(minimumGasLimit||gas.Jz.SIMPLE,16)))return constants_gas.BW.GAS_LIMIT_OUT_OF_BOUNDS},validateMaxPriorityFee=function(maxPriorityFeePerGas,supportsEIP1559){if(supportsEIP1559&&(0,util.tx)(maxPriorityFeePerGas,0))return constants_gas.BW.MAX_PRIORITY_FEE_BELOW_MINIMUM},validateMaxFee=function(maxFeePerGas,maxPriorityFeeError,maxPriorityFeePerGas,supportsEIP1559){if(!maxPriorityFeeError&&supportsEIP1559&&(0,util.Yg)(maxPriorityFeePerGas,maxFeePerGas))return constants_gas.BW.MAX_FEE_IMBALANCE},validateGasPrice=function(isFeeMarketGasEstimate,gasPrice,supportsEIP1559,transaction){var _transaction_txParams;if((!supportsEIP1559||!isFeeMarketGasEstimate)&&(!supportsEIP1559||(null==transaction||null==(_transaction_txParams=transaction.txParams)?void 0:_transaction_txParams.gasPrice))&&(0,util.tx)(gasPrice||0,0))return constants_gas.BW.GAS_PRICE_TOO_LOW},getMaxPriorityFeeWarning=function(gasFeeEstimates,isFeeMarketGasEstimate,isGasEstimatesLoading,maxPriorityFeePerGas,supportsEIP1559){var _gasFeeEstimates_low;if(supportsEIP1559&&isFeeMarketGasEstimate&&!isGasEstimatesLoading){if((0,util.tx)(maxPriorityFeePerGas,null==gasFeeEstimates||null==(_gasFeeEstimates_low=gasFeeEstimates.low)?void 0:_gasFeeEstimates_low.suggestedMaxPriorityFeePerGas))return constants_gas.BW.MAX_PRIORITY_FEE_TOO_LOW;if((null==gasFeeEstimates?void 0:gasFeeEstimates.high)&&(0,util.Yg)(maxPriorityFeePerGas,1.5*gasFeeEstimates.high.suggestedMaxPriorityFeePerGas))return constants_gas.BW.MAX_PRIORITY_FEE_HIGH_WARNING}},getMaxFeeWarning=function(gasFeeEstimates,isGasEstimatesLoading,isFeeMarketGasEstimate,maxFeeError,maxPriorityFeeError,maxFeePerGas,supportsEIP1559){var _gasFeeEstimates_low;if(!maxPriorityFeeError&&!maxFeeError&&isFeeMarketGasEstimate&&supportsEIP1559&&!isGasEstimatesLoading){if((0,util.tx)(maxFeePerGas,null==gasFeeEstimates||null==(_gasFeeEstimates_low=gasFeeEstimates.low)?void 0:_gasFeeEstimates_low.suggestedMaxFeePerGas))return constants_gas.BW.MAX_FEE_TOO_LOW;if((null==gasFeeEstimates?void 0:gasFeeEstimates.high)&&(0,util.Yg)(maxFeePerGas,1.5*gasFeeEstimates.high.suggestedMaxFeePerGas))return constants_gas.BW.MAX_FEE_HIGH_WARNING}},hasBalanceError=function(minimumCostInHexWei,transaction,ethBalance){if(void 0===minimumCostInHexWei||void 0===ethBalance)return!1;var _transaction_txParams,minimumTxCostInHexWei=new Numeric.e(minimumCostInHexWei,16).add(new Numeric.e((null==transaction||null==(_transaction_txParams=transaction.txParams)?void 0:_transaction_txParams.value)||"0x0",16)),ethBalanceInHexWei=new Numeric.e(ethBalance,16);return minimumTxCostInHexWei.greaterThan(ethBalanceInHexWei)};function useGasFeeErrors(param){var gasEstimateType=param.gasEstimateType,gasFeeEstimates=param.gasFeeEstimates,isGasEstimatesLoading=param.isGasEstimatesLoading,gasLimit=param.gasLimit,gasPrice=param.gasPrice,maxPriorityFeePerGas=param.maxPriorityFeePerGas,maxFeePerGas=param.maxFeePerGas,minimumCostInHexWei=param.minimumCostInHexWei,minimumGasLimit=param.minimumGasLimit,transaction=param.transaction,supportsEIP1559=(0,es.d4)(selectors.PQP)&&!(0,transactions_util.yj)(null==transaction?void 0:transaction.txParams),isFeeMarketGasEstimate=gasEstimateType===gas.bT.feeMarket,gasLimitError=validateGasLimit(gasLimit,minimumGasLimit),maxPriorityFeeError=validateMaxPriorityFee(maxPriorityFeePerGas,supportsEIP1559),maxFeeError=validateMaxFee(maxFeePerGas,maxPriorityFeeError,maxPriorityFeePerGas,supportsEIP1559),gasPriceError=validateGasPrice(isFeeMarketGasEstimate,gasPrice,supportsEIP1559,transaction),maxPriorityFeeWarning=getMaxPriorityFeeWarning(gasFeeEstimates,isFeeMarketGasEstimate,isGasEstimatesLoading,maxPriorityFeePerGas,supportsEIP1559),maxFeeWarning=getMaxFeeWarning(gasFeeEstimates,isGasEstimatesLoading,isFeeMarketGasEstimate,maxFeeError,maxPriorityFeeError,maxFeePerGas,supportsEIP1559),gasErrors=(0,react.useMemo)(function(){var errors={};return gasLimitError&&(errors.gasLimit=gasLimitError),maxPriorityFeeError&&(errors.maxPriorityFee=maxPriorityFeeError),maxFeeError&&(errors.maxFee=maxFeeError),gasPriceError&&(errors.gasPrice=gasPriceError),errors},[gasLimitError,maxPriorityFeeError,maxFeeError,gasPriceError]),gasWarnings=(0,react.useMemo)(function(){var warnings={};return maxPriorityFeeWarning&&(warnings.maxPriorityFee=maxPriorityFeeWarning),maxFeeWarning&&(warnings.maxFee=maxFeeWarning),warnings},[maxPriorityFeeWarning,maxFeeWarning]),hasGasErrors=!!Object.keys(gasErrors).length,errorsAndWarnings=(0,react.useMemo)(function(){return _object_spread({},gasWarnings,gasErrors)},[gasErrors,gasWarnings]),account=(0,es.d4)(function(state){var _transaction_txParams;return(0,selectors.BwG)(state,null==transaction||null==(_transaction_txParams=transaction.txParams)?void 0:_transaction_txParams.from)},es.bN);return{gasErrors:errorsAndWarnings,hasGasErrors:hasGasErrors,balanceError:void 0!==account&&(null==transaction?void 0:transaction.type)!==types.D_.incoming&&(null==transaction?void 0:transaction.status)in transactions.Il&&hasBalanceError(minimumCostInHexWei,transaction,account.balance),hasSimulationError:!!(null==transaction?void 0:transaction.simulationFails)}}var lodash=__webpack_require__("./node_modules/lodash/lodash.js");function getGasFeeEstimate(field,gasFeeEstimates,gasEstimateType,estimateToUse){var _gasFeeEstimates_estimateToUse,_gasFeeEstimates_estimateToUse_field,fallback=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"0";return gasEstimateType===gas.bT.feeMarket&&null!=(_gasFeeEstimates_estimateToUse_field=null==gasFeeEstimates||null==(_gasFeeEstimates_estimateToUse=gasFeeEstimates[estimateToUse])?void 0:_gasFeeEstimates_estimateToUse[field])?_gasFeeEstimates_estimateToUse_field:String(fallback)}var feeParamsAreCustom=function(transaction){return!(null==transaction?void 0:transaction.userFeeLevel)||(null==transaction?void 0:transaction.userFeeLevel)===gas.Nt};function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function getGasPriceEstimate(gasFeeEstimates,gasEstimateType,estimateToUse){var _gasFeeEstimates_estimateToUse,_gasFeeEstimates_gasPrice;return gasEstimateType===gas.bT.legacy?null!=(_gasFeeEstimates_estimateToUse=null==gasFeeEstimates?void 0:gasFeeEstimates[estimateToUse])?_gasFeeEstimates_estimateToUse:"0":gasEstimateType===gas.bT.ethGasPrice&&null!=(_gasFeeEstimates_gasPrice=null==gasFeeEstimates?void 0:gasFeeEstimates.gasPrice)?_gasFeeEstimates_gasPrice:"0"}function useGasPriceInput(param){var estimateToUse=param.estimateToUse,gasEstimateType=param.gasEstimateType,gasFeeEstimates=param.gasFeeEstimates,transaction=param.transaction,_useState=_sliced_to_array((0,react.useState)((null==transaction?void 0:transaction.userFeeLevel)===gas.Nt),2),gasPriceHasBeenManuallySet=_useState[0],setGasPriceHasBeenManuallySet=_useState[1],_useState1=_sliced_to_array((0,react.useState)(function(){var txGasPrice=((null==transaction?void 0:transaction.txParams)||{}).gasPrice;return txGasPrice&&feeParamsAreCustom(transaction)?Number((0,conversion_utils.kZ)(txGasPrice)):null}),2),gasPrice=_useState1[0],setGasPrice=_useState1[1],initialGasPriceEstimates=_sliced_to_array((0,react.useState)(gasFeeEstimates),1)[0],gasPriceEstimatesHaveNotChanged=(0,lodash.isEqual)(initialGasPriceEstimates,gasFeeEstimates);return{gasPrice:null!==gasPrice&&(gasPriceHasBeenManuallySet||gasPriceEstimatesHaveNotChanged||(0,transactions_util.yj)(null==transaction?void 0:transaction.txParams))?gasPrice:getGasPriceEstimate(gasFeeEstimates,gasEstimateType,estimateToUse),setGasPrice:setGasPrice,setGasPriceHasBeenManuallySet:setGasPriceHasBeenManuallySet}}function useMaxFeePerGasInput_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useMaxFeePerGasInput_array_with_holes(arr){if(Array.isArray(arr))return arr}function useMaxFeePerGasInput_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function useMaxFeePerGasInput_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function useMaxFeePerGasInput_sliced_to_array(arr,i){return useMaxFeePerGasInput_array_with_holes(arr)||useMaxFeePerGasInput_iterable_to_array_limit(arr,i)||useMaxFeePerGasInput_unsupported_iterable_to_array(arr,i)||useMaxFeePerGasInput_non_iterable_rest()}function useMaxFeePerGasInput_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return useMaxFeePerGasInput_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useMaxFeePerGasInput_array_like_to_array(o,minLen)}}var getMaxFeePerGasFromTransaction=function(transaction,gasFeeEstimates){if(null==gasFeeEstimates?void 0:gasFeeEstimates[null==transaction?void 0:transaction.userFeeLevel])return gasFeeEstimates[transaction.userFeeLevel].suggestedMaxFeePerGas;var _ref=(null==transaction?void 0:transaction.txParams)||{},maxFeePerGas=_ref.maxFeePerGas,gasPrice=_ref.gasPrice;return Number((0,conversion_utils.kZ)(maxFeePerGas||gasPrice))};function useMaxFeePerGasInput(param){var estimateToUse=param.estimateToUse,gasEstimateType=param.gasEstimateType,gasFeeEstimates=param.gasFeeEstimates,transaction=param.transaction,supportsEIP1559=(0,es.d4)(selectors.PQP)&&!(0,transactions_util.yj)(null==transaction?void 0:transaction.txParams),initialMaxFeePerGas=supportsEIP1559?getMaxFeePerGasFromTransaction(transaction,gasFeeEstimates):0,_useState=useMaxFeePerGasInput_sliced_to_array((0,react.useState)(function(){return initialMaxFeePerGas&&feeParamsAreCustom(transaction)?initialMaxFeePerGas:null}),2),maxFeePerGas=_useState[0],setMaxFeePerGas=_useState[1];return(0,react.useEffect)(function(){supportsEIP1559&&initialMaxFeePerGas&&setMaxFeePerGas(initialMaxFeePerGas)},[initialMaxFeePerGas,setMaxFeePerGas,supportsEIP1559]),{maxFeePerGas:null!=maxFeePerGas?maxFeePerGas:getGasFeeEstimate("suggestedMaxFeePerGas",gasFeeEstimates,gasEstimateType,estimateToUse,initialMaxFeePerGas||0),setMaxFeePerGas:setMaxFeePerGas}}function useMaxPriorityFeePerGasInput_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useMaxPriorityFeePerGasInput_array_with_holes(arr){if(Array.isArray(arr))return arr}function useMaxPriorityFeePerGasInput_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function useMaxPriorityFeePerGasInput_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function useMaxPriorityFeePerGasInput_sliced_to_array(arr,i){return useMaxPriorityFeePerGasInput_array_with_holes(arr)||useMaxPriorityFeePerGasInput_iterable_to_array_limit(arr,i)||useMaxPriorityFeePerGasInput_unsupported_iterable_to_array(arr,i)||useMaxPriorityFeePerGasInput_non_iterable_rest()}function useMaxPriorityFeePerGasInput_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return useMaxPriorityFeePerGasInput_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useMaxPriorityFeePerGasInput_array_like_to_array(o,minLen)}}var isNullOrUndefined=function(value){return null==value},getMaxPriorityFeePerGasFromTransaction=function(transaction,gasFeeEstimates){if(null==gasFeeEstimates?void 0:gasFeeEstimates[null==transaction?void 0:transaction.userFeeLevel])return gasFeeEstimates[transaction.userFeeLevel].suggestedMaxPriorityFeePerGas;var _ref=(null==transaction?void 0:transaction.txParams)||{},maxPriorityFeePerGas=_ref.maxPriorityFeePerGas,maxFeePerGas=_ref.maxFeePerGas,gasPrice=_ref.gasPrice,feeInHexWei=maxPriorityFeePerGas||maxFeePerGas||gasPrice;return feeInHexWei?Number((0,conversion_utils.kZ)(feeInHexWei)):null};function useMaxPriorityFeePerGasInput(param){var estimateToUse=param.estimateToUse,gasEstimateType=param.gasEstimateType,gasFeeEstimates=param.gasFeeEstimates,transaction=param.transaction,supportsEIP1559=(0,es.d4)(selectors.PQP)&&!(0,transactions_util.yj)(null==transaction?void 0:transaction.txParams),initialMaxPriorityFeePerGas=supportsEIP1559?getMaxPriorityFeePerGasFromTransaction(transaction,gasFeeEstimates):null,_useState=useMaxPriorityFeePerGasInput_sliced_to_array((0,react.useState)(function(){return!isNullOrUndefined(initialMaxPriorityFeePerGas)&&feeParamsAreCustom(transaction)?initialMaxPriorityFeePerGas:null}),2),maxPriorityFeePerGas=_useState[0],setMaxPriorityFeePerGas=_useState[1];return(0,react.useEffect)(function(){supportsEIP1559&&!isNullOrUndefined(initialMaxPriorityFeePerGas)&&setMaxPriorityFeePerGas(initialMaxPriorityFeePerGas)},[initialMaxPriorityFeePerGas,setMaxPriorityFeePerGas,supportsEIP1559]),{maxPriorityFeePerGas:null!=maxPriorityFeePerGas?maxPriorityFeePerGas:getGasFeeEstimate("suggestedMaxPriorityFeePerGas",gasFeeEstimates,gasEstimateType,estimateToUse,initialMaxPriorityFeePerGas||0),setMaxPriorityFeePerGas:setMaxPriorityFeePerGas}}var gas_utils=__webpack_require__("./shared/modules/gas.utils.js"),constants_common=__webpack_require__("./ui/helpers/constants/common.ts"),useCurrencyDisplay=__webpack_require__("./ui/hooks/useCurrencyDisplay.js"),useUserPreferencedCurrency=__webpack_require__("./ui/hooks/useUserPreferencedCurrency.js");function useGasEstimates_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useGasEstimates_array_with_holes(arr){if(Array.isArray(arr))return arr}function useGasEstimates_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function useGasEstimates_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function useGasEstimates_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function useGasEstimates_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){useGasEstimates_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function useGasEstimates_sliced_to_array(arr,i){return useGasEstimates_array_with_holes(arr)||useGasEstimates_iterable_to_array_limit(arr,i)||useGasEstimates_unsupported_iterable_to_array(arr,i)||useGasEstimates_non_iterable_rest()}function useGasEstimates_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return useGasEstimates_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useGasEstimates_array_like_to_array(o,minLen)}}function useGasEstimates(param){var _gasFeeEstimates_estimatedBaseFee,editGasMode=param.editGasMode,gasEstimateType=param.gasEstimateType,gasFeeEstimates=param.gasFeeEstimates,gasLimit=param.gasLimit,gasPrice=param.gasPrice,maxFeePerGas=param.maxFeePerGas,maxPriorityFeePerGas=param.maxPriorityFeePerGas,minimumGasLimit=param.minimumGasLimit,transaction=param.transaction,supportsEIP1559=(0,es.d4)(function(state){return(0,selectors.PQP)(state,null==transaction?void 0:transaction.networkClientId)})&&!(0,transactions_util.yj)(null==transaction?void 0:transaction.txParams),_useUserPreferencedCurrency=(0,useUserPreferencedCurrency.r)(constants_common.jd),primaryCurrency=_useUserPreferencedCurrency.currency,primaryNumberOfDecimals=_useUserPreferencedCurrency.numberOfDecimals,gasSettings={gasLimit:(0,conversion_utils.Ao)(gasLimit),gasLimitNoBuffer:null==transaction?void 0:transaction.gasLimitNoBuffer};gasSettings=supportsEIP1559?_object_spread_props(useGasEstimates_object_spread({},gasSettings),{maxFeePerGas:(0,conversion_utils.Sb)(maxFeePerGas||gasPrice||"0"),maxPriorityFeePerGas:(0,conversion_utils.Sb)(maxPriorityFeePerGas||maxFeePerGas||gasPrice||"0"),baseFeePerGas:(0,conversion_utils.Sb)(null!=(_gasFeeEstimates_estimatedBaseFee=null==gasFeeEstimates?void 0:gasFeeEstimates.estimatedBaseFee)?_gasFeeEstimates_estimatedBaseFee:"0")}):_object_spread_props(useGasEstimates_object_spread({},gasSettings),{gasPrice:gasEstimateType===gas.bT.none?"0x0":(0,conversion_utils.Sb)(gasPrice)});var maximumCostInHexWei=(0,gas_utils.j)(gasSettings);editGasMode===gas.W5.swaps&&(gasSettings=_object_spread_props(useGasEstimates_object_spread({},gasSettings),{gasLimit:minimumGasLimit}));var minimumCostInHexWei=(0,gas_utils.h)(gasSettings);return{estimatedMinimumNative:useGasEstimates_sliced_to_array((0,useCurrencyDisplay.pf)(minimumCostInHexWei,{numberOfDecimals:primaryNumberOfDecimals,currency:primaryCurrency}),1)[0],maximumCostInHexWei:maximumCostInHexWei,minimumCostInHexWei:minimumCostInHexWei}}var bignumber=__webpack_require__("./node_modules/bignumber.js/bignumber.js"),bignumber_default=__webpack_require__.n(bignumber),actions=__webpack_require__("./ui/__mocks__/actions.js");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useTransactionFunctions_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function useTransactionFunctions_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){useTransactionFunctions_define_property(target,key,source[key])})}return target}function useTransactionFunctions_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function useTransactionFunctions_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):useTransactionFunctions_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var useTransactionFunctions=function(param){var defaultEstimateToUse=param.defaultEstimateToUse,editGasMode=param.editGasMode,estimatedBaseFee=param.estimatedBaseFee,gasFeeEstimates=param.gasFeeEstimates,gasLimitValue=param.gasLimit,maxPriorityFeePerGasValue=param.maxPriorityFeePerGas,transaction=param.transaction,setRetryTxMeta=param.setRetryTxMeta,dispatch=(0,es.wA)(),getTxMeta=(0,react.useCallback)(function(){if(editGasMode!==gas.W5.cancel&&editGasMode!==gas.W5.speedUp||transaction.previousGas)return{};var _transaction_txParams,_ref=null!=(_transaction_txParams=null==transaction?void 0:transaction.txParams)?_transaction_txParams:{};return{previousGas:{maxFeePerGas:_ref.maxFeePerGas,maxPriorityFeePerGas:_ref.maxPriorityFeePerGas,gasLimit:_ref.gasLimit}}},[editGasMode,null==transaction?void 0:transaction.previousGas,null==transaction?void 0:transaction.txParams]),updateTransaction=(0,react.useCallback)(function(param){var estimateUsed=param.estimateUsed,gasLimit=param.gasLimit,maxFeePerGas=param.maxFeePerGas,maxPriorityFeePerGas=param.maxPriorityFeePerGas,estimateSuggested=param.estimateSuggested;return _async_to_generator(function(){var newGasSettings,txMeta,updatedTxMeta;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(newGasSettings={gas:(0,conversion_utils.Ao)(gasLimit||gasLimitValue),gasLimit:(0,conversion_utils.Ao)(gasLimit||gasLimitValue),estimateSuggested:estimateSuggested||defaultEstimateToUse,estimateUsed:estimateUsed},maxFeePerGas&&(newGasSettings.maxFeePerGas=maxFeePerGas),maxPriorityFeePerGas&&(newGasSettings.maxPriorityFeePerGas=maxPriorityFeePerGas||(0,conversion_utils.Sb)(maxPriorityFeePerGasValue)),txMeta=getTxMeta(),updatedTxMeta=useTransactionFunctions_object_spread(useTransactionFunctions_object_spread_props(useTransactionFunctions_object_spread({},transaction),{userFeeLevel:estimateUsed||gas.uT.custom,txParams:useTransactionFunctions_object_spread({},transaction.txParams,newGasSettings)}),txMeta),editGasMode!==gas.W5.swaps)return[3,1];return dispatch((0,actions.updateSwapsUserFeeLevel)(estimateUsed||gas.uT.custom)),dispatch((0,actions.updateCustomSwapsEIP1559GasParams)(newGasSettings)),[3,6];case 1:if(!(0,utils_gas.Y8)(editGasMode))return[3,2];return setRetryTxMeta(updatedTxMeta),[3,6];case 2:if(newGasSettings.userEditedGasLimit=updatedTxMeta.userEditedGasLimit,newGasSettings.userFeeLevel=updatedTxMeta.userFeeLevel,!(txMeta&&txMeta.previousGas))return[3,4];return[4,dispatch((0,actions.updatePreviousGasParams)(updatedTxMeta.id,txMeta.previousGas))];case 3:_state.sent(),_state.label=4;case 4:return[4,dispatch((0,actions.updateTransactionGasFees)(updatedTxMeta.id,newGasSettings))];case 5:_state.sent(),_state.label=6;case 6:return[2]}})})()},[defaultEstimateToUse,dispatch,editGasMode,gasLimitValue,getTxMeta,maxPriorityFeePerGasValue,transaction,setRetryTxMeta]),cancelTransaction=(0,react.useCallback)(function(){dispatch((0,actions.createCancelTransaction)(transaction.id,transaction.txParams,{estimatedBaseFee:estimatedBaseFee}))},[dispatch,estimatedBaseFee,transaction]),speedUpTransaction=(0,react.useCallback)(function(){dispatch((0,actions.createSpeedUpTransaction)(transaction.id,transaction.txParams,{estimatedBaseFee:estimatedBaseFee}))},[dispatch,estimatedBaseFee,transaction]),updateTransactionToTenPercentIncreasedGasFee=(0,react.useCallback)(function(){var initTransaction=arguments.length>0&&void 0!==arguments[0]&&arguments[0],_ref=transaction.previousGas||transaction.txParams,gasLimit=_ref.gas,maxFeePerGas=_ref.maxFeePerGas,maxPriorityFeePerGas=_ref.maxPriorityFeePerGas,newMaxPriorityFeePerGas=new(bignumber_default())(maxPriorityFeePerGas,16).isZero()?(0,conversion_utils.Sb)(gasFeeEstimates[defaultEstimateToUse].suggestedMaxPriorityFeePerGas):maxPriorityFeePerGas,estimateUsed="0x0"===maxPriorityFeePerGas?gas.Nt:gas.uT.tenPercentIncreased;gasFeeEstimates&&updateTransaction({estimateSuggested:initTransaction?defaultEstimateToUse:gas.uT.tenPercentIncreased,estimateUsed:estimateUsed,gasLimit:gasLimit,maxFeePerGas:(0,utils_gas.fi)(maxFeePerGas),maxPriorityFeePerGas:(0,utils_gas.fi)(newMaxPriorityFeePerGas)})},[defaultEstimateToUse,gasFeeEstimates,transaction,updateTransaction]),updateTransactionUsingEstimate=(0,react.useCallback)(function(gasFeeEstimateToUse){if(null==gasFeeEstimates?void 0:gasFeeEstimates[gasFeeEstimateToUse]){var _gasFeeEstimates_gasFeeEstimateToUse=gasFeeEstimates[gasFeeEstimateToUse],suggestedMaxFeePerGas=_gasFeeEstimates_gasFeeEstimateToUse.suggestedMaxFeePerGas,suggestedMaxPriorityFeePerGas=_gasFeeEstimates_gasFeeEstimateToUse.suggestedMaxPriorityFeePerGas;updateTransaction({estimateUsed:gasFeeEstimateToUse,maxFeePerGas:(0,conversion_utils.Sb)(suggestedMaxFeePerGas),maxPriorityFeePerGas:(0,conversion_utils.Sb)(suggestedMaxPriorityFeePerGas)})}},[gasFeeEstimates,updateTransaction]),updateTransactionUsingDAPPSuggestedValues=(0,react.useCallback)(function(){var _transaction_dappSuggestedGasFees,_ref=null!=(_transaction_dappSuggestedGasFees=null==transaction?void 0:transaction.dappSuggestedGasFees)?_transaction_dappSuggestedGasFees:{},maxFeePerGas=_ref.maxFeePerGas,maxPriorityFeePerGas=_ref.maxPriorityFeePerGas;updateTransaction({estimateUsed:gas.uT.dAppSuggested,maxFeePerGas:maxFeePerGas,maxPriorityFeePerGas:maxPriorityFeePerGas})},[transaction,updateTransaction]);return{cancelTransaction:cancelTransaction,speedUpTransaction:speedUpTransaction,updateTransaction:updateTransaction,updateTransactionToTenPercentIncreasedGasFee:updateTransactionToTenPercentIncreasedGasFee,updateTransactionUsingDAPPSuggestedValues:updateTransactionUsingDAPPSuggestedValues,updateTransactionUsingEstimate:updateTransactionUsingEstimate}};function useGasFeeInputs_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useGasFeeInputs_array_with_holes(arr){if(Array.isArray(arr))return arr}function useGasFeeInputs_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function useGasFeeInputs_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function useGasFeeInputs_sliced_to_array(arr,i){return useGasFeeInputs_array_with_holes(arr)||useGasFeeInputs_iterable_to_array_limit(arr,i)||useGasFeeInputs_unsupported_iterable_to_array(arr,i)||useGasFeeInputs_non_iterable_rest()}function useGasFeeInputs_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return useGasFeeInputs_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useGasFeeInputs_array_like_to_array(o,minLen)}}function useGasFeeInputs(){var _network_rpcEndpoints_network_defaultRpcEndpointIndex,_network_rpcEndpoints,defaultEstimateToUse=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gas.et.medium,_transaction=arguments.length>1?arguments[1]:void 0,minimumGasLimit=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0x5208",editGasMode=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gas.W5.modifyInPlace,initialRetryTxMeta={txParams:null==_transaction?void 0:_transaction.txParams,id:null==_transaction?void 0:_transaction.id,userFeeLevel:null==_transaction?void 0:_transaction.userFeeLevel,originalGasEstimate:null==_transaction?void 0:_transaction.originalGasEstimate,userEditedGasLimit:null==_transaction?void 0:_transaction.userEditedGasLimit};(null==_transaction?void 0:_transaction.previousGas)&&(initialRetryTxMeta.previousGas=null==_transaction?void 0:_transaction.previousGas);var _useState=useGasFeeInputs_sliced_to_array((0,react.useState)(initialRetryTxMeta),2),retryTxMeta=_useState[0],setRetryTxMeta=_useState[1],transaction=(0,utils_gas.Y8)(editGasMode)?retryTxMeta:_transaction,network=(0,es.d4)(function(state){return(0,selectors.gD7)(state,null==transaction?void 0:transaction.chainId)}),networkClientId=null==network||null==(_network_rpcEndpoints=network.rpcEndpoints)||null==(_network_rpcEndpoints_network_defaultRpcEndpointIndex=_network_rpcEndpoints[null==network?void 0:network.defaultRpcEndpointIndex])?void 0:_network_rpcEndpoints_network_defaultRpcEndpointIndex.networkClientId,supportsEIP1559=(0,es.d4)(selectors.PQP)&&!(0,transactions_util.yj)(null==transaction?void 0:transaction.txParams),_useGasFeeEstimates=(0,useGasFeeEstimates.K)(networkClientId),gasEstimateType=_useGasFeeEstimates.gasEstimateType,gasFeeEstimates=_useGasFeeEstimates.gasFeeEstimates,isGasEstimatesLoading=_useGasFeeEstimates.isGasEstimatesLoading,isNetworkBusy=_useGasFeeEstimates.isNetworkBusy,userPrefersAdvancedGas=(0,es.d4)(selectors.wQZ),_useState1=useGasFeeInputs_sliced_to_array((0,react.useState)(function(){var _transaction_txParams,_transaction_txParams1;return userPrefersAdvancedGas&&(null==transaction||null==(_transaction_txParams=transaction.txParams)?void 0:_transaction_txParams.maxPriorityFeePerGas)&&(null==transaction||null==(_transaction_txParams1=transaction.txParams)?void 0:_transaction_txParams1.maxFeePerGas)?null:transaction?(null==transaction?void 0:transaction.userFeeLevel)||null:defaultEstimateToUse}),2),estimateToUse=_useState1[0],setInternalEstimateToUse=_useState1[1],_useState2=useGasFeeInputs_sliced_to_array((0,react.useState)(function(){return estimateToUse||gas.uT.custom}),2),estimateUsed=_useState2[0],setEstimateUsed=_useState2[1],_useState3=useGasFeeInputs_sliced_to_array((0,react.useState)(function(){var _transaction_txParams,_transaction_txParams1,_transaction_txParams_gasLimit,_ref;return Number((0,conversion_utils.I0)(null!=(_ref=null!=(_transaction_txParams_gasLimit=null==transaction||null==(_transaction_txParams=transaction.txParams)?void 0:_transaction_txParams.gasLimit)?_transaction_txParams_gasLimit:null==transaction||null==(_transaction_txParams1=transaction.txParams)?void 0:_transaction_txParams1.gas)?_ref:"0x0"))}),2),gasLimit=_useState3[0],setGasLimit=_useState3[1],properGasLimit=Number((0,conversion_utils.I0)(null==transaction?void 0:transaction.originalGasEstimate));(0,react.useEffect)(function(){if(supportsEIP1559){(null==transaction?void 0:transaction.userFeeLevel)&&setInternalEstimateToUse(null==transaction?void 0:transaction.userFeeLevel);var _transaction_txParams,_transaction_txParams1,_transaction_txParams2,_transaction_txParams3,_transaction_txParams_gas,_transaction_txParams_maxFeePerGas,_transaction_txParams_gasLimit,_ref,maximumGas=new Numeric.e(null!=(_transaction_txParams_gas=null==transaction||null==(_transaction_txParams=transaction.txParams)?void 0:_transaction_txParams.gas)?_transaction_txParams_gas:"0x0",16).times(new Numeric.e(null!=(_transaction_txParams_maxFeePerGas=null==transaction||null==(_transaction_txParams1=transaction.txParams)?void 0:_transaction_txParams1.maxFeePerGas)?_transaction_txParams_maxFeePerGas:"0x0",16)).toPrefixedHexString();Number(new Numeric.e(maximumGas,16,common.sk.WEI).toDenomination(common.sk.ETH).toBase(10).toString())>Number("1")?setEstimateUsed(gas.uT.dappSuggestedHigh):(null==transaction?void 0:transaction.userFeeLevel)&&setEstimateUsed(null==transaction?void 0:transaction.userFeeLevel),setGasLimit(Number((0,conversion_utils.I0)(null!=(_ref=null!=(_transaction_txParams_gasLimit=null==transaction||null==(_transaction_txParams2=transaction.txParams)?void 0:_transaction_txParams2.gasLimit)?_transaction_txParams_gasLimit:null==transaction||null==(_transaction_txParams3=transaction.txParams)?void 0:_transaction_txParams3.gas)?_ref:"0x0")))}},[setEstimateUsed,setGasLimit,setInternalEstimateToUse,supportsEIP1559,transaction]);var _useGasPriceInput=useGasPriceInput({estimateToUse:estimateToUse,gasEstimateType:gasEstimateType,gasFeeEstimates:gasFeeEstimates,transaction:transaction}),gasPrice=_useGasPriceInput.gasPrice,setGasPrice=_useGasPriceInput.setGasPrice,setGasPriceHasBeenManuallySet=_useGasPriceInput.setGasPriceHasBeenManuallySet,_useMaxFeePerGasInput=useMaxFeePerGasInput({estimateToUse:estimateToUse,gasEstimateType:gasEstimateType,gasFeeEstimates:gasFeeEstimates,transaction:transaction}),maxFeePerGas=_useMaxFeePerGasInput.maxFeePerGas,setMaxFeePerGas=_useMaxFeePerGasInput.setMaxFeePerGas,_useMaxPriorityFeePerGasInput=useMaxPriorityFeePerGasInput({estimateToUse:estimateToUse,gasEstimateType:gasEstimateType,gasFeeEstimates:gasFeeEstimates,transaction:transaction}),maxPriorityFeePerGas=_useMaxPriorityFeePerGasInput.maxPriorityFeePerGas,setMaxPriorityFeePerGas=_useMaxPriorityFeePerGasInput.setMaxPriorityFeePerGas,_useGasEstimates=useGasEstimates({editGasMode:editGasMode,gasEstimateType:gasEstimateType,gasFeeEstimates:gasFeeEstimates,gasLimit:gasLimit,gasPrice:gasPrice,maxFeePerGas:maxFeePerGas,maxPriorityFeePerGas:maxPriorityFeePerGas,minimumGasLimit:minimumGasLimit,transaction:transaction}),estimatedMinimumNative=_useGasEstimates.estimatedMinimumNative,maximumCostInHexWei=_useGasEstimates.maximumCostInHexWei,minimumCostInHexWei=_useGasEstimates.minimumCostInHexWei,_useGasFeeErrors=useGasFeeErrors({gasEstimateType:gasEstimateType,gasFeeEstimates:gasFeeEstimates,isGasEstimatesLoading:isGasEstimatesLoading,gasLimit:gasLimit,gasPrice:gasPrice,maxPriorityFeePerGas:maxPriorityFeePerGas,maxFeePerGas:maxFeePerGas,minimumCostInHexWei:minimumCostInHexWei,minimumGasLimit:minimumGasLimit,transaction:transaction}),balanceError=_useGasFeeErrors.balanceError,gasErrors=_useGasFeeErrors.gasErrors,hasGasErrors=_useGasFeeErrors.hasGasErrors,hasSimulationError=_useGasFeeErrors.hasSimulationError,handleGasLimitOutOfBoundError=(0,react.useCallback)(function(){if(gasErrors.gasLimit===constants_gas.BW.GAS_LIMIT_OUT_OF_BOUNDS){var _transaction_txParams,transactionGasLimitDec=(0,conversion_utils.I0)(null==transaction||null==(_transaction_txParams=transaction.txParams)?void 0:_transaction_txParams.gas),minimumGasLimitDec=(0,conversion_utils.I0)(minimumGasLimit);setGasLimit(transactionGasLimitDec>minimumGasLimitDec?transactionGasLimitDec:minimumGasLimitDec)}},[minimumGasLimit,gasErrors.gasLimit,transaction]),_useTransactionFunctions=useTransactionFunctions({defaultEstimateToUse:defaultEstimateToUse,editGasMode:editGasMode,gasFeeEstimates:gasFeeEstimates,gasLimit:gasLimit,maxPriorityFeePerGas:maxPriorityFeePerGas,minimumGasLimit:minimumGasLimit,transaction:transaction,setRetryTxMeta:setRetryTxMeta}),cancelTransaction=_useTransactionFunctions.cancelTransaction,speedUpTransaction=_useTransactionFunctions.speedUpTransaction,updateTransaction=_useTransactionFunctions.updateTransaction,updateTransactionToTenPercentIncreasedGasFee=_useTransactionFunctions.updateTransactionToTenPercentIncreasedGasFee,updateTransactionUsingDAPPSuggestedValues=_useTransactionFunctions.updateTransactionUsingDAPPSuggestedValues,updateTransactionUsingEstimate=_useTransactionFunctions.updateTransactionUsingEstimate,onManualChange=(0,react.useCallback)(function(){setInternalEstimateToUse(gas.Nt),handleGasLimitOutOfBoundError(),setGasPrice(gasPrice),setGasLimit(gasLimit),setMaxFeePerGas(maxFeePerGas),setMaxPriorityFeePerGas(maxPriorityFeePerGas),setGasPriceHasBeenManuallySet(!0),setEstimateUsed("custom")},[setInternalEstimateToUse,handleGasLimitOutOfBoundError,setGasPrice,gasPrice,setGasLimit,gasLimit,setMaxFeePerGas,maxFeePerGas,setMaxPriorityFeePerGas,maxPriorityFeePerGas,setGasPriceHasBeenManuallySet]);return{transaction:transaction,maxFeePerGas:maxFeePerGas,maxPriorityFeePerGas:maxPriorityFeePerGas,gasPrice:gasPrice,setGasPrice:setGasPrice,gasLimit:gasLimit,setGasLimit:setGasLimit,properGasLimit:properGasLimit,editGasMode:editGasMode,estimateToUse:estimateToUse,estimatedMinimumNative:estimatedMinimumNative,maximumCostInHexWei:maximumCostInHexWei,minimumCostInHexWei:minimumCostInHexWei,estimateUsed:estimateUsed,gasFeeEstimates:gasFeeEstimates,isNetworkBusy:isNetworkBusy,onManualChange:onManualChange,balanceError:balanceError,gasErrors:gasErrors,hasGasErrors:hasGasErrors,hasSimulationError:hasSimulationError,minimumGasLimitDec:(0,conversion_utils.I0)(minimumGasLimit),supportsEIP1559:supportsEIP1559,cancelTransaction:cancelTransaction,speedUpTransaction:speedUpTransaction,updateTransaction:updateTransaction,updateTransactionToTenPercentIncreasedGasFee:updateTransactionToTenPercentIncreasedGasFee,updateTransactionUsingDAPPSuggestedValues:updateTransactionUsingDAPPSuggestedValues,updateTransactionUsingEstimate:updateTransactionUsingEstimate}}}}]);