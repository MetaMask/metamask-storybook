"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[9444],{"./node_modules/@mdx-js/react/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{NF:()=>withMDXComponents,Zo:()=>MDXProvider,ah:()=>useMDXComponents,pC:()=>MDXContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");let MDXContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({});function withMDXComponents(Component){return boundMDXComponent;function boundMDXComponent(props){let allComponents=useMDXComponents(props.components);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,{...props,allComponents})}}function useMDXComponents(components){let contextComponents=react__WEBPACK_IMPORTED_MODULE_0__.useContext(MDXContext);return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(()=>"function"==typeof components?components(contextComponents):{...contextComponents,...components},[contextComponents,components])}let emptyObject={};function MDXProvider({components,children,disableParentContext}){let allComponents;return allComponents=disableParentContext?"function"==typeof components?components({}):components||emptyObject:useMDXComponents(components),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MDXContext.Provider,{value:allComponents},children)}},"./node_modules/@metamask/snaps-rpc-methods/dist/esm/endowments/transaction-insight.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{pG:()=>getTransactionOriginCaveat});var _metamask_permission_controller__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@metamask/permission-controller/dist/index.js"),_metamask_rpc_errors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@metamask/rpc-errors/dist/index.mjs"),_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/esm/caveats.js"),_metamask_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@metamask/utils/dist/chunk-H4YFDLB7.mjs"),_metamask_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@metamask/utils/dist/chunk-74DGVJVE.mjs"),_caveats__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@metamask/snaps-rpc-methods/dist/esm/endowments/caveats/generic.js");let permissionName=__webpack_require__("./node_modules/@metamask/snaps-rpc-methods/dist/esm/endowments/enum.js").p.TransactionInsight;function validateCaveat(caveat){if(!(0,_metamask_utils__WEBPACK_IMPORTED_MODULE_5__.l$)(caveat,"value")||!(0,_metamask_utils__WEBPACK_IMPORTED_MODULE_5__.PO)(caveat))throw _metamask_rpc_errors__WEBPACK_IMPORTED_MODULE_1__.PY.invalidParams({message:"Expected a plain object."});let{value}=caveat;(0,_metamask_utils__WEBPACK_IMPORTED_MODULE_6__.hu)("boolean"==typeof value,'Expected caveat value to have type "boolean"')}function getTransactionOriginCaveat(permission){return permission?.caveats?((0,_metamask_utils__WEBPACK_IMPORTED_MODULE_6__.hu)(1===permission.caveats.length),(0,_metamask_utils__WEBPACK_IMPORTED_MODULE_6__.hu)(permission.caveats[0].type===_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__.j.TransactionOrigin),permission.caveats[0].value??null):null}Object.freeze({targetName:permissionName,specificationBuilder:_builderOptions=>({permissionType:_metamask_permission_controller__WEBPACK_IMPORTED_MODULE_0__.PermissionType.Endowment,targetName:permissionName,allowedCaveats:[_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__.j.TransactionOrigin,_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__.j.MaxRequestTime],endowmentGetter:_getterOptions=>void 0,validator:(0,_caveats__WEBPACK_IMPORTED_MODULE_4__.S)([{type:_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__.j.TransactionOrigin,optional:!0},{type:_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__.j.MaxRequestTime,optional:!0}]),subjectTypes:[_metamask_permission_controller__WEBPACK_IMPORTED_MODULE_0__.SubjectType.Snap]})}),_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__.j.TransactionOrigin,Object.freeze({type:_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__.j.TransactionOrigin,validator:caveat=>validateCaveat(caveat)})},"./node_modules/@metamask/snaps-sdk/dist/esm/types/handlers/transaction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var SeverityLevel;__webpack_require__.d(__webpack_exports__,{_:()=>SeverityLevel}),(SeverityLevel||(SeverityLevel={})).Critical="critical"},"./node_modules/react/cjs/react-jsx-runtime.production.min.js":(__unused_webpack_module,exports,__webpack_require__)=>{/** @license React v16.14.0
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=__webpack_require__("./node_modules/react/index.js"),g=60103;if(exports.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var h=Symbol.for;g=h("react.element"),exports.Fragment=h("react.fragment")}var m=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n=Object.prototype.hasOwnProperty,p={key:!0,ref:!0,__self:!0,__source:!0};function q(c,a,k){var b,d={},e=null,l=null;for(b in void 0!==k&&(e=""+k),void 0!==a.key&&(e=""+a.key),void 0!==a.ref&&(l=a.ref),a)n.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:g,type:c,key:e,ref:l,props:d,_owner:m.current}}exports.jsx=q,exports.jsxs=q},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.min.js")},"./ui/pages/confirmations/components/signature-request/signature-request.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AccountMismatchStory:()=>AccountMismatchStory,DefaultStory:()=>DefaultStory,default:()=>signature_request_stories});var _DefaultStory_parameters,_DefaultStory_parameters_docs,_DefaultStory_parameters1,_AccountMismatchStory_parameters,_AccountMismatchStory_parameters_docs,_AccountMismatchStory_parameters1,react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),store=__webpack_require__("./ui/store/store.ts"),test_data=__webpack_require__("./.storybook/test-data.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),lib=__webpack_require__("./node_modules/@mdx-js/react/lib/index.js"),dist=__webpack_require__("./node_modules/@storybook/addon-docs/dist/index.mjs"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),eth_rpc_errors_dist=__webpack_require__("./node_modules/eth-rpc-errors/dist/index.js"),actions=__webpack_require__("./ui/store/actions.ts"),selectors=__webpack_require__("./ui/selectors/index.js"),metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),util=__webpack_require__("./ui/helpers/utils/util.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),react_router=__webpack_require__("./node_modules/react-router/esm/react-router.js"),confirm_transaction_duck=__webpack_require__("./ui/ducks/confirm-transaction/confirm-transaction.duck.js"),history_history=__webpack_require__("./ui/ducks/history/history.js");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useRejectTransactionModal(){var dispatch=(0,es.I0)(),history=(0,react_router.k6)(),mostRecentOverviewPage=(0,es.v9)(history_history.H7),unapprovedMessagesCount=(0,es.v9)(selectors.eWO),unconfirmedMessagesList=(0,es.v9)(selectors.Mkt);return{handleCancelAll:function(){dispatch((0,actions.K4b)({name:"REJECT_TRANSACTIONS",onSubmit:_async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,dispatch((0,actions.tEJ)((0,util.gs)(unconfirmedMessagesList)))];case 1:return _state.sent(),dispatch((0,confirm_transaction_duck.vi)()),history.push(mostRecentOverviewPage),[2]}})}),unapprovedTxCount:unapprovedMessagesCount,isRequestType:!0}))}}}var confirm_page_container=__webpack_require__("./ui/pages/confirmations/components/confirm-page-container/index.js"),signature_request_header=__webpack_require__("./ui/pages/confirmations/components/signature-request-header/signature-request-header.js"),security_provider_banner_message=__webpack_require__("./ui/pages/confirmations/components/security-provider-banner-message/security-provider-banner-message.js"),ledger_instruction_field=__webpack_require__("./ui/pages/confirmations/components/ledger-instruction-field/index.js"),contract_details_modal=__webpack_require__("./ui/pages/confirmations/components/contract-details-modal/contract-details-modal.js"),metametrics=__webpack_require__("./ui/contexts/metametrics.js"),constants_metametrics=__webpack_require__("./shared/constants/metametrics.ts"),security_provider=__webpack_require__("./shared/constants/security-provider.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),institution_background=__webpack_require__("./ui/store/institutional/institution-background.ts");function useMMICustodySignMessage_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useMMICustodySignMessage_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){useMMICustodySignMessage_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){useMMICustodySignMessage_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useMMICustodySignMessage_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useMMICustodySignMessage(){var _ref,dispatch=(0,es.I0)(),mmiActions=(0,institution_background.I6)(),accountType=(0,es.v9)(selectors.lxc);return{custodySignFn:(_ref=useMMICustodySignMessage_async_to_generator(function(_msgData){var err;return useMMICustodySignMessage_ts_generator(this,function(_state){switch(_state.label){case 0:if("custody"!==accountType)return[3,8];_state.label=1;case 1:return _state.trys.push([1,4,,7]),[4,dispatch((0,actions.a__)(_msgData.id))];case 2:return _state.sent(),(0,actions.Ab9)(_msgData.id),[4,dispatch(mmiActions.setWaitForConfirmDeepLinkDialog(!0))];case 3:case 6:return _state.sent(),[3,7];case 4:return err=_state.sent(),[4,dispatch(mmiActions.setWaitForConfirmDeepLinkDialog(!0))];case 5:return _state.sent(),[4,dispatch((0,actions.K4b)({name:"TRANSACTION_FAILED",errorMessage:err.message,closeNotification:!0,operationFailed:!0}))];case 7:return[3,10];case 8:return[4,dispatch((0,actions.a__)(_msgData.id))];case 9:_state.sent(),(0,actions.Ab9)(_msgData.id),_state.label=10;case 10:return[2]}})}),function custodySignFn(_msgData){return _ref.apply(this,arguments)})}}var blockaid_banner_alert=__webpack_require__("./ui/pages/confirmations/components/security-provider-banner-alert/blockaid-banner-alert/blockaid-banner-alert.js"),insight_warnings=__webpack_require__("./ui/components/app/snaps/insight-warnings/index.js"),signature_request_message=__webpack_require__("./ui/pages/confirmations/components/signature-request/signature-request-message/signature-request-message.js"),page_container=__webpack_require__("./ui/components/ui/page-container/index.js");function _assert_this_initialized(self){if(void 0===self)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _get_prototype_of(o){return(_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_set_prototype_of(subClass,superClass)}function _possible_constructor_return(self,call){return call&&("object"===_type_of(call)||"function"==typeof call)?call:_assert_this_initialized(self)}function _set_prototype_of(o,p){return(_set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function _is_native_reflect_construct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _create_super(Derived){var hasNativeReflectConstruct=_is_native_reflect_construct();return function _createSuperInternal(){var result,Super=_get_prototype_of(Derived);if(hasNativeReflectConstruct){var NewTarget=_get_prototype_of(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possible_constructor_return(this,result)}}var SignatureRequestFooter=function(PureComponent){_inherits(SignatureRequestFooter,PureComponent);var _super=_create_super(SignatureRequestFooter);function SignatureRequestFooter(){return _class_call_check(this,SignatureRequestFooter),_super.apply(this,arguments)}return _create_class(SignatureRequestFooter,[{key:"render",value:function render(){var _this_props=this.props,submitButtonType=_this_props.submitButtonType,cancelAction=_this_props.cancelAction,signAction=_this_props.signAction,_this_props_disabled=_this_props.disabled;return react.createElement(page_container.g$,{cancelText:this.context.t("reject"),submitText:this.context.t("sign"),onCancel:cancelAction,onSubmit:signAction,disabled:void 0!==_this_props_disabled&&_this_props_disabled,submitButtonType:submitButtonType})}}]),SignatureRequestFooter}(react.PureComponent);function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function signature_request_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function signature_request_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){signature_request_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){signature_request_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function signature_request_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}_define_property(SignatureRequestFooter,"propTypes",{cancelAction:prop_types_default().func.isRequired,signAction:prop_types_default().func.isRequired,disabled:prop_types_default().bool,submitButtonType:prop_types_default().string}),_define_property(SignatureRequestFooter,"contextTypes",{t:prop_types_default().func});var SignatureRequest=function(param){var _ref,_ref1,_txData_securityAlertResponse,_txData_securityProviderResponse,_txData_securityProviderResponse1,txData=param.txData,warnings=param.warnings,trackEvent=(0,react.useContext)(metametrics.Wd),dispatch=(0,es.I0)(),t=(0,useI18nContext.C)(),_useState=_sliced_to_array((0,react.useState)(!1),2),hasScrolledMessage=_useState[0],setHasScrolledMessage=_useState[1],_useState1=_sliced_to_array((0,react.useState)(!1),2),showContractDetails=_useState1[0],setShowContractDetails=_useState1[1],_useState2=_sliced_to_array((0,react.useState)(null),2),messageRootRef=_useState2[0],setMessageRootRef=_useState2[1],_useState3=_sliced_to_array((0,react.useState)(!1),2),messageIsScrollable=_useState3[0],setMessageIsScrollable=_useState3[1],id=txData.id,type=txData.type,_txData_msgParams=txData.msgParams,from=_txData_msgParams.from,data=_txData_msgParams.data,origin=_txData_msgParams.origin,version=_txData_msgParams.version,hardwareWalletRequiresConnection=(0,es.v9)(function(state){return(0,selectors.DnU)(state,from)}),_useSelector=(0,es.v9)(metamask.Vu),chainId=_useSelector.chainId,rpcPrefs=_useSelector.rpcPrefs,unapprovedMessagesCount=(0,es.v9)(selectors.eWO),subjectMetadata=(0,es.v9)(selectors.YRT),isLedgerWallet=(0,es.v9)(function(state){return(0,metamask.Dc)(state,from)}),handleCancelAll=useRejectTransactionModal().handleCancelAll,selectedAccount=(0,es.v9)(selectors.uWD),accountType=(0,es.v9)(selectors.lxc),allAccounts=(0,es.v9)(selectors.QT,es.wU),address=((0,util.t)(allAccounts,from)||{}).address,custodySignFn=useMMICustodySignMessage().custodySignFn,_useState4=_sliced_to_array((0,react.useState)(!1),2),isShowingSigInsightWarnings=_useState4[0],setIsShowingSigInsightWarnings=_useState4[1];(0,react.useEffect)(function(){setMessageIsScrollable((null==messageRootRef?void 0:messageRootRef.scrollHeight)>(null==messageRootRef?void 0:messageRootRef.clientHeight))},[messageRootRef]);var targetSubjectMetadata=(null==subjectMetadata?void 0:subjectMetadata[origin])||null,parseMessage=(0,lodash.memoize)(function(dataToParse){var _JSON_parse=JSON.parse(dataToParse),message=_JSON_parse.message,_JSON_parse_domain=_JSON_parse.domain,primaryType=_JSON_parse.primaryType,types=_JSON_parse.types;return{sanitizedMessage:(0,util.Z$)(message,primaryType,types),domain:void 0===_JSON_parse_domain?{}:_JSON_parse_domain,primaryType:primaryType}}),submitButtonType=(null===(_txData_securityAlertResponse=txData.securityAlertResponse)||void 0===_txData_securityAlertResponse?void 0:_txData_securityAlertResponse.result_type)===security_provider.Bx.Malicious?"danger-primary":"primary",onSign=(_ref=signature_request_async_to_generator(function(){return signature_request_ts_generator(this,function(_state){switch(_state.label){case 0:if("custody"!==accountType)return[3,2];return[4,custodySignFn(txData)];case 1:_state.sent(),_state.label=2;case 2:return[4,dispatch((0,actions.a__)(id))];case 3:return _state.sent(),(0,actions.Ab9)(id),trackEvent({category:constants_metametrics.ci.Transactions,event:"Confirm",properties:{action:"Sign Request",legacy_event:!0,type:type,version:version}}),[2]}})}),function onSign(){return _ref.apply(this,arguments)}),onCancel=(_ref1=signature_request_async_to_generator(function(){return signature_request_ts_generator(this,function(_state){switch(_state.label){case 0:return[4,dispatch((0,actions.YCK)(id,(0,eth_rpc_errors_dist.Xy)(eth_rpc_errors_dist.Sy.provider.userRejectedRequest())))];case 1:return _state.sent(),trackEvent({category:constants_metametrics.ci.Transactions,event:"Cancel",properties:{action:"Sign Request",legacy_event:!0,type:type,version:version}}),[2]}})}),function onCancel(){return _ref1.apply(this,arguments)}),_parseMessage=parseMessage(data),sanitizedMessage=_parseMessage.sanitizedMessage,verifyingContract=_parseMessage.domain.verifyingContract,primaryType=_parseMessage.primaryType;return react.createElement(react.Fragment,null,react.createElement("div",{className:"signature-request"},react.createElement(confirm_page_container.oN,null),react.createElement("div",{className:"request-signature__account","data-testid":"request-signature-account"},react.createElement(signature_request_header.Z,{txData:txData})),react.createElement("div",{className:"signature-request-content"},react.createElement(blockaid_banner_alert.Z,{txData:txData,marginLeft:4,marginRight:4,marginBottom:4}),(null==txData?void 0:null===(_txData_securityProviderResponse=txData.securityProviderResponse)||void 0===_txData_securityProviderResponse?void 0:_txData_securityProviderResponse.flagAsDangerous)!==void 0&&(null==txData?void 0:null===(_txData_securityProviderResponse1=txData.securityProviderResponse)||void 0===_txData_securityProviderResponse1?void 0:_txData_securityProviderResponse1.flagAsDangerous)!==security_provider.C_.NOT_MALICIOUS||(null==txData?void 0:txData.securityProviderResponse)&&0===Object.keys(txData.securityProviderResponse).length?react.createElement(security_provider_banner_message.Z,{securityProviderResponse:txData.securityProviderResponse}):null,selectedAccount.address===address?null:react.createElement(component_library.xu,{className:"request-signature__mismatch-info",display:design_system.sS.Flex,width:design_system.Sw.Full,padding:4,marginBottom:4,backgroundColor:design_system.lP.primaryMuted},react.createElement(component_library.JO,{name:component_library.uH.Info,color:design_system.EY.infoDefault,marginRight:2}),react.createElement(component_library.xv,{variant:design_system.rK.bodyXs,color:design_system.d9.textDefault,as:"h6"},t("mismatchAccount",[(0,util.$Q)(selectedAccount.address),(0,util.$Q)(address)]))),react.createElement("div",{className:"signature-request__origin"},react.createElement(component_library.cM,{label:origin,labelProps:{color:design_system.d9.textAlternative},src:null==targetSubjectMetadata?void 0:targetSubjectMetadata.iconUrl})),react.createElement(component_library.xv,{className:"signature-request__content__title",variant:design_system.rK.headingLg,marginTop:4},t("sigRequest")),react.createElement(component_library.xv,{className:"request-signature__content__subtitle",variant:design_system.rK.bodySm,color:design_system.d9.textAlternative,textAlign:design_system.PH.Center,marginLeft:12,marginRight:12,marginTop:4,as:"h6"},t("signatureRequestGuidance")),verifyingContract?react.createElement("div",null,react.createElement(component_library.zx,{variant:component_library.Wu.Link,onClick:function(){return setShowContractDetails(!0)},className:"signature-request-content__verify-contract-details","data-testid":"verify-contract-details"},react.createElement(component_library.xv,{variant:design_system.rK.bodySm,color:design_system.d9.primaryDefault,as:"h6"},t("verifyContractDetails")))):null),isLedgerWallet?react.createElement("div",{className:"confirm-approve-content__ledger-instruction-wrapper"},react.createElement(ledger_instruction_field.Z,{showDataInstruction:!0})):null,react.createElement(signature_request_message.Z,{data:sanitizedMessage,onMessageScrolled:function(){return setHasScrolledMessage(!0)},setMessageRootRef:setMessageRootRef,messageRootRef:messageRootRef,messageIsScrollable:messageIsScrollable,primaryType:primaryType}),react.createElement(SignatureRequestFooter,{cancelAction:onCancel,signAction:function(){return(null==warnings?void 0:warnings.length)>=1?setIsShowingSigInsightWarnings(!0):onSign()},disabled:!!(null==txData?void 0:txData.custodyId)||hardwareWalletRequiresConnection||messageIsScrollable&&!hasScrolledMessage,submitButtonType:submitButtonType}),showContractDetails&&react.createElement(contract_details_modal.Z,{toAddress:verifyingContract,chainId:chainId,rpcPrefs:rpcPrefs,onClose:function(){return setShowContractDetails(!1)},isContractRequestingSignature:!0}),unapprovedMessagesCount>1?react.createElement(component_library.ZP,{size:design_system.$u.inherit,className:"signature-request__reject-all-button","data-testid":"signature-request-reject-all",onClick:handleCancelAll},t("rejectRequestsN",[unapprovedMessagesCount])):null),isShowingSigInsightWarnings&&react.createElement(insight_warnings.Z,{warnings:warnings,action:"signing",origin:origin,onCancel:function(){return setIsShowingSigInsightWarnings(!1)},onSubmit:function(){onSign(),setIsShowingSigInsightWarnings(!1)}}))};function _createMdxContent(props){let _components=Object.assign({h1:"h1",p:"p",h2:"h2"},(0,lib.ah)(),props.components);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(_components.h1,{id:"signature-request",children:"Signature Request"}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:"dApp requesting a signature from the user."}),"\n",(0,jsx_runtime.jsx)(dist.Xz,{children:(0,jsx_runtime.jsx)(dist.oG,{id:"components-app-signaturerequest--default-story"})}),"\n",(0,jsx_runtime.jsx)(_components.h2,{id:"props",children:"Props"}),"\n",(0,jsx_runtime.jsx)(dist.$4,{of:SignatureRequest})]})}function signature_request_stories_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){signature_request_stories_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}SignatureRequest.propTypes={txData:prop_types_default().object,warnings:prop_types_default().array};var signature_request_stories_store=(0,store.Z)(_object_spread_props(_object_spread({},test_data.Z),{metamask:_object_spread_props(_object_spread({},test_data.Z.metamask),{selectedAddress:"0xb19ac54efa18cc3a14a5b821bfec73d284bf0c5e"})}));let signature_request_stories={title:"Confirmations/Components/SignatureRequest",decorators:[function(story){return react.createElement(es.zt,{store:signature_request_stories_store},story())}],component:SignatureRequest,parameters:{docs:{page:function(props={}){let{wrapper:MDXLayout}=Object.assign({},(0,lib.ah)(),props.components);return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,Object.assign({},props,{children:(0,jsx_runtime.jsx)(_createMdxContent,props)})):_createMdxContent(props)}}},argTypes:{txData:{control:"object"}}};var DefaultStory=function(args){return react.createElement(SignatureRequest,args)};DefaultStory.storyName="Default",DefaultStory.args={txData:{msgParams:{from:"0xb19ac54efa18cc3a14a5b821bfec73d284bf0c5e",data:JSON.stringify({domain:{name:"happydapp.website"},message:{string:"haay wuurl",number:42},primaryType:"Mail",types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Group:[{name:"name",type:"string"},{name:"members",type:"Person[]"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person[]"},{name:"contents",type:"string"}],Person:[{name:"name",type:"string"},{name:"wallets",type:"address[]"}]}}),origin:"https://happydapp.website/"}}};var AccountMismatchStory=function(args){return react.createElement(SignatureRequest,args)};AccountMismatchStory.storyName="AccountMismatch",AccountMismatchStory.args=_object_spread_props(_object_spread({},DefaultStory.args),{txData:{msgParams:_object_spread_props(_object_spread({},DefaultStory.args.txData.msgParams),{from:"0x64a845a5b02460acf8a3d84503b0d68d028b4bb4"})}}),DefaultStory.parameters=_object_spread_props(_object_spread({},DefaultStory.parameters),{docs:_object_spread_props(_object_spread({},null===(_DefaultStory_parameters=DefaultStory.parameters)||void 0===_DefaultStory_parameters?void 0:_DefaultStory_parameters.docs),{source:_object_spread({originalSource:"args => {\n  return <SignatureRequest {...args} />;\n}"},null===(_DefaultStory_parameters1=DefaultStory.parameters)||void 0===_DefaultStory_parameters1?void 0:null===(_DefaultStory_parameters_docs=_DefaultStory_parameters1.docs)||void 0===_DefaultStory_parameters_docs?void 0:_DefaultStory_parameters_docs.source)})}),AccountMismatchStory.parameters=_object_spread_props(_object_spread({},AccountMismatchStory.parameters),{docs:_object_spread_props(_object_spread({},null===(_AccountMismatchStory_parameters=AccountMismatchStory.parameters)||void 0===_AccountMismatchStory_parameters?void 0:_AccountMismatchStory_parameters.docs),{source:_object_spread({originalSource:"args => {\n  return <SignatureRequest {...args} />;\n}"},null===(_AccountMismatchStory_parameters1=AccountMismatchStory.parameters)||void 0===_AccountMismatchStory_parameters1?void 0:null===(_AccountMismatchStory_parameters_docs=_AccountMismatchStory_parameters1.docs)||void 0===_AccountMismatchStory_parameters_docs?void 0:_AccountMismatchStory_parameters_docs.source)})})},"./ui/pages/confirmations/components/contract-details-modal/contract-details-modal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>ContractDetailsModal});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),dist=__webpack_require__("./node_modules/@metamask/etherscan-link/dist/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),name_controller_dist=__webpack_require__("./node_modules/@metamask/name-controller/dist/index.js"),box=__webpack_require__("./ui/components/ui/box/index.js"),button_component=__webpack_require__("./ui/components/ui/button/button.component.js"),tooltip=__webpack_require__("./ui/components/ui/tooltip/tooltip.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),identicon=__webpack_require__("./ui/components/ui/identicon/index.js"),send_utils=__webpack_require__("./ui/pages/confirmations/send/send.utils.js"),popover=__webpack_require__("./ui/components/ui/popover/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),useCopyToClipboard=__webpack_require__("./ui/hooks/useCopyToClipboard.js"),selectors=__webpack_require__("./ui/selectors/index.js"),transaction=__webpack_require__("./shared/constants/transaction.ts"),useNftsCollections=__webpack_require__("./ui/hooks/useNftsCollections.js");function NftCollectionImage(param){var _assetName_,_assetName__toUpperCase,collection,_tokenList_tokenAddress_toLowerCase,assetName=param.assetName,tokenAddress=param.tokenAddress,collections=(0,useNftsCollections.H)().collections,nftTokenListImage=null===(_tokenList_tokenAddress_toLowerCase=(0,es.v9)(selectors.HJ)[tokenAddress.toLowerCase()])||void 0===_tokenList_tokenAddress_toLowerCase?void 0:_tokenList_tokenAddress_toLowerCase.iconUrl;return react.createElement(box.ZP,null,(null==(collection=Object.values(collections).find(function(param){return param.collectionName===assetName}))?void 0:collection.collectionImage)||nftTokenListImage?react.createElement(identicon.Z,{diameter:24,image:(null==collection?void 0:collection.collectionImage)||nftTokenListImage}):react.createElement(box.ZP,{color:design_system.Il.overlayInverse,textAlign:design_system.PH.Center,className:"collection-image-alt"},null!==(_assetName__toUpperCase=null==assetName?void 0:null===(_assetName_=assetName[0])||void 0===_assetName_?void 0:_assetName_.toUpperCase())&&void 0!==_assetName__toUpperCase?_assetName__toUpperCase:null))}NftCollectionImage.propTypes={assetName:prop_types_default().string,tokenAddress:prop_types_default().string};var component_library=__webpack_require__("./ui/components/component-library/index.ts"),name_name=__webpack_require__("./ui/components/app/name/name.tsx"),usePetnamesEnabled=__webpack_require__("./ui/hooks/usePetnamesEnabled.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function ContractDetailsModal(param){var _addressBookEntry_data,_addressBookEntry_data1,onClose=param.onClose,tokenName=param.tokenName,tokenAddress=param.tokenAddress,toAddress=param.toAddress,chainId=param.chainId,rpcPrefs=param.rpcPrefs,tokenId=param.tokenId,assetName=param.assetName,assetStandard=param.assetStandard,isContractRequestingSignature=param.isContractRequestingSignature,t=(0,useI18nContext.C)(),_useCopyToClipboard=_sliced_to_array((0,useCopyToClipboard.m)(),2),copiedTokenAddress=_useCopyToClipboard[0],handleCopyTokenAddress=_useCopyToClipboard[1],_useCopyToClipboard1=_sliced_to_array((0,useCopyToClipboard.m)(),2),copiedToAddress=_useCopyToClipboard1[0],handleCopyToAddress=_useCopyToClipboard1[1],petnamesEnabled=(0,usePetnamesEnabled.A)(),addressBookEntry=(0,es.v9)(function(state){return{data:(0,selectors.e5t)(state,toAddress)}}),nft=assetStandard===transaction.Yn.ERC721||assetStandard===transaction.Yn.ERC1155||assetName&&tokenId||tokenName&&tokenId;return react.createElement(popover.Z,{className:"contract-details-modal"},react.createElement(box.ZP,{paddingTop:6,paddingRight:4,paddingBottom:8,paddingLeft:4,className:"contract-details-modal__content"},react.createElement(component_library.xv,{fontWeight:design_system.U9.Bold,variant:design_system.rK.bodyMd,as:"h5",display:design_system.sS.Flex},t("contractTitle")),react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"h6",display:design_system.sS.Flex,color:design_system.d9.textAlternative,marginTop:2},t("contractDescription")),!isContractRequestingSignature&&react.createElement(react.Fragment,null,react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"h6",display:design_system.sS.Flex,marginTop:4,marginBottom:2},t(nft?"contractNFT":"contractToken")),react.createElement(box.ZP,{display:design_system.sS.Flex,borderRadius:design_system.$u.SM,borderStyle:design_system.N4.solid,borderColor:design_system.kf.borderDefault,className:"contract-details-modal__content__contract"},nft?react.createElement(box.ZP,{margin:4},react.createElement(NftCollectionImage,{assetName:assetName,tokenAddress:tokenAddress})):react.createElement(identicon.Z,{className:"contract-details-modal__content__contract__identicon",address:tokenAddress,diameter:24}),react.createElement(box.ZP,{"data-testid":"recipient"},react.createElement(component_library.xv,{fontWeight:design_system.U9.Bold,variant:design_system.rK.bodyMd,as:"h5",marginTop:4},tokenName||(0,send_utils.ZB)(tokenAddress)),tokenName&&react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"h6",display:design_system.sS.Flex,color:design_system.d9.textAlternative,marginBottom:4},(0,send_utils.ZB)(tokenAddress))),react.createElement(box.ZP,{alignItems:design_system.g1.center,marginLeft:"auto",marginRight:4,gap:2},react.createElement(tooltip.Z,{position:"top",title:t(copiedTokenAddress?"copiedExclamation":"copyToClipboard")},react.createElement(component_library.Ei,{display:design_system.sS.Flex,iconName:copiedTokenAddress?component_library.uH.CopySuccess:component_library.uH.Copy,onClick:function(){return handleCopyTokenAddress(tokenAddress)},color:design_system.Il.iconMuted,ariaLabel:t(copiedTokenAddress?"copiedExclamation":"copyToClipboard")})),react.createElement(tooltip.Z,{position:"top",title:t("openInBlockExplorer")},react.createElement(component_library.Ei,{display:design_system.sS.Flex,iconName:component_library.uH.Export,color:design_system.Il.iconMuted,onClick:function(){var _rpcPrefs_blockExplorerUrl,blockExplorerTokenLink=(0,dist.getAccountLink)(tokenAddress,chainId,{blockExplorerUrl:null!==(_rpcPrefs_blockExplorerUrl=null==rpcPrefs?void 0:rpcPrefs.blockExplorerUrl)&&void 0!==_rpcPrefs_blockExplorerUrl?_rpcPrefs_blockExplorerUrl:null},null);__webpack_require__.g.platform.openTab({url:blockExplorerTokenLink})},ariaLabel:t("openInBlockExplorer")}))))),react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"h6",display:design_system.sS.Flex,marginTop:4,marginBottom:2},nft&&t("contractRequestingAccess"),isContractRequestingSignature&&t("contractRequestingSignature"),!nft&&!isContractRequestingSignature&&t("contractRequestingSpendingCap")),react.createElement(box.ZP,{display:design_system.sS.Flex,borderRadius:design_system.$u.SM,borderStyle:design_system.N4.solid,borderColor:design_system.kf.borderDefault,alignItems:design_system.g1.center,className:"contract-details-modal__content__contract"},!petnamesEnabled&&react.createElement(identicon.Z,{className:"contract-details-modal__content__contract__identicon",diameter:24,address:toAddress}),react.createElement(box.ZP,{"data-testid":"recipient"},petnamesEnabled?react.createElement(component_library.xv,{variant:design_system.rK.bodyMd,as:"h5"},react.createElement(name_name.Z,{value:toAddress,type:name_controller_dist.NameType.ETHEREUM_ADDRESS})):react.createElement(component_library.xv,{fontWeight:design_system.U9.Bold,variant:design_system.rK.bodyMd,as:"h5"},(null==addressBookEntry?void 0:null===(_addressBookEntry_data=addressBookEntry.data)||void 0===_addressBookEntry_data?void 0:_addressBookEntry_data.name)||(0,send_utils.ZB)(toAddress)),!petnamesEnabled&&(null==addressBookEntry?void 0:null===(_addressBookEntry_data1=addressBookEntry.data)||void 0===_addressBookEntry_data1?void 0:_addressBookEntry_data1.name)&&react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"h6",display:design_system.sS.Flex,color:design_system.d9.textAlternative,marginBottom:4},(0,send_utils.ZB)(toAddress))),react.createElement(box.ZP,{alignItems:design_system.g1.center,marginLeft:"auto",marginRight:4,gap:2},react.createElement(tooltip.Z,{position:"top",title:t(copiedToAddress?"copiedExclamation":"copyToClipboard")},react.createElement(component_library.Ei,{display:design_system.sS.Flex,iconName:copiedToAddress?component_library.uH.CopySuccess:component_library.uH.Copy,onClick:function(){return handleCopyToAddress(toAddress)},color:design_system.Il.iconMuted,ariaLabel:t(copiedTokenAddress?"copiedExclamation":"copyToClipboard")})),react.createElement(tooltip.Z,{position:"top",title:t("openInBlockExplorer")},react.createElement(component_library.Ei,{display:design_system.sS.Flex,iconName:component_library.uH.Export,color:design_system.Il.iconMuted,onClick:function(){var _rpcPrefs_blockExplorerUrl,blockExplorerTokenLink=(0,dist.getAccountLink)(toAddress,chainId,{blockExplorerUrl:null!==(_rpcPrefs_blockExplorerUrl=null==rpcPrefs?void 0:rpcPrefs.blockExplorerUrl)&&void 0!==_rpcPrefs_blockExplorerUrl?_rpcPrefs_blockExplorerUrl:null},null);__webpack_require__.g.platform.openTab({url:blockExplorerTokenLink})},ariaLabel:t("openInBlockExplorer")}))))),react.createElement(box.ZP,{display:design_system.sS.Flex,paddingTop:6,paddingRight:4,paddingBottom:6,paddingLeft:4},react.createElement(button_component.Z,{type:"primary",onClick:function(){return onClose()}},t("recoveryPhraseReminderConfirm"))))}ContractDetailsModal.propTypes={onClose:prop_types_default().func,tokenName:prop_types_default().string,tokenAddress:prop_types_default().string,toAddress:prop_types_default().string,chainId:prop_types_default().string,rpcPrefs:prop_types_default().object,tokenId:prop_types_default().string,assetStandard:prop_types_default().string,assetName:prop_types_default().string,isContractRequestingSignature:prop_types_default().bool}},"./ui/pages/confirmations/components/ledger-instruction-field/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>_ledger_instruction_field__WEBPACK_IMPORTED_MODULE_0__.Z});var _ledger_instruction_field__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/pages/confirmations/components/ledger-instruction-field/ledger-instruction-field.js")},"./ui/pages/confirmations/components/signature-request-header/signature-request-header.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>signature_request_header});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),es=__webpack_require__("./node_modules/react-redux/es/index.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),selectors=__webpack_require__("./ui/selectors/index.js"),confirm_tx_util=__webpack_require__("./ui/helpers/utils/confirm-tx.util.ts"),util=__webpack_require__("./ui/helpers/utils/util.js"),common=__webpack_require__("./shared/constants/common.ts"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts"),Numeric=__webpack_require__("./shared/modules/Numeric.ts"),network_account_balance_header=__webpack_require__("./ui/components/app/network-account-balance-header/network-account-balance-header.js"),SignatureRequestHeader=function(param){var txData=param.txData,t=(0,useI18nContext.C)(),from=txData.msgParams.from,allAccounts=(0,es.v9)(selectors.QT),fromAccount=(0,util.t)(allAccounts,from),nativeCurrency=(0,es.v9)(metamask.JK),currentCurrency=(0,es.v9)(selectors.TV3),currentChainId=(0,es.v9)(selectors.BVZ),providerConfig=(0,es.v9)(metamask.Vu),networkName=(0,util.Wf)(providerConfig.type),useNativeCurrencyAsPrimaryCurrency=(0,es.v9)(selectors.Izy).useNativeCurrencyAsPrimaryCurrency,conversionRateFromSelector=(0,es.v9)(selectors.tOe),conversionRate=useNativeCurrencyAsPrimaryCurrency?null:conversionRateFromSelector,currentNetwork=""===networkName?providerConfig.nickname||t("unknownNetwork"):t(networkName),balanceInBaseAsset=conversionRate?(0,confirm_tx_util.xG)((0,conversion_utils.nu)({value:fromAccount.balance,fromCurrency:nativeCurrency,toCurrency:currentCurrency,conversionRate:conversionRate,numberOfDecimals:6,toDenomination:common.E.ETH}),currentCurrency):new Numeric.D(fromAccount.balance,16,common.E.WEI).toDenomination(common.E.ETH).round(6).toBase(10).toString();return react.createElement(network_account_balance_header.Z,{networkName:currentNetwork,accountName:fromAccount.name,accountBalance:balanceInBaseAsset,tokenName:conversionRate?null==currentCurrency?void 0:currentCurrency.toUpperCase():nativeCurrency,accountAddress:fromAccount.address,chainId:currentChainId})};SignatureRequestHeader.propTypes={txData:prop_types_default().object.isRequired};let signature_request_header=SignatureRequestHeader},"./ui/pages/confirmations/components/signature-request/signature-request-data/signature-request-data.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>signature_request_data});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),dist=__webpack_require__("./node_modules/@metamask/name-controller/dist/index.js"),selectors=__webpack_require__("./ui/selectors/index.js"),copy_to_clipboard=__webpack_require__("./node_modules/copy-to-clipboard/index.js"),copy_to_clipboard_default=__webpack_require__.n(copy_to_clipboard),util=__webpack_require__("./ui/helpers/utils/util.js"),identicon=__webpack_require__("./ui/components/ui/identicon/index.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),nickname_popovers=__webpack_require__("./ui/components/app/modals/nickname-popovers/index.js"),copy=__webpack_require__("./shared/constants/copy.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var Address=function(param){var checksummedRecipientAddress=param.checksummedRecipientAddress,onRecipientClick=param.onRecipientClick,addressOnly=param.addressOnly,recipientEns=param.recipientEns,recipientName=param.recipientName,t=(0,useI18nContext.C)(),_useState=_sliced_to_array((0,react.useState)(!1),2),showNicknamePopovers=_useState[0],setShowNicknamePopovers=_useState[1],addressBookEntryObject=(0,es.v9)(selectors.FuL).find(function(entry){return entry.address.toLowerCase()===checksummedRecipientAddress.toLowerCase()}),recipientNickname=null==addressBookEntryObject?void 0:addressBookEntryObject.name,recipientMetadataName=(0,es.v9)(function(state){return(0,selectors._87)(state,checksummedRecipientAddress)}),recipientToRender=addressOnly?recipientName||recipientNickname||recipientMetadataName||recipientEns||(0,util.$Q)(checksummedRecipientAddress):recipientName||recipientNickname||recipientMetadataName||recipientEns||t("newContract");return react.createElement("div",{className:"tx-insight tx-insight-component tx-insight-component-address",onClick:function(){copy_to_clipboard_default()(checksummedRecipientAddress,copy.K),onRecipientClick&&onRecipientClick()}},react.createElement("div",{className:"tx-insight-component-address__sender-icon"},react.createElement(identicon.Z,{address:checksummedRecipientAddress,diameter:18})),react.createElement("div",{className:"tx-insight-component-address__name",onClick:function(){return setShowNicknamePopovers(!0)}},recipientToRender),showNicknamePopovers?react.createElement(nickname_popovers.Z,{onClose:function(){return setShowNicknamePopovers(!1)},address:checksummedRecipientAddress}):null)};Address.propTypes={checksummedRecipientAddress:prop_types_default().string,recipientName:prop_types_default().string,recipientEns:prop_types_default().string,addressOnly:prop_types_default().bool,onRecipientClick:prop_types_default().func};var hexstring_utils=__webpack_require__("./shared/modules/hexstring-utils.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),usePetnamesEnabled=__webpack_require__("./ui/hooks/usePetnamesEnabled.ts"),name_name=__webpack_require__("./ui/components/app/name/name.tsx");function signature_request_data_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function signature_request_data_array_with_holes(arr){if(Array.isArray(arr))return arr}function signature_request_data_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function signature_request_data_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function signature_request_data_sliced_to_array(arr,i){return signature_request_data_array_with_holes(arr)||signature_request_data_iterable_to_array_limit(arr,i)||signature_request_data_unsupported_iterable_to_array(arr,i)||signature_request_data_non_iterable_rest()}function signature_request_data_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return signature_request_data_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return signature_request_data_array_like_to_array(o,minLen)}}function SignatureRequestData(param){var data=param.data,internalAccounts=(0,es.v9)(selectors.z5O),petnamesEnabled=(0,usePetnamesEnabled.A)();return react.createElement(component_library.xu,{as:"ul",className:"signature-request-data__node"},Object.entries(data).map(function(param,i){var _param=signature_request_data_sliced_to_array(param,2),label=_param[0],_param_=_param[1],value=_param_.value,type=_param_.type;return react.createElement(component_library.xu,{as:"li",className:"signature-request-data__node",marginBottom:2,key:"".concat(label,"-").concat(i),paddingLeft:2,display:"object"!=typeof value||null===value?design_system.sS.Flex:null},react.createElement(component_library.xv,{as:"div",color:design_system.d9.textDefault,marginLeft:4,fontWeight:"object"==typeof value?design_system.U9.Bold:design_system.U9.Normal},(0,util.vJ)(label.charAt(0).toUpperCase()+label.slice(1)),":"," "),"object"==typeof value&&null!==value?react.createElement(SignatureRequestData,{data:value}):react.createElement(component_library.xv,{as:"div",color:design_system.d9.textDefault,marginLeft:4,className:"signature-request-data__node__value"},"address"===type&&(0,hexstring_utils.Pv)(value,{mixedCaseUseChecksum:!0})?react.createElement(component_library.xv,{variant:design_system.rK.bodySm,as:"div",color:design_system.d9.infoDefault,className:"signature-request-data__node__value__address"},petnamesEnabled?react.createElement(name_name.Z,{value:value,type:dist.NameType.ETHEREUM_ADDRESS}):react.createElement(Address,{addressOnly:!0,checksummedRecipientAddress:(0,hexstring_utils.QG)(value),recipientName:(0,selectors.PyB)(internalAccounts,value)})):(0,util.vJ)("".concat(value))))}))}SignatureRequestData.propTypes={data:prop_types_default().oneOfType([prop_types_default().object,prop_types_default().array]).isRequired};let signature_request_data=(0,react.memo)(SignatureRequestData,function(prevProps,nextProps){return(0,lodash.isEqual)(prevProps.data,nextProps.data)})},"./ui/pages/confirmations/components/signature-request/signature-request-message/signature-request-message.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>SignatureRequestMessage});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),i18n=__webpack_require__("./ui/contexts/i18n.js"),box=__webpack_require__("./ui/components/ui/box/index.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),signature_request_data=__webpack_require__("./ui/pages/confirmations/components/signature-request/signature-request-data/signature-request-data.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function SignatureRequestMessage(param){var data=param.data,onMessageScrolled=param.onMessageScrolled,setMessageRootRef=param.setMessageRootRef,messageRootRef=param.messageRootRef,messageIsScrollable=param.messageIsScrollable,primaryType=param.primaryType,t=(0,react.useContext)(i18n.OO),_useState=_sliced_to_array((0,react.useState)(!1),2),messageIsScrolled=_useState[0],setMessageIsScrolled=_useState[1];return react.createElement(box.ZP,{display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,onScroll:(0,lodash.debounce)(function(){messageRootRef&&!messageIsScrolled&&Math.round(messageRootRef.scrollTop)+messageRootRef.offsetHeight>=messageRootRef.scrollHeight&&(setMessageIsScrolled(!0),onMessageScrolled())},25),className:"signature-request-message"},messageIsScrollable?react.createElement(box.ZP,{display:design_system.sS.Flex,alignItems:design_system.g1.center,justifyContent:design_system.E0.center,borderColor:design_system.kf.borderDefault,backgroundColor:design_system.lP.backgroundDefault,color:design_system.Il.iconDefault,onClick:function(){setMessageIsScrolled(!0),onMessageScrolled(),null==messageRootRef||messageRootRef.scrollTo(0,null==messageRootRef?void 0:messageRootRef.scrollHeight)},className:"signature-request-message__scroll-button","data-testid":"signature-request-scroll-button"},react.createElement("i",{className:"fa fa-arrow-down","aria-label":t("scrollDown")})):null,react.createElement(box.ZP,{backgroundColor:design_system.lP.backgroundDefault,paddingBottom:3,paddingTop:3,paddingRight:3,margin:2,borderRadius:design_system.cM.XL,borderColor:design_system.kf.borderMuted,className:"signature-request-message__root",ref:setMessageRootRef},react.createElement(component_library.xv,{fontWeight:design_system.U9.Bold,color:design_system.d9.textDefault,marginLeft:4},primaryType),react.createElement(signature_request_data.Z,{data:data.value})))}SignatureRequestMessage.propTypes={data:prop_types_default().object.isRequired,onMessageScrolled:prop_types_default().func,setMessageRootRef:prop_types_default().func,messageRootRef:prop_types_default().object,messageIsScrollable:prop_types_default().bool,primaryType:prop_types_default().string}},"./node_modules/@blockaid/ppom_release/package.json":module=>{module.exports={i8:"1.4.1"}}}]);
//# sourceMappingURL=pages-confirmations-components-signature-request-signature-request-stories.416ac766.iframe.bundle.js.map