"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[79774],{"./shared/lib/confirmation.utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_I:()=>shouldUseRedesignForTransactions,ml:()=>shouldUseRedesignForSignatures,nO:()=>isCorrectDeveloperTransactionType});var _metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@metamask/transaction-controller/dist/types.mjs"),_metamask_controller_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@metamask/controller-utils/dist/constants.mjs");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _to_consumable_array(arr){return _array_without_holes(arr)||_iterable_to_array(arr)||_unsupported_iterable_to_array(arr)||_non_iterable_spread()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var REDESIGN_SIGNATURE_APPROVAL_TYPES=[_metamask_controller_utils__WEBPACK_IMPORTED_MODULE_0__.s.EthSignTypedData,_metamask_controller_utils__WEBPACK_IMPORTED_MODULE_0__.s.PersonalSign],REDESIGN_USER_TRANSACTION_TYPES=[_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_1__.D_.batch,_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_1__.D_.contractInteraction,_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_1__.D_.deployContract,_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_1__.D_.revokeDelegation,_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_1__.D_.tokenMethodApprove,_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_1__.D_.tokenMethodIncreaseAllowance,_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_1__.D_.tokenMethodSetApprovalForAll,_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_1__.D_.tokenMethodTransfer,_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_1__.D_.tokenMethodTransferFrom,_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_1__.D_.tokenMethodSafeTransferFrom,_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_1__.D_.simpleSend],REDESIGN_DEV_TRANSACTION_TYPES=_to_consumable_array(REDESIGN_USER_TRANSACTION_TYPES);function shouldUseRedesignForTransactions(param){var transactionMetadataType=param.transactionMetadataType;return shouldUseRedesignForTransactionsUserMode(transactionMetadataType)||shouldUseRedesignForTransactionsDeveloperMode(transactionMetadataType)}function shouldUseRedesignForSignatures(param){return isCorrectSignatureApprovalType(param.approvalType)}function isCorrectSignatureApprovalType(approvalType){return!!approvalType&&REDESIGN_SIGNATURE_APPROVAL_TYPES.includes(approvalType)}function isCorrectDeveloperTransactionType(transactionMetadataType){return!!transactionMetadataType&&REDESIGN_DEV_TRANSACTION_TYPES.includes(transactionMetadataType)}function isCorrectUserTransactionType(transactionMetadataType){return!!transactionMetadataType&&REDESIGN_USER_TRANSACTION_TYPES.includes(transactionMetadataType)}function shouldUseRedesignForTransactionsDeveloperMode(transactionMetadataType){return isCorrectDeveloperTransactionType(transactionMetadataType)}function shouldUseRedesignForTransactionsUserMode(transactionMetadataType){return isCorrectUserTransactionType(transactionMetadataType)}},"./ui/components/ui/origin-pill/origin-pill.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>OriginPill});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_selectors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/selectors/index.js"),_component_library__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/components/component-library/index.ts");function OriginPill(param){var origin=param.origin,dataTestId=param.dataTestId,style=param.style,textStyle=param.textStyle,tmp=((0,react_redux__WEBPACK_IMPORTED_MODULE_1__.d4)(_selectors__WEBPACK_IMPORTED_MODULE_3__.GqS)[origin]||{}).iconUrl;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_4__.az,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.nl.Flex,alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.k2.center,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.A9.center,marginTop:6,marginRight:4,marginLeft:4,padding:2,borderColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.cG.borderMuted,borderStyle:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.kD.solid,borderRadius:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.Z6.pill,borderWidth:1,"data-testid":dataTestId,style:style},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_4__.eK,{src:void 0===tmp?"":tmp,name:origin,"data-testid":"".concat(dataTestId,"-avatar-favicon")}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_4__.EY,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.J3.bodySm,as:"h6",color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.r7.textAlternative,marginLeft:1,"data-testid":"".concat(dataTestId,"-text"),style:textStyle,className:"origin-pill-text"},origin))}try{originpill.displayName="originpill",originpill.__docgenInfo={description:"",displayName:"originpill",props:{origin:{defaultValue:null,description:"",name:"origin",required:!0,type:{name:"string"}},dataTestId:{defaultValue:null,description:"",name:"dataTestId",required:!0,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},textStyle:{defaultValue:null,description:"",name:"textStyle",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/components/ui/origin-pill/origin-pill.tsx#originpill"]={docgenInfo:originpill.__docgenInfo,name:"originpill",path:"ui/components/ui/origin-pill/origin-pill.tsx#originpill"})}catch(__react_docgen_typescript_loader_error){}},"./ui/hooks/useModalProps.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>useModalProps});var react_redux__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-redux/es/index.js"),_store_actions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/store/actions.ts");function useModalProps(){var modalProps=(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.d4)(function(state){var _state_appState_modal_modalState;return null==(_state_appState_modal_modalState=state.appState.modal.modalState)?void 0:_state_appState_modal_modalState.props}),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.wA)();return{props:modalProps,hideModal:function(){return dispatch((0,_store_actions__WEBPACK_IMPORTED_MODULE_1__.hideModal)())}}}},"./ui/pages/confirmations/components/confirm/footer/origin-throttle-modal.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),_store_store__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/store/store.ts"),_test_data_mock_state_json__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./test/data/mock-state.json"),_origin_throttle_modal__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/pages/confirmations/components/confirm/footer/origin-throttle-modal.tsx");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}var store=(0,_store_store__WEBPACK_IMPORTED_MODULE_2__.A)({metamask:_object_spread({},_test_data_mock_state_json__WEBPACK_IMPORTED_MODULE_3__.metamask)});let __WEBPACK_DEFAULT_EXPORT__={title:"Confirmations/Components/Confirm/OriginThrottleModal",component:_origin_throttle_modal__WEBPACK_IMPORTED_MODULE_4__.A,decorators:[function(story){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_redux__WEBPACK_IMPORTED_MODULE_1__.Kq,{store:store},story())}]};var DefaultStory=function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_origin_throttle_modal__WEBPACK_IMPORTED_MODULE_4__.A,{isOpen:!0,onConfirmationCancel:function(){}})};DefaultStory.storyName="Default",DefaultStory.parameters={...DefaultStory.parameters,docs:{...DefaultStory.parameters?.docs,source:{originalSource:"() => <OriginThrottleModal isOpen={true} onConfirmationCancel={() => {}} />",...DefaultStory.parameters?.docs?.source}}};let __namedExportsOrder=["DefaultStory"]},"./ui/pages/confirmations/components/confirm/footer/origin-throttle-modal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>OriginThrottleModal});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_hooks_useModalProps__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/hooks/useModalProps.ts"),_components_component_library__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/component-library/index.ts"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_contexts_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/contexts/i18n.js"),_hooks_useOriginThrottling__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/pages/confirmations/hooks/useOriginThrottling.ts"),_components_ui_origin_pill_origin_pill__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/components/ui/origin-pill/origin-pill.tsx"),_shared_constants_metametrics__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./shared/constants/metametrics.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var MultipleRequestContent=function(param){var onConfirmationCancel=param.onConfirmationCancel,setIsTemporaryBlock=param.setIsTemporaryBlock,t=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_contexts_i18n__WEBPACK_IMPORTED_MODULE_4__.gJ),_useOriginThrottling=(0,_hooks_useOriginThrottling__WEBPACK_IMPORTED_MODULE_5__.l)(),origin=_useOriginThrottling.origin,resetOrigin=_useOriginThrottling.resetOrigin;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$m,{size:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.Eo.Md},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.az,{justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.A9.center,display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.nl.Flex,marginBottom:4},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.In,{name:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$M.Warning,size:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.lK.Xl,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.Li.warningDefault})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.rQ,{endAccessory:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null)},t("spamModalTitle")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_ui_origin_pill_origin_pill__WEBPACK_IMPORTED_MODULE_6__.A,{style:{marginTop:0,marginBottom:20},origin:origin,dataTestId:"origin-pill"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.cw,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{textAlign:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.nO.Center,as:"p","data-testid":"confirmation-text"},t("spamModalDescription"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.jl,{paddingTop:4,onSubmit:function(){onConfirmationCancel({location:_shared_constants_metametrics__WEBPACK_IMPORTED_MODULE_7__.If.OriginThrottleModal}),resetOrigin()},onCancel:function(){setIsTemporaryBlock(!0)},containerProps:{alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.k2.stretch,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.bo.Column},submitButtonProps:{children:t("cancel"),size:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.Mp.Lg},cancelButtonProps:{children:t("spamModalTemporaryBlockButton"),size:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.Mp.Lg}}))},OriginBlockedContent=function(param){var onConfirmationCancel=param.onConfirmationCancel,t=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_contexts_i18n__WEBPACK_IMPORTED_MODULE_4__.gJ);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$m,{size:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.Eo.Md},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.az,{justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.A9.center,display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.nl.Flex,marginBottom:4},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.In,{name:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$M.Confirmation,size:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.lK.Xl,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.Li.successDefault})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.rQ,{endAccessory:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null)},t("spamModalBlockedTitle")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.cw,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{textAlign:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.nO.Center,as:"p","data-testid":"confirmation-text"},t("spamModalBlockedDescription"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.jl,{paddingTop:4,onSubmit:function(){return onConfirmationCancel({location:_shared_constants_metametrics__WEBPACK_IMPORTED_MODULE_7__.If.OriginThrottleModal})},submitButtonProps:{children:t("gotIt"),size:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.Mp.Lg}}))};function OriginThrottleModal(param){var isOpen=param.isOpen,onConfirmationCancel=param.onConfirmationCancel,hideModal=(0,_hooks_useModalProps__WEBPACK_IMPORTED_MODULE_1__.f)().hideModal,_useState=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),isTemporaryBlock=_useState[0],setIsTemporaryBlock=_useState[1];return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.aF,{isOpen:isOpen,onClose:function(){hideModal()},isClosedOnOutsideClick:!1,isClosedOnEscapeKey:!1},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.mH,{"data-testid":"modal-overlay"}),isTemporaryBlock?react__WEBPACK_IMPORTED_MODULE_0__.createElement(OriginBlockedContent,{onConfirmationCancel:onConfirmationCancel}):react__WEBPACK_IMPORTED_MODULE_0__.createElement(MultipleRequestContent,{onConfirmationCancel:onConfirmationCancel,setIsTemporaryBlock:setIsTemporaryBlock}))}try{originthrottlemodal.displayName="originthrottlemodal",originthrottlemodal.__docgenInfo={description:"",displayName:"originthrottlemodal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onConfirmationCancel:{defaultValue:null,description:"",name:"onConfirmationCancel",required:!0,type:{name:"({ location, }: { location?: MetaMetricsEventLocation | undefined; }) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/confirmations/components/confirm/footer/origin-throttle-modal.tsx#originthrottlemodal"]={docgenInfo:originthrottlemodal.__docgenInfo,name:"originthrottlemodal",path:"ui/pages/confirmations/components/confirm/footer/origin-throttle-modal.tsx#originthrottlemodal"})}catch(__react_docgen_typescript_loader_error){}},"./ui/pages/confirmations/hooks/useCurrentConfirmation.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>hooks_useCurrentConfirmation});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),react_router=__webpack_require__("./node_modules/react-router-dom/node_modules/react-router/esm/react-router.js"),selectors=__webpack_require__("./ui/selectors/index.js"),reselect=__webpack_require__("./node_modules/reselect/dist/reselect.mjs"),util=__webpack_require__("./shared/modules/selectors/util.js"),transactions=__webpack_require__("./ui/selectors/transactions.js");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}var selectUnapprovedMessages=(0,reselect.Mz)(transactions.cY,transactions.uJ,function(personalMsgs,typedMessages){return _object_spread({},personalMsgs,typedMessages)}),internalSelectUnapprovedMessage=(0,reselect.Mz)(selectUnapprovedMessages,function(_state,messageId){return messageId},function(messages,messageId){return messages[messageId]}),selectUnapprovedMessage=(0,util._)(internalSelectUnapprovedMessage,function(message){return message}),confirmation_utils=__webpack_require__("./shared/lib/confirmation.utils.ts");let hooks_useCurrentConfirmation=function(){var paramsConfirmationId=(0,react_router.g)().id,oldestPendingApproval=(0,es.d4)(selectors.dMC),confirmationId=null!=paramsConfirmationId?paramsConfirmationId:null==oldestPendingApproval?void 0:oldestPendingApproval.id,pendingApproval=(0,es.d4)(function(state){return(0,selectors.ll0)(state,confirmationId)}),transactionMetadata=(0,es.d4)(function(state){return(0,selectors.jJ$)(state,confirmationId)}),signatureMessage=(0,es.d4)(function(state){return selectUnapprovedMessage(state,confirmationId)}),useRedesignedForSignatures=(0,confirmation_utils.ml)({approvalType:null==pendingApproval?void 0:pendingApproval.type}),useRedesignedForTransaction=(0,confirmation_utils._I)({transactionMetadataType:null==transactionMetadata?void 0:transactionMetadata.type}),shouldUseRedesign=useRedesignedForSignatures||useRedesignedForTransaction;return(0,react.useMemo)(function(){var _ref;return shouldUseRedesign?{currentConfirmation:null!=(_ref=null!=transactionMetadata?transactionMetadata:signatureMessage)?_ref:void 0}:{currentConfirmation:void 0}},[transactionMetadata,signatureMessage,shouldUseRedesign])}},"./ui/pages/confirmations/hooks/useOriginThrottling.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>useOriginThrottling});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),_store_actions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/__mocks__/actions.js"),_selectors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/selectors/index.js"),_useCurrentConfirmation__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/pages/confirmations/hooks/useCurrentConfirmation.ts"),willNextRejectionReachThreshold=function(originState){if(!originState)return!1;var currentTime=Date.now(),rejections=originState.rejections,lastRejection=originState.lastRejection;return rejections+1>=3&&currentTime-lastRejection<=3e4};function useOriginThrottling(){var _currentConfirmation_messageParams,dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.wA)(),throttledOrigins=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.d4)(_selectors__WEBPACK_IMPORTED_MODULE_3__.OXP),currentConfirmation=(0,_useCurrentConfirmation__WEBPACK_IMPORTED_MODULE_4__.A)().currentConfirmation,origin=(null==currentConfirmation?void 0:currentConfirmation.origin)||(null==currentConfirmation||null==(_currentConfirmation_messageParams=currentConfirmation.messageParams)?void 0:_currentConfirmation_messageParams.origin),shouldThrottleOrigin=willNextRejectionReachThreshold(throttledOrigins[origin]),resetOrigin=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(){dispatch((0,_store_actions__WEBPACK_IMPORTED_MODULE_2__.updateThrottledOriginState)(origin,{rejections:0,lastRejection:0}))},[dispatch,origin]);return{origin:origin,resetOrigin:resetOrigin,shouldThrottleOrigin:shouldThrottleOrigin}}}}]);