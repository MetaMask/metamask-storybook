"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[70178],{"./ui/components/app/confirm/info/row/constants.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{GH:()=>AlertActionKey,Oh:()=>TEST_ADDRESS,oE:()=>RowAlertKey});var TEST_ADDRESS="0x5CfE73b6021E818B776b421B1c4Db2474086a7e1",RowAlertKey=function(RowAlertKey){return RowAlertKey.AccountTypeUpgrade="accountTypeUpgrade",RowAlertKey.EstimatedFee="estimatedFee",RowAlertKey.SigningInWith="signingInWith",RowAlertKey.RequestFrom="requestFrom",RowAlertKey.Network="network",RowAlertKey.Resimulation="resimulation",RowAlertKey.Speed="speed",RowAlertKey.InteractingWith="interactingWith",RowAlertKey.EstimatedChangesStatic="estimatedChangesStatic",RowAlertKey}({}),AlertActionKey=function(AlertActionKey){return AlertActionKey.Buy="buy",AlertActionKey.ShowAdvancedGasFeeModal="showAdvancedGasModal",AlertActionKey.ShowGasFeeModal="showGasFeeModal",AlertActionKey.ShowPendingConfirmation="showPendingConfirmation",AlertActionKey}({})},"./ui/components/app/confirm/info/row/section.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>ConfirmInfoSection});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_component_library__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/components/component-library/index.ts"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/helpers/constants/design-system.ts"),ConfirmInfoSection=function(param){var children=param.children,noPadding=param.noPadding,_param_style=param.style,dataTestId=param["data-testid"];return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.az,{"data-testid":dataTestId,backgroundColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.i0.backgroundDefault,borderRadius:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_2__.Z6.MD,padding:2*!noPadding,marginBottom:4,style:void 0===_param_style?{}:_param_style},children)};try{ConfirmInfoSection.displayName="ConfirmInfoSection",ConfirmInfoSection.__docgenInfo={description:"",displayName:"ConfirmInfoSection",props:{noPadding:{defaultValue:null,description:"",name:"noPadding",required:!1,type:{name:"boolean"}},style:{defaultValue:{value:"{}"},description:"",name:"style",required:!1,type:{name:"CSSProperties"}},"data-testid":{defaultValue:null,description:"",name:"data-testid",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/components/app/confirm/info/row/section.tsx#ConfirmInfoSection"]={docgenInfo:ConfirmInfoSection.__docgenInfo,name:"ConfirmInfoSection",path:"ui/components/app/confirm/info/row/section.tsx#ConfirmInfoSection"})}catch(__react_docgen_typescript_loader_error){}},"./ui/components/app/name/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>_name__WEBPACK_IMPORTED_MODULE_0__.A});var _name__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/app/name/name.tsx")},"./ui/hooks/useFiatFormatter.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>useFiatFormatter});var react_redux__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-redux/es/index.js"),_ducks_locale_locale__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/ducks/locale/locale.ts"),_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/ducks/metamask/metamask.js"),_helpers_utils_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/utils/util.js"),useFiatFormatter=function(){var locale=(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.d4)(_ducks_locale_locale__WEBPACK_IMPORTED_MODULE_1__.gA),fiatCurrency=(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.d4)(_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_2__.Fx);return function(fiatAmount){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},shorten=options.shorten,truncatedCharLimit=options.truncatedCharLimit,truncatedStartChars=options.truncatedStartChars;try{var formatter=new Intl.NumberFormat(locale,{style:"currency",currency:fiatCurrency});if(!shorten)return formatter.format(fiatAmount);var parts=formatter.formatToParts(fiatAmount),currencySymbol="",numberString="";parts.forEach(function(part){"currency"===part.type?currencySymbol+=part.value:numberString+=part.value});var shortenedNumberString=(0,_helpers_utils_util__WEBPACK_IMPORTED_MODULE_3__.l1)(numberString,{truncatedCharLimit:null!=truncatedCharLimit?truncatedCharLimit:15,truncatedStartChars:null!=truncatedStartChars?truncatedStartChars:12,truncatedEndChars:0,skipCharacterInEnd:!0});return parts.findIndex(function(part){return"currency"===part.type})<parts.findIndex(function(part){return"integer"===part.type})?"".concat(currencySymbol).concat(shortenedNumberString):"".concat(shortenedNumberString).concat(currencySymbol)}catch(error){var formattedNumber=new Intl.NumberFormat(locale).format(fiatAmount),shortenedNumberString1=(0,_helpers_utils_util__WEBPACK_IMPORTED_MODULE_3__.l1)(formattedNumber,{truncatedCharLimit:15,truncatedStartChars:12,truncatedEndChars:0,skipCharacterInEnd:!0});if(shorten)return"".concat(shortenedNumberString1," ").concat(fiatCurrency);return"".concat(formattedNumber," ").concat(fiatCurrency)}}}},"./ui/pages/confirmations/components/modals/simulation-settings-modal/simulation-settings-modal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>SimulationSettingsModal});var react=__webpack_require__("./node_modules/react/index.js"),types=__webpack_require__("./node_modules/@metamask/transaction-controller/dist/types.mjs"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),toggle_button=__webpack_require__("./ui/components/ui/toggle-button/index.js"),context_confirm=__webpack_require__("./ui/pages/confirmations/context/confirm/index.tsx"),actions=__webpack_require__("./ui/store/actions.ts"),selectors_confirm=__webpack_require__("./ui/pages/confirmations/selectors/confirm.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _to_consumable_array(arr){return _array_without_holes(arr)||_iterable_to_array(arr)||_unsupported_iterable_to_array(arr)||_non_iterable_spread()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function _ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var Section=function(param){var children=param.children;return react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Column,backgroundColor:design_system.i0.backgroundAlternative,borderRadius:design_system.Z6.MD,padding:2,gap:2},children)},EnforceToggle=function(param){var enabled=param.enabled,onChange=param.onChange,t=(0,useI18nContext.P)();return react.createElement(Section,null,react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Row,justifyContent:design_system.A9.spaceBetween,alignItems:design_system.k2.center,style:{marginRight:"-12px"}},react.createElement(component_library.EY,{variant:design_system.J3.bodyMdMedium},t("simulationSettingsModalEnforceToggle")),react.createElement(toggle_button.A,{dataTestId:"simulation-settings-modal-enable-enforced",value:enabled,onToggle:function(){return null==onChange?void 0:onChange(!enabled)}})),react.createElement(component_library.EY,{variant:design_system.J3.bodyMd,color:design_system.r7.textAlternativeSoft},t("simulationSettingsModalEnforceToggleDescription")))},Slippage=function(param){var onChange=param.onChange,slippage=param.slippage,t=(0,useI18nContext.P)();return react.createElement(Section,null,react.createElement(component_library.EY,{variant:design_system.J3.bodyMdMedium},t("simulationSettingsModalEnforceSlippage")),react.createElement(component_library.A_,{"data-testid":"simulation-settings-modal-slippage-custom-input",type:component_library.ux.Number,onChange:function(e){return null==onChange?void 0:onChange(Number(e.target.value))},value:slippage,endAccessory:"%"}),react.createElement(component_library.EY,{variant:design_system.J3.bodyMd,color:design_system.r7.textAlternativeSoft},t("simulationSettingsModalEnforceSlippageDescription")))};function useSimulationSettings(){var _ref=(0,context_confirm.TW)().currentConfirmation||{},containerTypes=_ref.containerTypes,transactionId=_ref.id,isEnforcedSimulationsEnabled=(0,es.d4)(function(state){return(0,selectors_confirm.UT)(state,transactionId)}),isEnforcedSimulationApplied=null==containerTypes?void 0:containerTypes.includes(types.UI.EnforcedSimulations),savedSlippage=(0,es.d4)(function(state){return(0,selectors_confirm.im)(state,transactionId)}),_useState=_sliced_to_array((0,react.useState)(isEnforcedSimulationsEnabled),2),enabled=_useState[0],setEnabled=_useState[1],_useState1=_sliced_to_array((0,react.useState)(savedSlippage),2),slippage=_useState1[0],setSlippage=_useState1[1],updateSettings=(0,react.useCallback)(function(){return _async_to_generator(function(){var slippageUpdated,isEnabled,isDisabled,newContainerTypes;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(slippageUpdated=slippage!==savedSlippage,isEnabled=enabled&&!isEnforcedSimulationApplied,isDisabled=!enabled&&isEnforcedSimulationApplied,!slippageUpdated)return[3,2];return[4,(0,actions.setEnforcedSimulationsSlippageForTransaction)(transactionId,slippage)];case 1:_state.sent(),_state.label=2;case 2:if(newContainerTypes=_to_consumable_array(null!=containerTypes?containerTypes:[]),isEnabled&&newContainerTypes.push(types.UI.EnforcedSimulations),!isDisabled)return[3,4];return newContainerTypes.splice(newContainerTypes.indexOf(types.UI.EnforcedSimulations),1),[4,(0,actions.setEnableEnforcedSimulationsForTransaction)(transactionId,!1)];case 3:_state.sent(),_state.label=4;case 4:if(!(newContainerTypes.length!==(null==containerTypes?void 0:containerTypes.length)||slippageUpdated))return[3,6];return[4,(0,actions.applyTransactionContainersExisting)(transactionId,newContainerTypes)];case 5:_state.sent(),_state.label=6;case 6:if(!isEnabled)return[3,8];return[4,(0,actions.setEnableEnforcedSimulationsForTransaction)(transactionId,!0)];case 7:_state.sent(),_state.label=8;case 8:return[2]}})})()},[containerTypes,enabled,isEnforcedSimulationApplied,savedSlippage,slippage,transactionId]);return{enabled:enabled,setEnabled:setEnabled,slippage:slippage,setSlippage:setSlippage,updateSettings:updateSettings}}var SimulationSettingsModal=function(param){var onClose=param.onClose,t=(0,useI18nContext.P)(),_useSimulationSettings=useSimulationSettings(),enabled=_useSimulationSettings.enabled,setEnabled=_useSimulationSettings.setEnabled,slippage=_useSimulationSettings.slippage,setSlippage=_useSimulationSettings.setSlippage,updateSettings=_useSimulationSettings.updateSettings,handleUpdateClick=(0,react.useCallback)(function(){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,updateSettings()];case 1:return _state.sent(),null==onClose||onClose(),[2]}})})()},[updateSettings,onClose]);return react.createElement(component_library.aF,{isOpen:!0,onClose:null!=onClose?onClose:function(){},isClosedOnOutsideClick:!1,isClosedOnEscapeKey:!1},react.createElement(component_library.mH,{"data-testid":"modal-overlay"}),react.createElement(component_library.$m,{size:component_library.Eo.Md},react.createElement(component_library.rQ,{onClose:onClose},t("simulationSettingsModalTitle")),react.createElement(component_library.cw,{display:design_system.nl.Flex,flexDirection:design_system.bo.Column,gap:3},react.createElement(EnforceToggle,{enabled:enabled,onChange:setEnabled}),enabled&&react.createElement(Slippage,{slippage:slippage,onChange:setSlippage}),react.createElement(component_library.$$,{onClick:handleUpdateClick,"data-testid":"simulation-settings-modal-update"},t("update")))))};try{SimulationSettingsModal.displayName="SimulationSettingsModal",SimulationSettingsModal.__docgenInfo={description:"",displayName:"SimulationSettingsModal",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/confirmations/components/modals/simulation-settings-modal/simulation-settings-modal.tsx#SimulationSettingsModal"]={docgenInfo:SimulationSettingsModal.__docgenInfo,name:"SimulationSettingsModal",path:"ui/pages/confirmations/components/modals/simulation-settings-modal/simulation-settings-modal.tsx#SimulationSettingsModal"})}catch(__react_docgen_typescript_loader_error){}},"./ui/pages/confirmations/components/simulation-details/asset-pill.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>AssetPill});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_metamask_name_controller__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@metamask/name-controller/dist/types.mjs"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),_components_component_library__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/component-library/index.ts"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_components_app_name__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/components/app/name/index.ts"),_shared_constants_transaction__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./shared/constants/transaction.ts"),_shared_modules_selectors_networks__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./shared/modules/selectors/networks.ts"),_shared_constants_network__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./shared/constants/network.ts"),NativeAssetPill=function(param){var chainId=param.chainId,imgSrc=_shared_constants_network__WEBPACK_IMPORTED_MODULE_7__.RBA[chainId],networkConfigurationsByChainId=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.d4)(_shared_modules_selectors_networks__WEBPACK_IMPORTED_MODULE_6__.hX),nativeCurrency=(null==networkConfigurationsByChainId?void 0:networkConfigurationsByChainId[chainId]).nativeCurrency;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.az,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.nl.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.bo.Row,borderRadius:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.Z6.pill,alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.k2.center,backgroundColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.i0.backgroundAlternative,gap:1,style:{padding:"1px 8px 1px 4px"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.Gn,{name:nativeCurrency,size:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.LM.Xs,src:imgSrc,borderColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.cG.borderDefault}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{ellipsis:!0,variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.J3.bodyMd},nativeCurrency))},AssetPill=function(param){var asset=param.asset,chainId=asset.chainId;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.az,{"data-testid":"simulation-details-asset-pill",style:{flexShrink:1,flexBasis:"auto",minWidth:0}},asset.standard===_shared_constants_transaction__WEBPACK_IMPORTED_MODULE_5__.ph.none?react__WEBPACK_IMPORTED_MODULE_0__.createElement(NativeAssetPill,{chainId:chainId}):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_app_name__WEBPACK_IMPORTED_MODULE_4__.A,{preferContractSymbol:!0,type:_metamask_name_controller__WEBPACK_IMPORTED_MODULE_8__.k.ETHEREUM_ADDRESS,value:asset.address,variation:chainId}))};try{AssetPill.displayName="AssetPill",AssetPill.__docgenInfo={description:"Displays a pill with an asset's icon and name.",displayName:"AssetPill",props:{asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"AssetIdentifier"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/confirmations/components/simulation-details/asset-pill.tsx#AssetPill"]={docgenInfo:AssetPill.__docgenInfo,name:"AssetPill",path:"ui/pages/confirmations/components/simulation-details/asset-pill.tsx#AssetPill"})}catch(__react_docgen_typescript_loader_error){}},"./ui/pages/confirmations/components/simulation-details/fiat-display.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{LJ:()=>TotalFiatDisplay,Z9:()=>calculateTotalFiat,m8:()=>IndividualFiatDisplay});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),bignumber_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/bignumber.js/bignumber.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/hooks/useI18nContext.js"),_components_component_library__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/components/component-library/index.ts"),_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/components/ui/tooltip/index.js"),_hooks_useFiatFormatter__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/hooks/useFiatFormatter.ts"),_selectors__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ui/selectors/index.js"),_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ui/pages/confirmations/components/simulation-details/types.ts");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var textStyle={color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.r7.textAlternative,variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_3__.J3.bodySm,paddingRight:2,textAlign:"right"},FiatNotAvailableDisplay=function(){var t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_4__.P)();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_5__.EY,textStyle,t("simulationDetailsFiatNotAvailable"))};function calculateTotalFiat(fiatAmounts){return fiatAmounts.reduce(function(total,fiat){return total+(fiat===_types__WEBPACK_IMPORTED_MODULE_9__.k?0:fiat)},0)}var IndividualFiatDisplay=function(param){var fiatAmount=param.fiatAmount,_param_shorten=param.shorten,shorten=void 0!==_param_shorten&&_param_shorten,shouldShowFiat=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.d4)(_selectors__WEBPACK_IMPORTED_MODULE_8__.rrv),fiatFormatter=(0,_hooks_useFiatFormatter__WEBPACK_IMPORTED_MODULE_7__.y)();if(!shouldShowFiat||fiatAmount===_types__WEBPACK_IMPORTED_MODULE_9__.k)return null;var absFiat=Math.abs(fiatAmount),fiatDisplayValue=absFiat&&new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(String(absFiat)).lt(new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(.01))&&new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(String(absFiat)).greaterThan(new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(0))?"< ".concat(fiatFormatter(.01,{shorten:shorten})):fiatFormatter(absFiat,{shorten:shorten});return shorten?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_ui_tooltip__WEBPACK_IMPORTED_MODULE_6__.A,{position:"bottom",title:fiatDisplayValue,interactive:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_5__.EY,_object_spread_props(_object_spread({},textStyle),{"data-testid":"individual-fiat-display"}),fiatDisplayValue)):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_5__.EY,_object_spread_props(_object_spread({},textStyle),{"data-testid":"individual-fiat-display"}),fiatDisplayValue)},TotalFiatDisplay=function(param){var fiatAmounts=param.fiatAmounts,shouldShowFiat=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.d4)(_selectors__WEBPACK_IMPORTED_MODULE_8__.rrv),t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_4__.P)(),fiatFormatter=(0,_hooks_useFiatFormatter__WEBPACK_IMPORTED_MODULE_7__.y)(),totalFiat=calculateTotalFiat(fiatAmounts);if(!shouldShowFiat)return null;var totalFiatShorten=fiatFormatter(Math.abs(totalFiat),{shorten:!0,truncatedCharLimit:20,truncatedStartChars:17});return 0===totalFiat?react__WEBPACK_IMPORTED_MODULE_0__.createElement(FiatNotAvailableDisplay,null):react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_5__.EY,textStyle,t("simulationDetailsTotalFiat",[totalFiatShorten]))};try{calculateTotalFiat.displayName="calculateTotalFiat",calculateTotalFiat.__docgenInfo={description:"",displayName:"calculateTotalFiat",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/confirmations/components/simulation-details/fiat-display.tsx#calculateTotalFiat"]={docgenInfo:calculateTotalFiat.__docgenInfo,name:"calculateTotalFiat",path:"ui/pages/confirmations/components/simulation-details/fiat-display.tsx#calculateTotalFiat"})}catch(__react_docgen_typescript_loader_error){}try{IndividualFiatDisplay.displayName="IndividualFiatDisplay",IndividualFiatDisplay.__docgenInfo={description:"Displays the fiat value of a single balance change.",displayName:"IndividualFiatDisplay",props:{fiatAmount:{defaultValue:null,description:"",name:"fiatAmount",required:!0,type:{name:"FiatAmount"}},shorten:{defaultValue:{value:"false"},description:"",name:"shorten",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/confirmations/components/simulation-details/fiat-display.tsx#IndividualFiatDisplay"]={docgenInfo:IndividualFiatDisplay.__docgenInfo,name:"IndividualFiatDisplay",path:"ui/pages/confirmations/components/simulation-details/fiat-display.tsx#IndividualFiatDisplay"})}catch(__react_docgen_typescript_loader_error){}try{TotalFiatDisplay.displayName="TotalFiatDisplay",TotalFiatDisplay.__docgenInfo={description:"Displays the total fiat value of a list of balance changes.",displayName:"TotalFiatDisplay",props:{fiatAmounts:{defaultValue:null,description:"",name:"fiatAmounts",required:!0,type:{name:"FiatAmount[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/confirmations/components/simulation-details/fiat-display.tsx#TotalFiatDisplay"]={docgenInfo:TotalFiatDisplay.__docgenInfo,name:"TotalFiatDisplay",path:"ui/pages/confirmations/components/simulation-details/fiat-display.tsx#TotalFiatDisplay"})}catch(__react_docgen_typescript_loader_error){}},"./ui/pages/confirmations/components/simulation-details/simulation-details.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>SimulationDetails});var types=__webpack_require__("./node_modules/@metamask/transaction-controller/dist/types.mjs"),react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),alertMetricsContext=__webpack_require__("./ui/components/app/alert-system/contexts/alertMetricsContext.tsx"),inline_alert=__webpack_require__("./ui/components/app/alert-system/inline-alert/inline-alert.tsx"),multiple_alert_modal=__webpack_require__("./ui/components/app/alert-system/multiple-alert-modal/index.tsx"),alert_row=__webpack_require__("./ui/components/app/confirm/info/row/alert-row/alert-row.tsx"),constants=__webpack_require__("./ui/components/app/confirm/info/row/constants.ts"),section=__webpack_require__("./ui/components/app/confirm/info/row/section.tsx"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),preloader_icon_component=__webpack_require__("./ui/components/ui/icon/preloader/preloader-icon.component.js"),tooltip=__webpack_require__("./ui/components/ui/tooltip/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),useAlerts=__webpack_require__("./ui/hooks/useAlerts.ts"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),selectors=__webpack_require__("./ui/selectors/index.js"),simulation_settings_modal=__webpack_require__("./ui/pages/confirmations/components/modals/simulation-settings-modal/simulation-settings-modal.tsx"),preferences=__webpack_require__("./ui/pages/confirmations/selectors/preferences.ts"),dist_constants=__webpack_require__("./node_modules/@metamask/controller-utils/dist/constants.mjs"),context_confirm=__webpack_require__("./ui/pages/confirmations/context/confirm/index.tsx"),process=__webpack_require__("./node_modules/process/browser.js");function useIsEnforcedSimulationsSupported(){var _simulationData_tokenBalanceChanges,currentConfirmation=(0,context_confirm.TW)().currentConfirmation,delegationAddress=currentConfirmation.delegationAddress,origin=currentConfirmation.origin,simulationData=currentConfirmation.simulationData,isInternalOrigin=!origin||origin===dist_constants.jt,hasBalanceChanges=!!(null==simulationData?void 0:simulationData.nativeBalanceChange)||!!(null==simulationData||null==(_simulationData_tokenBalanceChanges=simulationData.tokenBalanceChanges)?void 0:_simulationData_tokenBalanceChanges.length);return process.env.ENABLE_ENFORCED_SIMULATIONS&&!isInternalOrigin&&!!delegationAddress&&hasBalanceChanges}var asset_pill=__webpack_require__("./ui/pages/confirmations/components/simulation-details/asset-pill.tsx"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts"),transaction=__webpack_require__("./shared/constants/transaction.ts"),locale_locale=__webpack_require__("./ui/ducks/locale/locale.ts"),util=__webpack_require__("./ui/helpers/utils/util.js"),formatAmount=__webpack_require__("./ui/pages/confirmations/components/simulation-details/formatAmount.ts"),AmountPill=function(param){var asset=param.asset,amount=param.amount,isApproval=param.isApproval,isAllApproval=param.isAllApproval,isUnlimitedApproval=param.isUnlimitedApproval,t=(0,useI18nContext.P)(),locale=(0,es.d4)(locale_locale.gA),backgroundColor=getBackgroundColour({amount:amount,isApproval:isApproval}),color=getColor({amount:amount,isApproval:isApproval}),amountParts=[],tooltipParts=[];if(isApproval||amountParts.push(amount.isNegative()?"-":"+"),asset.standard!==transaction.ph.ERC721&&!isAllApproval){var formattedAmount=isUnlimitedApproval?t("unlimited"):(0,formatAmount.e)(locale,amount.abs()),fullPrecisionAmount=(0,formatAmount.o)(locale,amount.abs());amountParts.push(formattedAmount),tooltipParts.push(fullPrecisionAmount)}if(asset.tokenId){var decimalTokenId=(0,conversion_utils.I0)(asset.tokenId),shortenedDecimalTokenId=(0,util.l1)(decimalTokenId,{truncatedCharLimit:11,truncatedStartChars:4,truncatedEndChars:4,skipCharacterInEnd:!1}),tooltipIdPart="#".concat(decimalTokenId);amountParts.push("#".concat(shortenedDecimalTokenId)),tooltipParts.push(tooltipIdPart)}return isAllApproval&&(amountParts.push(t("all")),tooltipParts.push(t("all"))),react.createElement(component_library.az,{"data-testid":"simulation-details-amount-pill",display:design_system.nl.Flex,flexDirection:design_system.bo.Row,backgroundColor:backgroundColor,alignItems:design_system.k2.center,borderRadius:design_system.Z6.pill,style:{padding:"0px 8px",flexShrink:1,flexBasis:"auto",minWidth:0}},react.createElement(tooltip.A,{position:"bottom",title:tooltipParts.join(" "),wrapperStyle:{minWidth:0},theme:"word-break-all",interactive:!0},react.createElement(component_library.EY,{ellipsis:!0,variant:design_system.J3.bodyMd,color:color},amountParts.join(" "))))};function getBackgroundColour(param){var amount=param.amount;return param.isApproval?design_system.i0.backgroundMuted:amount.isNegative()?design_system.i0.errorMuted:design_system.i0.successMuted}function getColor(param){var amount=param.amount;return param.isApproval?design_system.r7.textDefault:amount.isNegative()?design_system.r7.errorAlternative:design_system.r7.successDefault}try{AmountPill.displayName="AmountPill",AmountPill.__docgenInfo={description:`Displays a pill with an amount and a background color indicating whether the amount
is an increase or decrease.`,displayName:"AmountPill",props:{asset:{defaultValue:null,description:"",name:"asset",required:!0,type:{name:"AssetIdentifier"}},amount:{defaultValue:null,description:"",name:"amount",required:!0,type:{name:"BigNumber"}},isApproval:{defaultValue:null,description:"",name:"isApproval",required:!1,type:{name:"boolean"}},isAllApproval:{defaultValue:null,description:"",name:"isAllApproval",required:!1,type:{name:"boolean"}},isUnlimitedApproval:{defaultValue:null,description:"",name:"isUnlimitedApproval",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/confirmations/components/simulation-details/amount-pill.tsx#AmountPill"]={docgenInfo:AmountPill.__docgenInfo,name:"AmountPill",path:"ui/pages/confirmations/components/simulation-details/amount-pill.tsx#AmountPill"})}catch(__react_docgen_typescript_loader_error){}var fiat_display=__webpack_require__("./ui/pages/confirmations/components/simulation-details/fiat-display.tsx"),BalanceChangeRow=function(param){var label=param.label,showFiat=param.showFiat,balanceChange=param.balanceChange,labelColor=param.labelColor,t=(0,useI18nContext.P)(),asset=balanceChange.asset,amount=balanceChange.amount,fiatAmount=balanceChange.fiatAmount,isApproval=balanceChange.isApproval,isAllApproval=balanceChange.isAllApproval,isUnlimitedApproval=balanceChange.isUnlimitedApproval,onEdit=balanceChange.onEdit;return react.createElement(component_library.az,{"data-testid":"simulation-details-balance-change-row",display:design_system.nl.Flex,flexDirection:design_system.bo.Row,alignItems:design_system.k2.flexStart,gap:1,flexWrap:design_system.I4.Wrap},label&&react.createElement(component_library.EY,{style:{whiteSpace:"nowrap"},color:labelColor,variant:design_system.J3.bodyMd},label),react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Column,gap:1,marginLeft:"auto",style:{minWidth:0}},react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Row,gap:1},onEdit&&react.createElement(component_library.a2,{"data-testid":"balance-change-edit",color:design_system.Li.primaryDefault,ariaLabel:t("edit"),iconName:component_library.$M.Edit,onClick:onEdit,size:component_library.f3.Sm,style:{marginRight:"-4px"}}),react.createElement(AmountPill,{asset:asset,amount:amount,isApproval:isApproval,isAllApproval:isAllApproval,isUnlimitedApproval:isUnlimitedApproval}),react.createElement(asset_pill.a,{asset:asset})),showFiat&&react.createElement(fiat_display.m8,{fiatAmount:fiatAmount})))};try{BalanceChangeRow.displayName="BalanceChangeRow",BalanceChangeRow.__docgenInfo={description:"Displays a single balance change, including the asset, amount, and fiat value.",displayName:"BalanceChangeRow",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},showFiat:{defaultValue:null,description:"",name:"showFiat",required:!1,type:{name:"boolean"}},balanceChange:{defaultValue:null,description:"",name:"balanceChange",required:!0,type:{name:"Readonly<{ asset: AssetIdentifier; amount: BigNumber; fiatAmount: FiatAmount; isApproval?: boolean | undefined; isAllApproval?: boolean | undefined; isUnlimitedApproval?: boolean | undefined; onEdit?: (() => void) | undefined; usdAmount: FiatAmount; }>"}},labelColor:{defaultValue:null,description:"",name:"labelColor",required:!1,type:{name:"enum",value:[{value:'"text-default"'},{value:'"text-alternative"'},{value:'"text-alternative-soft"'},{value:'"text-muted"'},{value:'"icon-default"'},{value:'"icon-alternative"'},{value:'"icon-muted"'},{value:'"icon-inverse"'},{value:'"overlay-inverse"'},{value:'"primary-default"'},{value:'"primary-inverse"'},{value:'"error-default"'},{value:'"error-alternative"'},{value:'"error-inverse"'},{value:'"success-default"'},{value:'"success-inverse"'},{value:'"warning-default"'},{value:'"warning-inverse"'},{value:'"info-default"'},{value:'"info-inverse"'},{value:'"inherit"'},{value:'"goerli"'},{value:'"sepolia"'},{value:'"linea-goerli"'},{value:'"linea-goerli-inverse"'},{value:'"linea-sepolia"'},{value:'"linea-sepolia-inverse"'},{value:'"linea-mainnet"'},{value:'"linea-mainnet-inverse"'},{value:'"goerli-inverse"'},{value:'"sepolia-inverse"'},{value:'"transparent"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/confirmations/components/simulation-details/balance-change-row.tsx#BalanceChangeRow"]={docgenInfo:BalanceChangeRow.__docgenInfo,name:"BalanceChangeRow",path:"ui/pages/confirmations/components/simulation-details/balance-change-row.tsx#BalanceChangeRow"})}catch(__react_docgen_typescript_loader_error){}var simulation_details_types=__webpack_require__("./ui/pages/confirmations/components/simulation-details/types.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _to_consumable_array(arr){return _array_without_holes(arr)||_iterable_to_array(arr)||_unsupported_iterable_to_array(arr)||_non_iterable_spread()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var tokenStandardOrder=[transaction.ph.none,transaction.ph.ERC20,transaction.ph.ERC721,transaction.ph.ERC1155],comparators=[function(a,b){return a.fiatAmount===b.fiatAmount?0:a.fiatAmount===simulation_details_types.k?1:b.fiatAmount===simulation_details_types.k?-1:b.fiatAmount-a.fiatAmount},function(a,b){return tokenStandardOrder.indexOf(a.asset.standard)-tokenStandardOrder.indexOf(b.asset.standard)}],compareBalanceChanges=function(a,b){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=comparators[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var result=(0,_step.value)(a,b);if(0!==result)return result}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return 0},BalanceChangeList=function(param){var heading=param.heading,balanceChanges=param.balanceChanges,testId=param.testId,labelColor=param.labelColor,sortedBalanceChanges=(0,react.useMemo)(function(){return _to_consumable_array(balanceChanges).sort(compareBalanceChanges)},[balanceChanges]),fiatAmounts=(0,react.useMemo)(function(){return sortedBalanceChanges.map(function(bc){return bc.fiatAmount})},[sortedBalanceChanges]);if(0===sortedBalanceChanges.length)return null;var hasMultipleBalanceChanges=sortedBalanceChanges.length>1,hasUnlimitedApproval=balanceChanges.some(function(bc){return bc.isUnlimitedApproval}),showFiatTotal=hasMultipleBalanceChanges&&!hasUnlimitedApproval;return react.createElement(component_library.az,null,react.createElement(component_library.az,{"data-testid":testId,display:design_system.nl.Flex,flexDirection:design_system.bo.Column,gap:3},sortedBalanceChanges.map(function(balanceChange,index){return react.createElement(BalanceChangeRow,{key:index,label:0===index?heading:void 0,balanceChange:balanceChange,showFiat:!showFiatTotal&&!balanceChange.isUnlimitedApproval,labelColor:labelColor})})),showFiatTotal&&react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.RowReverse},react.createElement(fiat_display.LJ,{fiatAmounts:fiatAmounts})))};try{BalanceChangeList.displayName="BalanceChangeList",BalanceChangeList.__docgenInfo={description:`Displays a list of incoming or outgoing balance changes, along with a heading and a
total fiat amount.`,displayName:"BalanceChangeList",props:{heading:{defaultValue:null,description:"",name:"heading",required:!0,type:{name:"string"}},balanceChanges:{defaultValue:null,description:"",name:"balanceChanges",required:!0,type:{name:"Readonly<{ asset: AssetIdentifier; amount: BigNumber; fiatAmount: FiatAmount; isApproval?: boolean | undefined; isAllApproval?: boolean | undefined; isUnlimitedApproval?: boolean | undefined; onEdit?: (() => void) | undefined; usdAmount: FiatAmount; }>[]"}},testId:{defaultValue:null,description:"",name:"testId",required:!1,type:{name:"string"}},labelColor:{defaultValue:null,description:"",name:"labelColor",required:!1,type:{name:"enum",value:[{value:'"text-default"'},{value:'"text-alternative"'},{value:'"text-alternative-soft"'},{value:'"text-muted"'},{value:'"icon-default"'},{value:'"icon-alternative"'},{value:'"icon-muted"'},{value:'"icon-inverse"'},{value:'"overlay-inverse"'},{value:'"primary-default"'},{value:'"primary-inverse"'},{value:'"error-default"'},{value:'"error-alternative"'},{value:'"error-inverse"'},{value:'"success-default"'},{value:'"success-inverse"'},{value:'"warning-default"'},{value:'"warning-inverse"'},{value:'"info-default"'},{value:'"info-inverse"'},{value:'"inherit"'},{value:'"goerli"'},{value:'"sepolia"'},{value:'"linea-goerli"'},{value:'"linea-goerli-inverse"'},{value:'"linea-sepolia"'},{value:'"linea-sepolia-inverse"'},{value:'"linea-mainnet"'},{value:'"linea-mainnet-inverse"'},{value:'"goerli-inverse"'},{value:'"sepolia-inverse"'},{value:'"transparent"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/confirmations/components/simulation-details/balance-change-list.tsx#BalanceChangeList"]={docgenInfo:BalanceChangeList.__docgenInfo,name:"BalanceChangeList",path:"ui/pages/confirmations/components/simulation-details/balance-change-list.tsx#BalanceChangeList"})}catch(__react_docgen_typescript_loader_error){}var useBalanceChanges=__webpack_require__("./ui/pages/confirmations/components/simulation-details/useBalanceChanges.ts"),dist_types=__webpack_require__("./node_modules/@metamask/name-controller/dist/types.mjs"),useTransactionEventFragment=__webpack_require__("./ui/pages/confirmations/hooks/useTransactionEventFragment.js"),useDisplayName=__webpack_require__("./ui/hooks/useDisplayName.ts"),metametrics=__webpack_require__("./ui/contexts/metametrics.js"),constants_metametrics=__webpack_require__("./shared/constants/metametrics.ts"),useTrustSignals=__webpack_require__("./ui/hooks/useTrustSignals.ts"),useLoadingTime=__webpack_require__("./ui/pages/confirmations/components/simulation-details/useLoadingTime.ts");function useSimulationMetrics_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function useSimulationMetrics_array_without_holes(arr){if(Array.isArray(arr))return useSimulationMetrics_array_like_to_array(arr)}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function useSimulationMetrics_iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function useSimulationMetrics_non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||useSimulationMetrics_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function useSimulationMetrics_to_consumable_array(arr){return useSimulationMetrics_array_without_holes(arr)||useSimulationMetrics_iterable_to_array(arr)||useSimulationMetrics_unsupported_iterable_to_array(arr)||useSimulationMetrics_non_iterable_spread()}function useSimulationMetrics_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return useSimulationMetrics_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useSimulationMetrics_array_like_to_array(o,minLen)}}function useSimulationMetrics(param){var _simulationData_error,balanceChanges=param.balanceChanges,loading=param.loading,simulationData=param.simulationData,transactionId=param.transactionId,enableMetrics=param.enableMetrics,_useLoadingTime=(0,useLoadingTime.H)(),loadingTime=_useLoadingTime.loadingTime,setLoadingComplete=_useLoadingTime.setLoadingComplete;loading||setLoadingComplete();var displayNameRequests=balanceChanges.filter(function(param){return!!param.asset.address}).map(function(param){var asset=param.asset;return{value:asset.address,type:dist_types.k.ETHEREUM_ADDRESS,preferContractSymbol:!0,variation:asset.chainId}}),displayNamesByAddress=(0,useDisplayName.k)(displayNameRequests).reduce(function(acc,displayNameResponse,index){var _balanceChanges_index_asset_address;return _object_spread_props(_object_spread({},acc),_define_property({},null!=(_balanceChanges_index_asset_address=balanceChanges[index].asset.address)?_balanceChanges_index_asset_address:"",displayNameResponse))},{}),updateTransactionEventFragment=(0,useTransactionEventFragment.W)().updateTransactionEventFragment;useIncompleteAssetEvent(balanceChanges,displayNamesByAddress);var receivingAssets=balanceChanges.filter(function(change){return!change.amount.isNegative()}),sendingAssets=balanceChanges.filter(function(change){return change.amount.isNegative()}),params={properties:_object_spread({simulation_response:getSimulationResponseType(simulationData),simulation_latency:loadingTime},getProperties(receivingAssets,"simulation_receiving_assets_",displayNamesByAddress),getProperties(sendingAssets,"simulation_sending_assets_",displayNamesByAddress)),sensitiveProperties:{}},shouldSkipMetrics=!enableMetrics||[types.nl.ChainNotSupported,types.nl.Disabled].includes(null==simulationData||null==(_simulationData_error=simulationData.error)?void 0:_simulationData_error.code);(0,react.useEffect)(function(){shouldSkipMetrics||updateTransactionEventFragment(params,transactionId)},[shouldSkipMetrics,updateTransactionEventFragment,transactionId,JSON.stringify(params)])}function useIncompleteAssetEvent(balanceChanges,displayNamesByAddress){var trackEvent=(0,react.useContext)(metametrics.O2),_useState=_sliced_to_array((0,react.useState)([]),2),processedAssets=_useState[0],setProcessedAssets=_useState[1],_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=balanceChanges[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _change_asset_address,change=_step.value,assetAddress=null!=(_change_asset_address=change.asset.address)?_change_asset_address:"",displayName=displayNamesByAddress[assetAddress],isIncomplete=change.asset.address&&!change.fiatAmount||"unknown"===getPetnameType(change,displayName),isProcessed=processedAssets.includes(assetAddress);isIncomplete&&!isProcessed&&(trackEvent({event:constants_metametrics.gP.SimulationIncompleteAssetDisplayed,category:constants_metametrics.FZ.Transactions,properties:{asset_address:change.asset.address,asset_petname:getPetnameType(change,displayName),asset_symbol:null==displayName?void 0:displayName.contractDisplayName,asset_type:getAssetType(change.asset.standard),fiat_conversion_available:change.fiatAmount?"available":"not_available",location:"confirmation"}}),setProcessedAssets(useSimulationMetrics_to_consumable_array(processedAssets).concat([assetAddress])))}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}function getProperties(changes,prefix,displayNamesByAddress){var quantity=changes.length,type=unique(changes.map(function(change){return getAssetType(change.asset.standard)})),value=unique(changes.map(function(change){return change.fiatAmount?"available":"not_available"})),petname=unique(changes.map(function(change){var _change_asset_address;return getPetnameType(change,displayNamesByAddress[null!=(_change_asset_address=change.asset.address)?_change_asset_address:""])})),fiatAmounts=changes.map(function(change){return change.usdAmount}),totalFiat=(0,fiat_display.Z9)(fiatAmounts);return getPrefixProperties({petname:petname,quantity:quantity,type:type,value:value,total_value:totalFiat?Math.abs(totalFiat):void 0},prefix)}function getPrefixProperties(properties,prefix){return Object.entries(properties).reduce(function(acc,param){var _param=_sliced_to_array(param,2),key=_param[0],value=_param[1];return _object_spread_props(_object_spread({},acc),_define_property({},"".concat(prefix).concat(key),value))},{})}function getAssetType(standard){switch(standard){case transaction.ph.ERC20:return"erc20";case transaction.ph.ERC721:return"erc721";case transaction.ph.ERC1155:return"erc1155";default:return"native"}}function getPetnameType(balanceChange){var displayName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{name:"",hasPetname:!1,displayState:useTrustSignals.AQ.Unknown};return balanceChange.asset.standard===transaction.ph.none?"default":displayName.hasPetname?"saved":displayName.name?"default":"unknown"}function getSimulationResponseType(simulationData){var _simulationData_error;return simulationData?(null==(_simulationData_error=simulationData.error)?void 0:_simulationData_error.code)===types.nl.Reverted?"transaction_revert":simulationData.error?"failed":(null==simulationData?void 0:simulationData.nativeBalanceChange)||(null==simulationData?void 0:simulationData.tokenBalanceChanges.length)?"balance_change":"no_balance_change":"simulation_in_progress"}function unique(list){return Array.from(new Set(list))}function simulation_details_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function simulation_details_array_with_holes(arr){if(Array.isArray(arr))return arr}function simulation_details_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function simulation_details_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function simulation_details_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function simulation_details_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){simulation_details_define_property(target,key,source[key])})}return target}function simulation_details_sliced_to_array(arr,i){return simulation_details_array_with_holes(arr)||simulation_details_iterable_to_array_limit(arr,i)||simulation_details_unsupported_iterable_to_array(arr,i)||simulation_details_non_iterable_rest()}function simulation_details_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return simulation_details_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return simulation_details_array_like_to_array(o,minLen)}}var LoadingIndicator=function(){return react.createElement("div",{role:"progressbar"},react.createElement(preloader_icon_component.A,{size:20}))},ErrorContent=function(param){var error=param.error,t=(0,useI18nContext.P)();return react.createElement(component_library.EY,{color:error.code===types.nl.Reverted?design_system.r7.warningDefault:design_system.r7.textDefault,variant:design_system.J3.bodyMd,display:design_system.nl.Flex,alignItems:design_system.k2.center},error.code===types.nl.Reverted&&react.createElement(component_library.In,{name:component_library.$M.Warning,marginInlineEnd:1}),t(error.code===types.nl.Reverted?"simulationDetailsTransactionReverted":"simulationDetailsUnavailable"))},EmptyContent=function(){var t=(0,useI18nContext.P)();return react.createElement(component_library.EY,{color:design_system.r7.textDefault,variant:design_system.J3.bodyMd},t("simulationDetailsNoChanges"))},HeaderWithAlert=function(param){var _transactionMetadata_containerTypes,transactionId=param.transactionId,t=(0,useI18nContext.P)(),isEnforcedSimulationsSupported=useIsEnforcedSimulationsSupported(),showAdvancedDetails=(0,es.d4)(preferences.O6),transactionMetadata=(0,es.d4)(function(state){return(0,selectors.E26)(state,transactionId)}),isEnforced=null==transactionMetadata||null==(_transactionMetadata_containerTypes=transactionMetadata.containerTypes)?void 0:_transactionMetadata_containerTypes.includes(types.UI.EnforcedSimulations),label=t(isEnforced?"simulationDetailsTitleEnforced":"simulationDetailsTitle"),tooltip=t(isEnforced?"simulationDetailsTitleTooltipEnforced":"simulationDetailsTitleTooltip"),_useState=simulation_details_sliced_to_array((0,react.useState)(!1),2),settingsModalVisible=_useState[0],setSettingsModalVisible=_useState[1];return react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Row,justifyContent:design_system.A9.spaceBetween,width:design_system.Zf.Full,alignItems:design_system.k2.center},react.createElement(alert_row.n,{alertKey:constants.oE.Resimulation,label:label,ownerId:transactionId,tooltip:tooltip,tooltipIcon:isEnforced&&component_library.$M.SecurityTick,tooltipIconColor:isEnforced&&design_system.Li.infoDefault,style:{paddingLeft:0,paddingRight:0}}),showAdvancedDetails&&isEnforcedSimulationsSupported&&react.createElement(component_library.a2,{iconName:component_library.$M.Setting,size:component_library.f3.Sm,color:design_system.Li.iconMuted,ariaLabel:"simulation-settings",onClick:function(){return setSettingsModalVisible(!0)}}),settingsModalVisible&&react.createElement(simulation_settings_modal.C,{onClose:function(){return setSettingsModalVisible(!1)}}))},LegacyHeader=function(){var t=(0,useI18nContext.P)();return react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Row,alignItems:design_system.k2.center,gap:1},react.createElement(component_library.EY,{variant:design_system.J3.bodyMdMedium},t("simulationDetailsTitle")),react.createElement(tooltip.A,{interactive:!0,position:"top",containerClassName:"info-tooltip__tooltip-container",tooltipInnerClassName:"info-tooltip__tooltip-content",tooltipArrowClassName:"info-tooltip__top-tooltip-arrow",html:t("simulationDetailsTitleTooltip"),theme:"tippy-tooltip-info",style:{display:design_system.nl.Flex}},react.createElement(component_library.In,{name:component_library.$M.Question,marginLeft:1,color:design_system.Li.iconMuted,size:component_library.lK.Sm})))},HeaderLayout=function(param){var children=param.children,isTransactionsRedesign=param.isTransactionsRedesign,transactionId=param.transactionId;return react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Row,alignItems:design_system.k2.center,justifyContent:design_system.A9.spaceBetween},isTransactionsRedesign?react.createElement(HeaderWithAlert,{transactionId:transactionId}):react.createElement(LegacyHeader,null),children)},SimulationDetailsLayout=function(param){var inHeader=param.inHeader,isTransactionsRedesign=param.isTransactionsRedesign,transactionId=param.transactionId,children=param.children;return isTransactionsRedesign?react.createElement(section.C,{noPadding:!0},react.createElement(component_library.az,{"data-testid":"simulation-details-layout",className:"simulation-details-layout",display:design_system.nl.Flex,flexDirection:design_system.bo.Column,borderRadius:design_system.Z6.LG,borderColor:isTransactionsRedesign?design_system.cG.transparent:design_system.cG.borderDefault,padding:3,margin:isTransactionsRedesign?null:4,gap:3},react.createElement(HeaderLayout,{isTransactionsRedesign:isTransactionsRedesign,transactionId:transactionId},inHeader),children)):react.createElement(component_library.az,{"data-testid":"simulation-details-layout",className:"simulation-details-layout",display:design_system.nl.Flex,flexDirection:design_system.bo.Column,borderRadius:design_system.Z6.LG,borderColor:isTransactionsRedesign?design_system.cG.transparent:design_system.cG.borderDefault,padding:3,margin:isTransactionsRedesign?null:4,gap:3},react.createElement(HeaderLayout,{isTransactionsRedesign:isTransactionsRedesign,transactionId:transactionId},inHeader),children)},BalanceChangesAlert=function(param){var _fieldAlerts_,_fieldAlerts_1,transactionId=param.transactionId,fieldAlerts=(0,(0,useAlerts.A)(transactionId).getFieldAlerts)(constants.oE.EstimatedChangesStatic),selectedAlertSeverity=null==(_fieldAlerts_=fieldAlerts[0])?void 0:_fieldAlerts_.severity,selectedAlertKey=null==(_fieldAlerts_1=fieldAlerts[0])?void 0:_fieldAlerts_1.key,trackInlineAlertClicked=(0,alertMetricsContext.r)().trackInlineAlertClicked,_useState=simulation_details_sliced_to_array((0,react.useState)(!1),2),alertModalVisible=_useState[0],setAlertModalVisible=_useState[1],handleModalClose=function(){setAlertModalVisible(!1)};return react.createElement(react.Fragment,null,fieldAlerts.length>0&&react.createElement(component_library.az,{marginLeft:1},react.createElement(inline_alert.A,{onClick:function(){setAlertModalVisible(!0),trackInlineAlertClicked(selectedAlertKey)},severity:selectedAlertSeverity})),alertModalVisible&&react.createElement(multiple_alert_modal.C,{alertKey:selectedAlertKey,ownerId:transactionId,onFinalAcknowledgeClick:handleModalClose,onClose:handleModalClose,showCloseIcon:!1,skipAlertNavigation:!0}))},SimulationDetails=function(param){var _fieldAlerts_,transaction=param.transaction,_param_enableMetrics=param.enableMetrics,_param_isTransactionsRedesign=param.isTransactionsRedesign,isTransactionsRedesign=void 0!==_param_isTransactionsRedesign&&_param_isTransactionsRedesign,_param_metricsOnly=param.metricsOnly,_param_staticRows=param.staticRows,staticRows=void 0===_param_staticRows?[]:_param_staticRows,t=(0,useI18nContext.P)(),chainId=transaction.chainId,transactionId=transaction.id,simulationData=transaction.simulationData,balanceChangesResult=(0,useBalanceChanges.D)({chainId:chainId,simulationData:simulationData}),loading=!simulationData||balanceChangesResult.pending,hasStaticData=(null==staticRows?void 0:staticRows.length)>0&&staticRows.some(function(row){var _row_balanceChanges;return(null==(_row_balanceChanges=row.balanceChanges)?void 0:_row_balanceChanges.length)>0});useSimulationMetrics({enableMetrics:void 0!==_param_enableMetrics&&_param_enableMetrics,balanceChanges:balanceChangesResult.value,loading:loading,simulationData:simulationData,transactionId:transactionId});var selectedAlertSeverity=null==(_fieldAlerts_=(0,(0,useAlerts.A)(transactionId).getFieldAlerts)(constants.oE.EstimatedChangesStatic)[0])?void 0:_fieldAlerts_.severity;if(void 0!==_param_metricsOnly&&_param_metricsOnly)return null;if(loading)return react.createElement(SimulationDetailsLayout,{inHeader:react.createElement(LoadingIndicator,null),isTransactionsRedesign:isTransactionsRedesign,transactionId:transactionId});var error=simulationData.error;if([types.nl.ChainNotSupported,types.nl.Disabled].includes(null==error?void 0:error.code)&&!hasStaticData)return null;if(error&&!hasStaticData){var inHeaderProp=error.code!==types.nl.Reverted&&{inHeader:react.createElement(ErrorContent,{error:error})};return react.createElement(SimulationDetailsLayout,simulation_details_object_spread({isTransactionsRedesign:isTransactionsRedesign,transactionId:transactionId},inHeaderProp),error.code===types.nl.Reverted&&react.createElement(ErrorContent,{error:error}))}var balanceChanges=balanceChangesResult.value;if(0===balanceChanges.length&&!hasStaticData)return react.createElement(SimulationDetailsLayout,{isTransactionsRedesign:isTransactionsRedesign,transactionId:transactionId,inHeader:react.createElement(EmptyContent,null)});var outgoing=balanceChanges.filter(function(bc){return bc.amount.isNegative()}),incoming=balanceChanges.filter(function(bc){return!bc.amount.isNegative()});return react.createElement(SimulationDetailsLayout,{isTransactionsRedesign:isTransactionsRedesign,transactionId:transactionId},react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Column,gap:3},staticRows.map(function(staticRow,index){return react.createElement(react.Fragment,null,react.createElement(BalanceChangeList,{key:index,heading:staticRow.label,balanceChanges:staticRow.balanceChanges,labelColor:(0,alert_row.y)(selectedAlertSeverity)}),react.createElement(BalanceChangesAlert,{transactionId:transactionId}))}),react.createElement(BalanceChangeList,{heading:t("simulationDetailsOutgoingHeading"),balanceChanges:outgoing,testId:"simulation-rows-outgoing"}),react.createElement(BalanceChangeList,{heading:t("simulationDetailsIncomingHeading"),balanceChanges:incoming,testId:"simulation-rows-incoming"})))};try{SimulationDetails.displayName="SimulationDetails",SimulationDetails.__docgenInfo={description:"Preview of a transaction's effects using simulation data.",displayName:"SimulationDetails",props:{enableMetrics:{defaultValue:{value:"false"},description:"",name:"enableMetrics",required:!1,type:{name:"boolean"}},isTransactionsRedesign:{defaultValue:{value:"false"},description:"",name:"isTransactionsRedesign",required:!1,type:{name:"boolean"}},metricsOnly:{defaultValue:{value:"false"},description:"",name:"metricsOnly",required:!1,type:{name:"boolean"}},staticRows:{defaultValue:{value:"[]"},description:"",name:"staticRows",required:!1,type:{name:"StaticRow[]"}},transaction:{defaultValue:null,description:"",name:"transaction",required:!0,type:{name:"TransactionMeta"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/confirmations/components/simulation-details/simulation-details.tsx#SimulationDetails"]={docgenInfo:SimulationDetails.__docgenInfo,name:"SimulationDetails",path:"ui/pages/confirmations/components/simulation-details/simulation-details.tsx#SimulationDetails"})}catch(__react_docgen_typescript_loader_error){}},"./ui/pages/confirmations/components/simulation-details/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>FIAT_UNAVAILABLE});var FIAT_UNAVAILABLE=null},"./ui/pages/confirmations/components/simulation-details/useBalanceChanges.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>useBalanceChanges});var react_redux__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-redux/es/index.js"),_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@metamask/transaction-controller/dist/types.mjs"),bignumber_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/bignumber.js/bignumber.js"),_hooks_useAsync__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/hooks/useAsync.ts"),_shared_constants_transaction__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/constants/transaction.ts"),_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/ducks/metamask/metamask.js"),_selectors__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/selectors/index.js"),_helpers_utils_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/helpers/utils/util.js"),_utils_token__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/pages/confirmations/utils/token.ts"),_types__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ui/pages/confirmations/components/simulation-details/types.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _to_consumable_array(arr){return _array_without_holes(arr)||_iterable_to_array(arr)||_unsupported_iterable_to_array(arr)||_non_iterable_spread()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function _ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function convertStandard(standard){switch(standard){case _metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_8__._B.erc20:return _shared_constants_transaction__WEBPACK_IMPORTED_MODULE_3__.ph.ERC20;case _metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_8__._B.erc721:return _shared_constants_transaction__WEBPACK_IMPORTED_MODULE_3__.ph.ERC721;case _metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_8__._B.erc1155:return _shared_constants_transaction__WEBPACK_IMPORTED_MODULE_3__.ph.ERC1155;default:throw Error("Unknown token standard: ".concat(standard))}}function getAssetAmount(param,decimals){var isNegative=param.isDecrease,quantity=param.difference;return new bignumber_js__WEBPACK_IMPORTED_MODULE_1__.BigNumber(quantity,16).times(isNegative?-1:1).shift(-decimals)}function fetchAllErc20Decimals(addresses){return _async_to_generator(function(){var uniqueAddresses;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,Promise.all((uniqueAddresses=_to_consumable_array(new Set(addresses.map(function(address){return address.toLowerCase()})))).map(_utils_token__WEBPACK_IMPORTED_MODULE_7__.tT))];case 1:return[2,Object.fromEntries(_state.sent().map(function(decimals,i){return[uniqueAddresses[i],decimals]}))]}})})()}function fetchTokenFiatRates(fiatCurrency,erc20TokenAddresses,chainId){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,(0,_helpers_utils_util__WEBPACK_IMPORTED_MODULE_6__.qI)(fiatCurrency,erc20TokenAddresses,chainId)];case 1:return[2,Object.fromEntries(Object.entries(_state.sent()).map(function(param){var _param=_sliced_to_array(param,2),address=_param[0],rate=_param[1];return[address.toLowerCase(),rate]}))]}})})()}function getNativeBalanceChange(nativeBalanceChange,nativeFiatRate,nativeUsdRate,chainId){if(nativeBalanceChange){var asset={chainId:chainId,standard:_shared_constants_transaction__WEBPACK_IMPORTED_MODULE_3__.ph.none},amount=getAssetAmount(nativeBalanceChange,18),_map=_sliced_to_array([nativeFiatRate,nativeUsdRate].map(function(rate){return rate?amount.times(String(rate)).toNumber():_types__WEBPACK_IMPORTED_MODULE_9__.k}),2);return{asset:asset,amount:amount,fiatAmount:_map[0],usdAmount:_map[1]}}}function getTokenBalanceChanges(tokenBalanceChanges,erc20Decimals,erc20FiatRates,erc20UsdRates,chainId){return tokenBalanceChanges.map(function(tokenBc){var _erc20Decimals_asset_address,asset={chainId:chainId,standard:convertStandard(tokenBc.standard),address:tokenBc.address.toLowerCase(),tokenId:tokenBc.id},amount=getAssetAmount(tokenBc,asset.standard===_shared_constants_transaction__WEBPACK_IMPORTED_MODULE_3__.ph.ERC20?null!=(_erc20Decimals_asset_address=erc20Decimals[asset.address])?_erc20Decimals_asset_address:_utils_token__WEBPACK_IMPORTED_MODULE_7__.Mh:0),_map=_sliced_to_array([erc20FiatRates[tokenBc.address.toLowerCase()],erc20UsdRates[tokenBc.address.toLowerCase()]].map(function(rate){return rate?amount.times(String(rate)).toNumber():_types__WEBPACK_IMPORTED_MODULE_9__.k}),2);return{asset:asset,amount:amount,fiatAmount:_map[0],usdAmount:_map[1]}})}var useBalanceChanges=function(param){var chainId=param.chainId,simulationData=param.simulationData,fiatCurrency=(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.d4)(_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_4__.Fx),nativeFiatRate=(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.d4)(function(state){return(0,_selectors__WEBPACK_IMPORTED_MODULE_5__._po)(state,chainId)}),nativeUsdRate=(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.d4)(function(state){return(0,_selectors__WEBPACK_IMPORTED_MODULE_5__.EgK)(chainId)(state)}),_ref=null!=simulationData?simulationData:{},nativeBalanceChange=_ref.nativeBalanceChange,_ref_tokenBalanceChanges=_ref.tokenBalanceChanges,tokenBalanceChanges=void 0===_ref_tokenBalanceChanges?[]:_ref_tokenBalanceChanges,erc20TokenAddresses=tokenBalanceChanges.filter(function(tbc){return tbc.standard===_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_8__._B.erc20}).map(function(tbc){return tbc.address}),erc20Decimals=(0,_hooks_useAsync__WEBPACK_IMPORTED_MODULE_2__._k)(function(){return fetchAllErc20Decimals(erc20TokenAddresses)},[JSON.stringify(erc20TokenAddresses)]),erc20FiatRates=(0,_hooks_useAsync__WEBPACK_IMPORTED_MODULE_2__._k)(function(){return fetchTokenFiatRates(fiatCurrency,erc20TokenAddresses,chainId)},[JSON.stringify(erc20TokenAddresses),chainId,fiatCurrency]),erc20UsdRates=(0,_hooks_useAsync__WEBPACK_IMPORTED_MODULE_2__._k)(function(){return _async_to_generator(function(){var _erc20FiatRates_value;return _ts_generator(this,function(_state){return[2,"usd"===fiatCurrency?null!=(_erc20FiatRates_value=erc20FiatRates.value)?_erc20FiatRates_value:{}:fetchTokenFiatRates("usd",erc20TokenAddresses,chainId)]})})()},[JSON.stringify(erc20TokenAddresses),chainId,fiatCurrency,erc20FiatRates.value]);if(erc20Decimals.pending||erc20FiatRates.pending||erc20UsdRates.pending||!simulationData)return{pending:!0,value:[]};var nativeChange=getNativeBalanceChange(nativeBalanceChange,nativeFiatRate,nativeUsdRate,chainId),tokenChanges=getTokenBalanceChanges(tokenBalanceChanges,erc20Decimals.value,erc20FiatRates.value,erc20UsdRates.value,chainId);return{pending:!1,value:_to_consumable_array(nativeChange?[nativeChange]:[]).concat(_to_consumable_array(tokenChanges))}}},"./ui/pages/confirmations/components/simulation-details/useLoadingTime.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>useLoadingTime});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function useLoadingTime(){var loadingStart=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(Date.now()),1)[0],_useState1=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),2),loadingTime=_useState1[0],setLoadingTime=_useState1[1];return{loadingTime:loadingTime,setLoadingComplete:function(){void 0===loadingTime&&setLoadingTime((Date.now()-loadingStart)/1e3)}}}},"./ui/pages/confirmations/utils/token.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Mh:()=>ERC20_DEFAULT_DECIMALS,OS:()=>memoizedGetTokenStandardAndDetails,a6:()=>parseTokenDetailDecimals,tT:()=>fetchErc20Decimals});var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/lodash.js"),_store_actions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/__mocks__/actions.js");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var ERC20_DEFAULT_DECIMALS=18,parseTokenDetailDecimals=function(decStr){if(decStr)for(var _i=0,_iter=[10,16];_i<_iter.length;_i++){var parsedDec=parseInt(decStr,_iter[_i]);if(isFinite(parsedDec))return parsedDec}},memoizedGetTokenStandardAndDetails=(0,lodash__WEBPACK_IMPORTED_MODULE_0__.memoize)(function(tokenAddress,userAddress,tokenId){return _async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:if(_state.trys.push([0,2,,3]),!tokenAddress)return[2,{}];return[4,(0,_store_actions__WEBPACK_IMPORTED_MODULE_1__.getTokenStandardAndDetails)(tokenAddress,userAddress,tokenId)];case 1:return[2,_state.sent()];case 2:return _state.sent(),[2,{}];case 3:return[2]}})})()}),fetchErc20Decimals=function(address){return _async_to_generator(function(){var decimals;return _ts_generator(this,function(_state){switch(_state.label){case 0:return _state.trys.push([0,2,,3]),[4,memoizedGetTokenStandardAndDetails(address)];case 1:return[2,null!=(decimals=parseTokenDetailDecimals(_state.sent().decimals))?decimals:ERC20_DEFAULT_DECIMALS];case 2:return _state.sent(),[2,ERC20_DEFAULT_DECIMALS];case 3:return[2]}})})()}}}]);