"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[6806],{"./ui/pages/confirmations/components/custom-spending-cap/custom-spending-cap.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CustomSpendingCapStory:()=>CustomSpendingCapStory,DefaultStory:()=>DefaultStory,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _DefaultStory_parameters,_DefaultStory_parameters_docs,_DefaultStory_parameters1,_CustomSpendingCapStory_parameters,_CustomSpendingCapStory_parameters_docs,_CustomSpendingCapStory_parameters1,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_storybook_client_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("@storybook/client-api"),_custom_spending_cap__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/pages/confirmations/components/custom-spending-cap/custom-spending-cap.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}let __WEBPACK_DEFAULT_EXPORT__={title:"Confirmations/Components/CustomSpendingCap",argTypes:{txParams:{control:"object"},tokenName:{control:"text"},currentTokenBalance:{control:"text"},dappProposedValue:{control:"text"},siteOrigin:{control:"text"},passTheErrorText:{action:"passTheErrorText"},decimals:{control:"text"},setInputChangeInProgress:{action:"setInputChangeInProgress"},customSpendingCap:{control:"text"},setCustomSpendingCap:{action:"setCustomSpendingCap"}},args:{tokenName:"DAI",currentTokenBalance:"200.12",dappProposedValue:"7",siteOrigin:"Uniswap.org",decimals:"4",customSpendingCap:"7",txParams:{data:"0x095ea7b30000000000000000000000009bc5baf874d2da8d216ae9f137804184ee5afef40000000000000000000000000000000000000000000000000000000000011170",from:"0x8eeee1781fd885ff5ddef7789486676961873d12",gas:"0xb41b",maxFeePerGas:"0x4a817c800",maxPriorityFeePerGas:"0x4a817c800",to:"0x665933d73375e385bef40abcccea8b4cccc32d4c",value:"0x0"}}};var Template=function(args){var _useArgs=_sliced_to_array((0,_storybook_client_api__WEBPACK_IMPORTED_MODULE_1__.useArgs)(),2),customSpendingCap=_useArgs[0].customSpendingCap,updateArgs=_useArgs[1];return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_custom_spending_cap__WEBPACK_IMPORTED_MODULE_2__.Z,_object_spread_props(_object_spread({},args),{customSpendingCap:customSpendingCap,setCustomSpendingCap:function(value){updateArgs({customSpendingCap:value})}}))},DefaultStory=Template.bind({});DefaultStory.storyName="Default";var CustomSpendingCapStory=Template.bind({});CustomSpendingCapStory.storyName="CustomSpendingCap",CustomSpendingCapStory.args={customSpendingCap:"8"},DefaultStory.parameters=_object_spread_props(_object_spread({},DefaultStory.parameters),{docs:_object_spread_props(_object_spread({},null===(_DefaultStory_parameters=DefaultStory.parameters)||void 0===_DefaultStory_parameters?void 0:_DefaultStory_parameters.docs),{source:_object_spread({originalSource:"args => {\n  const [{\n    customSpendingCap\n  }, updateArgs] = useArgs();\n  const handleOnChange = value => {\n    updateArgs({\n      customSpendingCap: value\n    });\n  };\n  return <CustomSpendingCap {...args} customSpendingCap={customSpendingCap} setCustomSpendingCap={handleOnChange} />;\n}"},null===(_DefaultStory_parameters1=DefaultStory.parameters)||void 0===_DefaultStory_parameters1?void 0:null===(_DefaultStory_parameters_docs=_DefaultStory_parameters1.docs)||void 0===_DefaultStory_parameters_docs?void 0:_DefaultStory_parameters_docs.source)})}),CustomSpendingCapStory.parameters=_object_spread_props(_object_spread({},CustomSpendingCapStory.parameters),{docs:_object_spread_props(_object_spread({},null===(_CustomSpendingCapStory_parameters=CustomSpendingCapStory.parameters)||void 0===_CustomSpendingCapStory_parameters?void 0:_CustomSpendingCapStory_parameters.docs),{source:_object_spread({originalSource:"args => {\n  const [{\n    customSpendingCap\n  }, updateArgs] = useArgs();\n  const handleOnChange = value => {\n    updateArgs({\n      customSpendingCap: value\n    });\n  };\n  return <CustomSpendingCap {...args} customSpendingCap={customSpendingCap} setCustomSpendingCap={handleOnChange} />;\n}"},null===(_CustomSpendingCapStory_parameters1=CustomSpendingCapStory.parameters)||void 0===_CustomSpendingCapStory_parameters1?void 0:null===(_CustomSpendingCapStory_parameters_docs=_CustomSpendingCapStory_parameters1.docs)||void 0===_CustomSpendingCapStory_parameters_docs?void 0:_CustomSpendingCapStory_parameters_docs.source)})})},"./ui/components/ui/tooltip/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>_tooltip__WEBPACK_IMPORTED_MODULE_0__.Z});var _tooltip__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/ui/tooltip/tooltip.js")},"./ui/components/ui/tooltip/tooltip.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>Tooltip});var prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_tippy__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-tippy/dist/react-tippy.js");function _assert_this_initialized(self){if(void 0===self)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _get_prototype_of(o){return(_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_set_prototype_of(subClass,superClass)}function _possible_constructor_return(self,call){return call&&("object"===_type_of(call)||"function"==typeof call)?call:_assert_this_initialized(self)}function _set_prototype_of(o,p){return(_set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function _is_native_reflect_construct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _create_super(Derived){var hasNativeReflectConstruct=_is_native_reflect_construct();return function _createSuperInternal(){var result,Super=_get_prototype_of(Derived);if(hasNativeReflectConstruct){var NewTarget=_get_prototype_of(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possible_constructor_return(this,result)}}var Tooltip=function(PureComponent){_inherits(Tooltip,PureComponent);var _super=_create_super(Tooltip);function Tooltip(){return _class_call_check(this,Tooltip),_super.apply(this,arguments)}return _create_class(Tooltip,[{key:"render",value:function render(){var _this_props=this.props,arrow=_this_props.arrow,children=_this_props.children,containerClassName=_this_props.containerClassName,disabled=_this_props.disabled,position=_this_props.position,html=_this_props.html,interactive=_this_props.interactive,size=_this_props.size,title=_this_props.title,trigger=_this_props.trigger,onHidden=_this_props.onHidden,offset=_this_props.offset,open=_this_props.open,wrapperClassName=_this_props.wrapperClassName,style=_this_props.style,theme=_this_props.theme,tabIndex=_this_props.tabIndex,tag=_this_props.tag;return title||html?react__WEBPACK_IMPORTED_MODULE_0__.createElement(tag,{className:wrapperClassName},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_tippy__WEBPACK_IMPORTED_MODULE_1__.Tooltip,{arrow:arrow,className:containerClassName,disabled:disabled,hideOnClick:!1,html:html,interactive:interactive,onHidden:onHidden,position:position,size:size,offset:offset,style:style,title:disabled?"":title,trigger:trigger,open:open,theme:"tippy-tooltip--mm-custom ".concat(theme),tabIndex:tabIndex||0,tag:tag},children)):react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:wrapperClassName},children)}}]),Tooltip}(react__WEBPACK_IMPORTED_MODULE_0__.PureComponent);_define_property(Tooltip,"defaultProps",{arrow:!0,children:null,containerClassName:"",html:null,interactive:void 0,onHidden:null,position:"left",offset:0,open:void 0,size:"small",title:null,trigger:"mouseenter focus",wrapperClassName:void 0,theme:"",tag:"div"}),_define_property(Tooltip,"propTypes",{arrow:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().node,containerClassName:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,disabled:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,html:prop_types__WEBPACK_IMPORTED_MODULE_2___default().node,interactive:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,offset:prop_types__WEBPACK_IMPORTED_MODULE_2___default().number,onHidden:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func,open:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,position:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOf(["top","right","bottom","left"]),size:prop_types__WEBPACK_IMPORTED_MODULE_2___default().oneOf(["small","regular","big"]),title:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,trigger:prop_types__WEBPACK_IMPORTED_MODULE_2___default().any,wrapperClassName:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,style:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object,theme:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,tabIndex:prop_types__WEBPACK_IMPORTED_MODULE_2___default().number,tag:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string})},"./ui/contexts/gasFee.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Po:()=>GasFeeContextProvider,YJ:()=>useGasFeeContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),_pages_confirmations_hooks_useGasFeeInputs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/pages/confirmations/hooks/useGasFeeInputs.js"),GasFeeContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({}),GasFeeContextProvider=function(param){var children=param.children,defaultEstimateToUse=param.defaultEstimateToUse,transaction=param.transaction,minimumGasLimit=param.minimumGasLimit,editGasMode=param.editGasMode,gasFeeDetails=(0,_pages_confirmations_hooks_useGasFeeInputs__WEBPACK_IMPORTED_MODULE_1__.a)(defaultEstimateToUse,transaction,minimumGasLimit,editGasMode);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(GasFeeContext.Provider,{value:gasFeeDetails},children)};function useGasFeeContext(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(GasFeeContext)}GasFeeContextProvider.propTypes={children:prop_types__WEBPACK_IMPORTED_MODULE_2___default().node.isRequired,defaultEstimateToUse:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,transaction:prop_types__WEBPACK_IMPORTED_MODULE_2___default().object,minimumGasLimit:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string,editGasMode:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string}},"./ui/hooks/useCurrencyDisplay.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>useCurrencyDisplay});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),_helpers_utils_confirm_tx_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/helpers/utils/confirm-tx.util.ts"),_selectors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/selectors/index.js"),_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/ducks/metamask/metamask.js"),_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./shared/modules/conversion.utils.ts"),_shared_constants_network__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./shared/constants/network.ts"),_shared_modules_Numeric__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./shared/modules/Numeric.ts"),_shared_constants_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./shared/constants/common.ts");function _object_without_properties(source,excluded){if(null==source)return{};var key,i,target=_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function useCurrencyDisplay(inputValue,_param){var suffix,displayValue=_param.displayValue,prefix=_param.prefix,numberOfDecimals=_param.numberOfDecimals,denomination=_param.denomination,currency=_param.currency,opts=_object_without_properties(_param,["displayValue","prefix","numberOfDecimals","denomination","currency"]),currentCurrency=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.v9)(_selectors__WEBPACK_IMPORTED_MODULE_3__.TV3),nativeCurrency=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.v9)(_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_4__.JK),conversionRate=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.v9)(_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_4__.PC),isUserPreferredCurrency=currency===currentCurrency,value=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function(){var ethDisplayValue;return displayValue||(currency!==nativeCurrency&&(isUserPreferredCurrency||nativeCurrency)?isUserPreferredCurrency&&conversionRate?(0,_helpers_utils_confirm_tx_util__WEBPACK_IMPORTED_MODULE_2__.xG)((0,_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_5__.nu)({value:inputValue,fromCurrency:nativeCurrency,toCurrency:currency,conversionRate:conversionRate,numberOfDecimals:numberOfDecimals||2,toDenomination:denomination}),currency):null:("0"===(ethDisplayValue=new _shared_modules_Numeric__WEBPACK_IMPORTED_MODULE_7__.D(inputValue,16,_shared_constants_common__WEBPACK_IMPORTED_MODULE_8__.E.WEI).toDenomination(denomination||_shared_constants_common__WEBPACK_IMPORTED_MODULE_8__.E.ETH).round(numberOfDecimals||6).toBase(10).toString())&&inputValue&&0!==Number(inputValue)&&(ethDisplayValue="<0.000001"),ethDisplayValue))},[inputValue,nativeCurrency,conversionRate,displayValue,numberOfDecimals,denomination,currency,isUserPreferredCurrency]);if(!opts.hideLabel){var currencyTickerSymbol=Object.values(_shared_constants_network__WEBPACK_IMPORTED_MODULE_6__.VL).includes(currency)?currency:null==currency?void 0:currency.toUpperCase();suffix=opts.suffix||currencyTickerSymbol}return["".concat(prefix||"").concat(value).concat(suffix?" ".concat(suffix):""),{prefix:prefix,value:value,suffix:suffix}]}},"./ui/hooks/useUserPreferencedCurrency.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>useUserPreferencedCurrency});var react_redux__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-redux/es/index.js"),_selectors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/selectors/index.js"),_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/ducks/metamask/metamask.js"),_helpers_constants_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/constants/common.ts"),_shared_constants_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./shared/constants/common.ts");function useUserPreferencedCurrency(type){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},nativeCurrency=(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.v9)(_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_2__.JK),useNativeCurrencyAsPrimaryCurrency=(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.v9)(_selectors__WEBPACK_IMPORTED_MODULE_1__.Izy,react_redux__WEBPACK_IMPORTED_MODULE_0__.wU).useNativeCurrencyAsPrimaryCurrency,showFiat=(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.v9)(_selectors__WEBPACK_IMPORTED_MODULE_1__.i8I),fiatReturn={currency:(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.v9)(_selectors__WEBPACK_IMPORTED_MODULE_1__.TV3),numberOfDecimals:opts.numberOfDecimals||opts.fiatNumberOfDecimals||2},nativeReturn={currency:nativeCurrency||_shared_constants_common__WEBPACK_IMPORTED_MODULE_4__.E.ETH,numberOfDecimals:opts.numberOfDecimals||opts.ethNumberOfDecimals||8};if(opts.showNativeOverride)return nativeReturn;if(opts.showFiatOverride);else if(!showFiat||type===_helpers_constants_common__WEBPACK_IMPORTED_MODULE_3__._8&&useNativeCurrencyAsPrimaryCurrency||type===_helpers_constants_common__WEBPACK_IMPORTED_MODULE_3__.Vb&&!useNativeCurrencyAsPrimaryCurrency)return nativeReturn;return fiatReturn}},"./ui/pages/confirmations/components/custom-spending-cap/custom-spending-cap.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>CustomSpendingCap});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),bignumber=__webpack_require__("./node_modules/bignumber.js/bignumber.js"),bignumber_default=__webpack_require__.n(bignumber),dist_browser=__webpack_require__("./node_modules/ethereumjs-util/dist.browser/index.js"),i18n=__webpack_require__("./ui/contexts/i18n.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),app=__webpack_require__("./ui/ducks/app/app.ts"),transactions_controller_utils=__webpack_require__("./shared/lib/transactions-controller-utils.js"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts"),tokens=__webpack_require__("./shared/constants/tokens.js"),Numeric=__webpack_require__("./shared/modules/Numeric.ts"),actions=__webpack_require__("./ui/store/actions.ts"),confirm_approve_util=__webpack_require__("./ui/pages/confirmations/confirm-approve/confirm-approve.util.js"),gasFee=__webpack_require__("./ui/contexts/gasFee.js"),zendesk_url=__webpack_require__("./ui/helpers/constants/zendesk-url.js"),tooltip=__webpack_require__("./ui/components/ui/tooltip/index.js"),CustomSpendingCapTooltip=function(param){var tooltipContentText=param.tooltipContentText,tooltipIcon=param.tooltipIcon;return react.createElement(component_library.xu,{display:design_system.sS.InlineFlex,alignItems:design_system.g1.center},react.createElement(tooltip.Z,{interactive:!0,position:"top",html:react.createElement(component_library.xv,{variant:design_system.rK.bodySm,color:design_system.d9.textAlternative},tooltipContentText)},tooltipIcon?react.createElement(component_library.JO,{name:component_library.uH.Danger,size:component_library.Jh.Inherit,color:design_system.EY.errorDefault}):""!==tooltipIcon&&react.createElement(component_library.JO,{name:component_library.uH.Question,size:component_library.Jh.Inherit,color:design_system.EY.iconAlternative})))};function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function _ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function CustomSpendingCap(param){var _ref,txParams=param.txParams,tokenName=param.tokenName,currentTokenBalance=param.currentTokenBalance,dappProposedValue=param.dappProposedValue,siteOrigin=param.siteOrigin,passTheErrorText=param.passTheErrorText,decimals=param.decimals,setInputChangeInProgress=param.setInputChangeInProgress,customSpendingCap=param.customSpendingCap,setCustomSpendingCap=param.setCustomSpendingCap,t=(0,react.useContext)(i18n.OO),dispatch=(0,es.I0)(),updateTransaction=(0,gasFee.YJ)().updateTransaction,inputRef=(0,react.useRef)(null),_useState=_sliced_to_array((0,react.useState)(""),2),error=_useState[0],setError=_useState[1],_useState1=_sliced_to_array((0,react.useState)(customSpendingCap!==String(dappProposedValue)),2),showUseSiteSuggestionButton=_useState1[0],setShowUseSiteSuggestionButton=_useState1[1],inputLogicEmptyStateText=t("inputLogicEmptyState"),replaceCommaToDot=function(inputValue){return inputValue.replace(RegExp(",","gu"),".")},decConversionGreaterThan=function(tokenValue,tokenBalance){return new Numeric.D(Number(replaceCommaToDot(tokenValue)),10).greaterThan(Number(tokenBalance),10)},getInputTextLogic=function(inputNumber){return new Numeric.D(Number(replaceCommaToDot(inputNumber)),10).lessThanOrEqualTo(new Numeric.D(Number(currentTokenBalance),10))?{className:"custom-spending-cap__lowerValue",description:t("inputLogicEqualOrSmallerNumber",[react.createElement(component_library.xv,{key:"custom-spending-cap",variant:design_system.rK.bodySmBold,as:"span"},replaceCommaToDot(inputNumber)," ",tokenName)])}:decConversionGreaterThan(inputNumber,currentTokenBalance)?{className:"custom-spending-cap__higherValue",description:t("inputLogicHigherNumber")}:{className:"custom-spending-cap__emptyState",description:t("inputLogicEmptyState")}},_useState2=_sliced_to_array((0,react.useState)(getInputTextLogic(customSpendingCap).description),2),customSpendingCapText=_useState2[0],setCustomSpendingCapText=_useState2[1],handleChange=(_ref=_async_to_generator(function(valueInput){var _match_,spendingCapError,inputTextLogicDescription,match,maxTokenAmount,newData,from,to,txValue,estimatedGasLimit;return _ts_generator(this,function(_state){switch(_state.label){case 0:if(!txParams)return[2];if(setInputChangeInProgress(!0),spendingCapError="",inputTextLogicDescription=getInputTextLogic(valueInput).description,(null==(match=tokens.BZ.exec(replaceCommaToDot(valueInput)))?void 0:null===(_match_=match[1])||void 0===_match_?void 0:_match_.length)>decimals)return setInputChangeInProgress(!1),[2];if(valueInput&&!tokens.d0.test(valueInput)?(spendingCapError=t("spendingCapError"),setCustomSpendingCapText(t("spendingCapErrorDescription",[siteOrigin])),setError(spendingCapError)):(setCustomSpendingCapText(inputTextLogicDescription),setError("")),maxTokenAmount=(0,transactions_controller_utils.cp)(tokens.oc,decimals),Number(valueInput.length)>1&&Number(valueInput)&&new(bignumber_default())(valueInput).greaterThan(maxTokenAmount)&&setError(spendingCapError=t("spendLimitTooLarge")),setCustomSpendingCap(String(valueInput)),dispatch((0,app.sA)(String(valueInput))),!(""!==String(valueInput)))return[3,6];_state.label=1;case 1:return _state.trys.push([1,5,,6]),newData=(0,confirm_approve_util.s)(txParams.data,{customPermissionAmount:valueInput,decimals:decimals}),from=txParams.from,to=txParams.to,txValue=txParams.value,[4,(0,actions.QH8)({from:from,to:to,value:txValue,data:newData})];case 2:if(!(estimatedGasLimit=_state.sent()))return[3,4];return[4,updateTransaction({gasLimit:(0,conversion_utils.Z8)((0,dist_browser.addHexPrefix)(estimatedGasLimit))})];case 3:_state.sent(),_state.label=4;case 4:return[3,6];case 5:return console.error("Error in trying to update gas limit",_state.sent()),[3,6];case 6:return setInputChangeInProgress(!1),[2]}})}),function handleChange(valueInput){return _ref.apply(this,arguments)});(0,react.useEffect)(function(){customSpendingCap===String(dappProposedValue)?setShowUseSiteSuggestionButton(!1):setShowUseSiteSuggestionButton(!0)},[customSpendingCap,dappProposedValue]),(0,react.useEffect)(function(){passTheErrorText(error)},[error,passTheErrorText]),(0,react.useEffect)(function(){inputRef.current&&inputRef.current.focus({preventScroll:!0})},[inputRef.current]);var chooseTooltipContentText=decConversionGreaterThan(customSpendingCap,currentTokenBalance)?t("warningTooltipText",[react.createElement(component_library.xv,{key:"tooltip-text",variant:design_system.rK.bodySmBold,as:"span",color:design_system.d9.errorDefault},react.createElement(component_library.JO,{name:component_library.uH.Danger,size:component_library.Jh.Inherit})," ",t("beCareful"))]):t("inputLogicEmptyState");return react.createElement(react.Fragment,null,react.createElement(component_library.xu,{className:"custom-spending-cap",display:design_system.sS.Flex,alignItems:design_system.g1.flexStart,flexDirection:design_system.Qb.Column,gap:2,padding:4,backgroundColor:design_system.lP.backgroundAlternative,borderRadius:design_system.$u.SM},react.createElement(component_library.xu,{display:design_system.sS.Flex,alignItems:design_system.g1.center,gap:1,width:design_system.Sw.Full},react.createElement("div",null,react.createElement(component_library.__,{htmlFor:"custom-spending-cap",display:design_system.sS.Inline,marginRight:1},t("customSpendingCap")),react.createElement(CustomSpendingCapTooltip,{tooltipContentText:replaceCommaToDot(customSpendingCap)?chooseTooltipContentText:"",tooltipIcon:replaceCommaToDot(customSpendingCap)?decConversionGreaterThan(customSpendingCap,currentTokenBalance):""})),showUseSiteSuggestionButton&&react.createElement(component_library.ZP,{marginLeft:"auto",size:design_system.$u.auto,onClick:function(e){e.preventDefault(),setShowUseSiteSuggestionButton(!1),handleChange(dappProposedValue)}},t("useSiteSuggestion"))),react.createElement(component_library.nv,{inputRef:inputRef,inputProps:{"data-testid":"custom-spending-cap-input",color:decConversionGreaterThan(customSpendingCap,currentTokenBalance)?design_system.d9.errorDefault:design_system.d9.textDefault,paddingInlineEnd:4},id:"custom-spending-cap",onChange:function(e){return handleChange(e.target.value)},placeholder:t("enterANumber"),value:customSpendingCap,endAccessory:react.createElement(component_library.ZP,{onClick:function(e){e.preventDefault(),handleChange(currentTokenBalance)},"data-testid":"custom-spending-cap-max-button"},t("max")),width:design_system.Sw.Full}),react.createElement(component_library.RU,{color:error?design_system.d9.errorDefault:design_system.d9.textDefault,variant:design_system.rK.bodySm},error||(replaceCommaToDot(customSpendingCap)?customSpendingCapText:inputLogicEmptyStateText)),react.createElement(component_library.ZP,{size:design_system.$u.SM,href:zendesk_url.Z.TOKEN_ALLOWANCE_WITH_SPENDING_CAP,externalLink:!0},t("learnMoreUpperCase"))))}CustomSpendingCapTooltip.propTypes={tooltipContentText:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().node]),tooltipIcon:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool])},CustomSpendingCap.propTypes={txParams:prop_types_default().object.isRequired,tokenName:prop_types_default().string,currentTokenBalance:prop_types_default().string,dappProposedValue:prop_types_default().string,siteOrigin:prop_types_default().string,passTheErrorText:prop_types_default().func,decimals:prop_types_default().string,setInputChangeInProgress:prop_types_default().func.isRequired,customSpendingCap:prop_types_default().string,setCustomSpendingCap:prop_types_default().func.isRequired}},"./ui/pages/confirmations/confirm-approve/confirm-approve.util.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>getCustomTxParamsData});var _metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@metamask/transaction-controller/dist/index.js"),_shared_lib_swaps_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./shared/lib/swaps-utils.js"),_shared_modules_transaction_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./shared/modules/transaction.utils.js"),_helpers_utils_token_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/utils/token-util.js"),_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./shared/modules/conversion.utils.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function getCustomTxParamsData(data,param){var customPermissionAmount=param.customPermissionAmount,decimals=param.decimals,tokenData=(0,_shared_modules_transaction_utils__WEBPACK_IMPORTED_MODULE_2__.I1)(data);if(tokenData){if(tokenData.name!==_metamask_transaction_controller__WEBPACK_IMPORTED_MODULE_0__.TransactionType.tokenMethodApprove)throw Error("Invalid data; should be 'approve' method, but instead is '".concat(tokenData.name,"'"))}else throw Error("Invalid data");var spender=(0,_helpers_utils_token_util__WEBPACK_IMPORTED_MODULE_3__.Qn)(tokenData);spender.startsWith("0x")&&(spender=spender.substring(2));var _data_split=_sliced_to_array(data.split(spender),2),signature=_data_split[0],tokenValue=_data_split[1];if(signature&&tokenValue){if(64!==tokenValue.length)throw Error("Invalid token value; should be exactly 64 hex digits long (u256)")}else throw Error("Invalid data");var customPermissionValue=(0,_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_4__.X0)((0,_shared_lib_swaps_utils__WEBPACK_IMPORTED_MODULE_1__.wg)(customPermissionAmount,decimals));if(customPermissionValue.length>64)throw Error("Custom value is larger than u256");return customPermissionValue=customPermissionValue.padStart(tokenValue.length,"0"),"".concat(signature).concat(spender).concat(customPermissionValue)}}}]);