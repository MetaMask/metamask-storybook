"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[3913],{"./ui/components/app/snaps/snap-ui-renderer/snap-ui-renderer.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,ErrorStory:()=>ErrorStory,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _DefaultStory_parameters,_DefaultStory_parameters_docs,_DefaultStory_parameters1,_ErrorStory_parameters,_ErrorStory_parameters_docs,_ErrorStory_parameters1,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),_store_store__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/store/store.ts"),_storybook_test_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./.storybook/test-data.js"),___WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/components/app/snaps/snap-ui-renderer/index.js");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var store=(0,_store_store__WEBPACK_IMPORTED_MODULE_2__.Z)(_storybook_test_data__WEBPACK_IMPORTED_MODULE_3__.Z);let __WEBPACK_DEFAULT_EXPORT__={title:"Components/App/SnapUIRenderer",component:___WEBPACK_IMPORTED_MODULE_4__.V,decorators:[function(story){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_redux__WEBPACK_IMPORTED_MODULE_1__.zt,{store:store},story())}]};var DefaultStory=function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(___WEBPACK_IMPORTED_MODULE_4__.V,{snapId:"local:http://localhost:8080/",interfaceId:"test-interface"})},ErrorStory=function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(___WEBPACK_IMPORTED_MODULE_4__.V,{snapId:"local:http://localhost:8080/",interfaceId:"error-interface"})};DefaultStory.parameters=_object_spread_props(_object_spread({},DefaultStory.parameters),{docs:_object_spread_props(_object_spread({},null===(_DefaultStory_parameters=DefaultStory.parameters)||void 0===_DefaultStory_parameters?void 0:_DefaultStory_parameters.docs),{source:_object_spread({originalSource:'() => <SnapUIRenderer snapId="local:http://localhost:8080/" interfaceId="test-interface" />'},null===(_DefaultStory_parameters1=DefaultStory.parameters)||void 0===_DefaultStory_parameters1?void 0:null===(_DefaultStory_parameters_docs=_DefaultStory_parameters1.docs)||void 0===_DefaultStory_parameters_docs?void 0:_DefaultStory_parameters_docs.source)})}),ErrorStory.parameters=_object_spread_props(_object_spread({},ErrorStory.parameters),{docs:_object_spread_props(_object_spread({},null===(_ErrorStory_parameters=ErrorStory.parameters)||void 0===_ErrorStory_parameters?void 0:_ErrorStory_parameters.docs),{source:_object_spread({originalSource:'() => <SnapUIRenderer snapId="local:http://localhost:8080/" interfaceId="error-interface" />'},null===(_ErrorStory_parameters1=ErrorStory.parameters)||void 0===_ErrorStory_parameters1?void 0:null===(_ErrorStory_parameters_docs=_ErrorStory_parameters1.docs)||void 0===_ErrorStory_parameters_docs?void 0:_ErrorStory_parameters_docs.source)})})},"./ui/components/app/snaps/snap-ui-renderer/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V:()=>SnapUIRenderer});var react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),component=__webpack_require__("./node_modules/@metamask/snaps-sdk/dist/esm/ui/component.js"),redux_toolkit_cjs_development=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.cjs.development.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),metamask_template_renderer=__webpack_require__("./ui/components/app/metamask-template-renderer/metamask-template-renderer.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),snap_delineator=__webpack_require__("./ui/components/app/snaps/snap-delineator/index.js"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),util=__webpack_require__("./ui/helpers/utils/util.js"),selectors=__webpack_require__("./ui/selectors/index.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),copyable=__webpack_require__("./ui/components/app/snaps/copyable/index.js"),snaps=__webpack_require__("./ui/helpers/constants/snaps/index.js"),contexts_snaps=__webpack_require__("./ui/contexts/snaps/index.ts");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _object_without_properties(source,excluded){if(null==source)return{};var key,i,target=_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function row_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function row_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){row_define_property(target,key,source[key])})}return target}function row_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=row_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function row_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function form_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function form_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){form_define_property(target,key,source[key])})}return target}function form_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=form_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function form_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}var COMPONENT_MAPPING={panel:function(_param){var element=_param.element,params=_object_without_properties(_param,["element"]);return{element:"Box",children:element.children.map(function(children){return mapToTemplate(_object_spread_props(_object_spread({},params),{element:children}))}),props:{display:design_system.sS.Flex,flexDirection:design_system.Qb.Column,className:"snap-ui-renderer__panel",color:design_system.d9.textDefault}}},heading:function(param){return{element:"Text",children:param.element.value,props:{variant:design_system.rK.headingSm,overflowWrap:design_system.mn.Anywhere,marginTop:1,marginBottom:1}}},text:function(param){var element=param.element;return{element:"SnapUIMarkdown",children:element.value,props:{markdown:element.markdown}}},divider:function(){return{element:"Box",props:{className:"snap-ui-renderer__divider",backgroundColor:design_system.kf.borderDefault,marginTop:1,marginBottom:1}}},spinner:function(){return{element:"Spinner",props:{className:"snap-ui-renderer__spinner"}}},image:function(param){return{element:"SnapUIImage",props:{value:param.element.value}}},copyable:function(param){var element=param.element;return{element:"Copyable",props:{text:element.value,sensitive:element.sensitive,marginTop:1,marginBottom:1}}},row:function(_param){var element=_param.element,params=row_object_without_properties(_param,["element"]);return{element:"ConfirmInfoRow",children:[mapToTemplate(row_object_spread({element:element.value},params))],props:{label:element.label,variant:element.variant,style:{marginLeft:"-8px",marginRight:"-8px"}}}},address:function(param){return{element:"ConfirmInfoRowAddress",props:{address:param.element.value}}},button:function(param){var element=param.element;return{element:"SnapUIButton",props:{type:element.buttonType,variant:element.variant,name:element.name},children:element.value}},form:function(_param){var element=_param.element,params=form_object_without_properties(_param,["element"]);return{element:"SnapUIForm",children:element.children.map(function(children){return mapToTemplate(form_object_spread({element:children,form:element.name},params))}),props:{name:element.name}}},input:function(param){var element=param.element,form=param.form;return{element:"SnapUIInput",props:{id:element.name,placeholder:element.placeholder,label:element.label,textFieldProps:{type:element.inputType},name:element.name,form:form}}}};function utils_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function utils_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){utils_define_property(target,key,source[key])})}return target}function utils_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function utils_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):utils_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var mapToTemplate=function(params){var type=params.element.type;params.elementKeyIndex.value+=1;var indexKey="".concat(params.rootKey,"_snap_ui_element_").concat(type,"__").concat(params.elementKeyIndex.value);return utils_object_spread_props(utils_object_spread({},COMPONENT_MAPPING[type](params)),{key:indexKey})},SnapUIRendererComponent=function(param){var snapId=param.snapId,_param_delineatorType=param.delineatorType,delineatorType=void 0===_param_delineatorType?snaps.P2.Content:_param_delineatorType,_param_isCollapsable=param.isCollapsable,isCollapsable=void 0!==_param_isCollapsable&&_param_isCollapsable,_param_isCollapsed=param.isCollapsed,isCollapsed=void 0!==_param_isCollapsed&&_param_isCollapsed,_param_isLoading=param.isLoading,isLoading=void 0!==_param_isLoading&&_param_isLoading,_param_isPrompt=param.isPrompt,inputValue=param.inputValue,onInputChange=param.onInputChange,placeholder=param.placeholder,onClick=param.onClick,boxProps=param.boxProps,interfaceId=param.interfaceId,t=(0,useI18nContext.C)(),targetSubjectMetadata=(0,es.v9)(function(state){return(0,selectors.VqO)(state,snapId)}),snapName=(0,util.NZ)(snapId,targetSubjectMetadata),content=(0,es.v9)(function(state){return(0,selectors.Bj)(state,interfaceId)}),isValidComponent=content&&(0,component.p)(content),elementKeyIndex={value:0},sections=(0,react.useMemo)(function(){return isValidComponent&&mapToTemplate({element:content,rootKey:(0,redux_toolkit_cjs_development.nanoid)(),elementKeyIndex:elementKeyIndex})},[content,isValidComponent,elementKeyIndex]);return isLoading||!content?react.createElement(snap_delineator.Z,{snapName:snapName,type:delineatorType,isCollapsable:isCollapsable,isCollapsed:isCollapsed,onClick:onClick,boxProps:boxProps,isLoading:isLoading}):isValidComponent?react.createElement(snap_delineator.Z,{snapName:snapName,type:delineatorType,isCollapsable:isCollapsable,isCollapsed:isCollapsed,onClick:onClick,boxProps:boxProps},react.createElement(component_library.xu,{className:"snap-ui-renderer__content"},react.createElement(contexts_snaps.lX,{snapId:snapId,interfaceId:interfaceId},react.createElement(metamask_template_renderer.Z,{sections:sections})),void 0!==_param_isPrompt&&_param_isPrompt&&react.createElement(component_library.Xn,{marginTop:4,className:"snap-prompt-input",maxLength:300,value:inputValue,onChange:onInputChange,placeholder:placeholder}))):react.createElement(snap_delineator.Z,{isCollapsable:isCollapsable,isCollapsed:isCollapsed,snapName:snapName,type:snaps.P2.Error,onClick:onClick,boxProps:boxProps},react.createElement(component_library.xv,{variant:design_system.rK.bodySm,marginBottom:4},t("snapsUIError",[react.createElement("b",{key:"0"},snapName)])),react.createElement(copyable.C,{text:t("snapsInvalidUIError")}))},SnapUIRenderer=(0,react.memo)(SnapUIRendererComponent,function(prevProps,nextProps){return(0,lodash.isEqual)(prevProps,nextProps)});SnapUIRendererComponent.propTypes={snapId:prop_types_default().string,delineatorType:prop_types_default().string,isCollapsable:prop_types_default().bool,isCollapsed:prop_types_default().bool,isLoading:prop_types_default().bool,isPrompt:prop_types_default().bool,inputValue:prop_types_default().string,onInputChange:prop_types_default().func,placeholder:prop_types_default().string,onClick:prop_types_default().func,boxProps:prop_types_default().object,interfaceId:prop_types_default().string}}}]);