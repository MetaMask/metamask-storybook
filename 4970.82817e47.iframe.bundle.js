(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[4970],{"./node_modules/@metamask-institutional/configuration-client/dist/ConfigurationClient.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConfigurationClient=void 0;let constants_1=__webpack_require__("./node_modules/@metamask-institutional/configuration-client/dist/constants.js");exports.ConfigurationClient=class{constructor(configurationApiUrl=constants_1.MMI_CONFIGURATION_API_URL){this.configurationApiUrl=configurationApiUrl}async getConfiguration(){console.log(`Fetching MMI configuration from ${this.configurationApiUrl}`);try{let response=await fetch(this.configurationApiUrl,{method:"GET"});return await response.json()}catch(e){throw console.log("Error fetching MMI configuration"),Error(e)}}}},"./node_modules/@metamask-institutional/configuration-client/dist/constants.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MMI_CONFIGURATION_API_URL=void 0,exports.MMI_CONFIGURATION_API_URL="https://configuration.metamask-institutional.io/v2/configuration/default"},"./node_modules/@metamask-institutional/configuration-client/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ConfigurationClient=void 0;var ConfigurationClient_1=__webpack_require__("./node_modules/@metamask-institutional/configuration-client/dist/ConfigurationClient.js");Object.defineProperty(exports,"ConfigurationClient",{enumerable:!0,get:function(){return ConfigurationClient_1.ConfigurationClient}})},"./node_modules/@metamask-institutional/custody-controller/dist/custody.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustodyController=void 0;let custody_keyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/index.js"),obs_store_1=__webpack_require__("./node_modules/@metamask/obs-store/dist/index.js"),utils_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/dist/utils.js");exports.CustodyController=class{constructor(opts={}){let{initState,captureException}=opts;this.store=new obs_store_1.ObservableStore({custodyAccountDetails:{},custodianConnectRequest:{},...initState}),this.captureException=captureException}storeCustodyStatusMap(custody,custodyStatusMap){try{let{custodyStatusMaps}=this.store.getState();this.store.updateState({custodyStatusMaps:{...custodyStatusMaps,[custody.toLowerCase()]:custodyStatusMap}})}catch(error){this.captureException(error)}}storeSupportedChainsForAddress(address,supportedChains,custodianName){try{let{custodianSupportedChains}=this.store.getState();this.store.updateState({custodianSupportedChains:{...custodianSupportedChains,[address]:{supportedChains:supportedChains.map(chain=>Number(chain).toString()),custodianName:custodianName}}})}catch(error){this.captureException(error)}}setAccountDetails(newAccountDetails){try{let{custodyAccountDetails}=this.store.getState(),accountsToAdd={};newAccountDetails.forEach(item=>{custodyAccountDetails[(0,utils_1.toChecksumHexAddress)(item.address)]||(accountsToAdd[(0,utils_1.toChecksumHexAddress)(item.address)]=item)}),this.store.updateState({custodyAccountDetails:{...custodyAccountDetails,...accountsToAdd}})}catch(error){this.captureException(error)}}removeAccount(address){try{let{custodyAccountDetails}=this.store.getState();delete custodyAccountDetails[utils_1.toChecksumHexAddress(address)],this.store.updateState({custodyAccountDetails})}catch(error){this.captureException(error)}}setWaitForConfirmDeepLinkDialog(waitForConfirmDeepLinkDialog){this.store.updateState({waitForConfirmDeepLinkDialog})}getAccountDetails(address){let{custodyAccountDetails}=this.store.getState();return custodyAccountDetails[(0,utils_1.toChecksumHexAddress)(address)]}getCustodyTypeByAddress(address){var _a;let{custodyAccountDetails}=this.store.getState();return null===(_a=custodyAccountDetails[address])||void 0===_a?void 0:_a.custodyType}getAllCustodyTypes(){var _a;try{let custodyTypes=new Set,{custodyAccountDetails}=this.store.getState();for(let address of Object.keys(custodyAccountDetails))custodyTypes.add(null===(_a=custodyAccountDetails[address])||void 0===_a?void 0:_a.custodyType);return custodyTypes}catch(error){this.captureException(error)}}handleMmiCustodianInUse(req){var _a;try{if(!req.params.custodianName)throw Error("Missing parameter: custodianName");let custodian=custody_keyring_1.CUSTODIAN_TYPES[req.params.custodianName.toUpperCase()],allowed=!1;if(custodian)for(let origin of custodian.origins)origin.test(req.origin)&&(allowed=!0);if(!allowed)throw Error("Forbidden");let{custodyAccountDetails}=this.store.getState();for(let address of Object.keys(custodyAccountDetails))if((null===(_a=custodyAccountDetails[address])||void 0===_a?void 0:_a.custodyType)===`Custody - ${custodian.name}`)return!0;return!1}catch(error){throw this.captureException(error),error}}async handleMmiCheckIfTokenIsPresent({token,envName,keyring}){try{for(let address of(await keyring.getAccounts())){let accountDetails=keyring.getAccountDetails(address);if(accountDetails.envName===envName&&accountDetails.authDetails.refreshToken===token)return!0}return!1}catch(error){return this.captureException(error),!1}}}},"./node_modules/@metamask-institutional/custody-controller/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toChecksumHexAddress=exports.CustodyController=void 0;var custody_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/dist/custody.js");Object.defineProperty(exports,"CustodyController",{enumerable:!0,get:function(){return custody_1.CustodyController}});var utils_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/dist/utils.js");Object.defineProperty(exports,"toChecksumHexAddress",{enumerable:!0,get:function(){return utils_1.toChecksumHexAddress}})},"./node_modules/@metamask-institutional/custody-controller/dist/utils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toChecksumHexAddress=void 0;let util_1=__webpack_require__("./node_modules/@ethereumjs/util/dist/index.js");function toChecksumHexAddress(address){if(!address)return"";let hexPrefixed=(0,util_1.addHexPrefix)(address);return(0,util_1.isHexString)(hexPrefixed)?(0,util_1.toChecksumAddress)((0,util_1.addHexPrefix)(address)):hexPrefixed}exports.toChecksumHexAddress=toChecksumHexAddress},"./node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustodyKeyring=void 0;let util_1=__webpack_require__("./node_modules/@ethereumjs/util/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),crypto_1=__importDefault(__webpack_require__("?a04e")),events_1=__webpack_require__("./node_modules/events/events.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/constants/index.js"),migrations_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/migrations/index.js"),migrator_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/migrations/migrator.js");class CustodyKeyring extends events_1.EventEmitter{constructor(opts={}){super(),this.trackingActiveByCredentials={},this.accounts=[],this.selectedAddresses=[],this.accountsDetails=[],this.sdkList=[],this.meta={},this.mmiConfigurationController=opts.mmiConfigurationController}getUniqueAccountDetails(account){return this.hashAuthDetails(account.authDetails,account.envName)}serialize(){return console.log("Serializing custody keyring"),Promise.resolve({accounts:this.accounts,selectedAddresses:this.selectedAddresses,accountsDetails:this.accountsDetails,meta:this.meta})}deserialize(opts={}){return new Promise(resolve=>{let migratedOpts=new migrator_1.Migrator({migrations:migrations_1.migrations}).migrateData({custodianType:this.custodianType,type:this.type,authType:this.authType,...opts});this.accounts=migratedOpts.accounts||[],this.selectedAddresses=migratedOpts.selectedAddresses||[],this.accountsDetails=migratedOpts.accountsDetails||[],this.meta=migratedOpts.meta||{};let custodians=this.getCustodians();this.accountsDetails.filter(account=>!account.envName).forEach(account=>{var _a;account.envName=null===(_a=custodians.find(c=>c.apiUrl===account.apiUrl))||void 0===_a?void 0:_a.envName}),this.selectedAddresses.filter(account=>!account.envName).forEach(account=>{var _a;account.envName=null===(_a=custodians.find(c=>c.apiUrl===account.apiUrl))||void 0===_a?void 0:_a.envName}),this.accountsDetails.reduce((result,details)=>{let hash=this.getUniqueAccountDetails(details);return result.find(account=>hash===account.hash)||result.push({hash,authDetails:details.authDetails,envName:details.envName}),result},[]).forEach(item=>this.getSDK(item.authDetails,item.envName)),resolve()})}convertExtensionCustodianAccountToSDKCustodianAccount(account){let{token,...accountWithoutToken}=account;return{...accountWithoutToken,address:account.address.toLowerCase(),authDetails:this.createAuthDetails(account.token)}}setSelectedAddresses(addresses){this.selectedAddresses=addresses.map(this.convertExtensionCustodianAccountToSDKCustodianAccount.bind(this))}addAccounts(n){return new Promise(resolve=>{this.accounts||(this.accounts=[]);for(let i=0;i<n;i++){let selectedAccountDetails=this.selectedAddresses.shift(),address=null==selectedAccountDetails?void 0:selectedAccountDetails.address;address&&!this.accounts.includes(address)&&(selectedAccountDetails.meta={version:migrations_1.migrations.length},this.accountsDetails.push(selectedAccountDetails),this.accounts.push(address),this.getSDK(selectedAccountDetails.authDetails,selectedAccountDetails.envName))}resolve(this.accounts)})}getAccounts(){return Promise.resolve(this.accounts.slice())}removeAccount(address){this.accounts=this.accounts.filter(a=>a.toLowerCase()!==address.toLowerCase()),this.accountsDetails=this.accountsDetails.filter(a=>a.address.toLowerCase()!==address.toLowerCase())}hashAuthDetails(authDetails,envName){let identifier;let{apiUrl}=this.getCustodianFromEnvName(envName);return authDetails.jwt?identifier=authDetails.jwt+apiUrl:authDetails.refreshToken&&(identifier=authDetails.refreshToken+apiUrl),crypto_1.default.createHash("sha256").update(identifier).digest("hex")}replaceRefreshTokenAuthDetails(address,refreshToken){let{authDetails,envName}=this.getAccountDetails(address);this.getSDK(authDetails,envName).changeRefreshTokenAuthDetails({refreshToken})}updateAccountsDetailsWithNewRefreshToken(oldRefreshToken,newRefreshToken,envName){for(let account of this.accountsDetails){let authDetails=account.authDetails;authDetails.refreshToken===oldRefreshToken&&account.envName===envName&&(authDetails.refreshToken=newRefreshToken)}}handleRefreshTokenChangeEvent(event,envName){this.updateAccountsDetailsWithNewRefreshToken(event.oldRefreshToken,event.newRefreshToken,envName);let payload={oldRefreshToken:event.oldRefreshToken,newRefreshToken:event.newRefreshToken};this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,payload)}handleInteractiveRefreshTokenChangeEvent(event){this.emit(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,event)}createAuthDetails(token){let authDetails;return this.authType===types_1.AuthTypes.TOKEN?authDetails={jwt:token}:this.authType===types_1.AuthTypes.REFRESH_TOKEN&&(authDetails={refreshToken:token}),authDetails}getSDK(authDetails,envName){let hash=this.hashAuthDetails(authDetails,envName),found=this.sdkList.find(item=>item.hash===hash);if(found)return found.sdk;let sdk=this.sdkFactory(authDetails,envName);return sdk.on(constants_1.REFRESH_TOKEN_CHANGE_EVENT,event=>this.handleRefreshTokenChangeEvent(event,envName)),sdk.on(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,event=>this.handleInteractiveRefreshTokenChangeEvent(event)),this.sdkList.push({sdk,hash}),sdk}async getCustodianAccounts(token,envName,searchText,getNonImportedAccounts=!0){let accounts;let authDetails=this.createAuthDetails(token),sdk=this.getSDK(authDetails,envName);return(accounts=searchText?searchText.startsWith("0x")?await sdk.getEthereumAccountsByAddress(searchText,constants_1.DEFAULT_MAX_CACHE_AGE):await sdk.getEthereumAccountsByLabelOrAddressName(searchText,constants_1.DEFAULT_MAX_CACHE_AGE):await sdk.getEthereumAccounts(constants_1.DEFAULT_MAX_CACHE_AGE),getNonImportedAccounts)?accounts.filter(account=>-1===this.accounts.map(addr=>addr.toLowerCase()).indexOf(account.address.toLowerCase())):accounts.filter(account=>-1!==this.accounts.map(addr=>addr.toLowerCase()).indexOf(account.address.toLowerCase()))}getTransactionNote(txMeta){var _a;let readableCategory={contractInteraction:"Contract Interaction",contractDeployment:"Contract Deployment",transfer:"ETH Transfer",swap:"Metamask Swap",approve:"Token Approval"}[txMeta.type]||txMeta.type;return(null===(_a=null==txMeta?void 0:txMeta.metadata)||void 0===_a?void 0:_a.note)||`${readableCategory} - initiated on ${txMeta.origin}`}async signTransaction(fromAddress,ethTx,txMeta){var _a,_b;let data,payload;let note=this.getTransactionNote(txMeta);"string"==typeof ethTx.data?data=ethTx.data:ethTx.data instanceof Uint8Array&&(data=ethTx.data.toString("hex")),(null==data?void 0:data.length)?(null==data?void 0:data.startsWith("0x"))||(data="0x"+data):data=void 0;let{authDetails,envName}=this.getAccountDetails(fromAddress),sdk=this.getSDK(authDetails,envName),noGasPayload={from:(0,util_1.toChecksumAddress)(fromAddress),value:BigInt(txMeta.txParams.value).toString(),gasLimit:BigInt(txMeta.txParams.gas).toString(),data:data};txMeta.txParams.to&&(noGasPayload.to=(0,util_1.toChecksumAddress)(txMeta.txParams.to));let eip1559=txMeta.txParams.maxFeePerGas,chainId=Number(txMeta.chainId).toString(10);if(!(await sdk.getSupportedChains(fromAddress)).map(chainId=>Number(chainId).toString()).includes(chainId))throw Error(`This network ${chainId} is not configured or supported with your custody provider.`);return payload=eip1559?{...noGasPayload,maxFeePerGas:BigInt(txMeta.txParams.maxFeePerGas).toString(),maxPriorityFeePerGas:BigInt(txMeta.txParams.maxPriorityFeePerGas).toString(),type:"2"}:{...noGasPayload,gasPrice:BigInt(txMeta.txParams.gasPrice).toString(),type:"0"},await sdk.createTransaction(payload,{chainId,note,transactionCategory:txMeta.type,origin:txMeta.origin,custodianPublishesTransaction:null===(_a=null==txMeta?void 0:txMeta.metadata)||void 0===_a?void 0:_a.custodianPublishesTransaction,rpcUrl:null===(_b=null==txMeta?void 0:txMeta.metadata)||void 0===_b?void 0:_b.rpcUrl})}getAllAccountsWithToken(token){return this.accountsDetails.filter(item=>{var _a,_b;return(null===(_a=item.authDetails)||void 0===_a?void 0:_a.jwt)===token||(null===(_b=item.authDetails)||void 0===_b?void 0:_b.refreshToken)===token})}async getTransaction(from,txCustodyId){if(void 0===from||void 0===txCustodyId)return null;let{authDetails,envName}=this.getAccountDetails(from),sdk=this.getSDK(authDetails,envName);return await sdk.getTransaction((0,util_1.toChecksumAddress)(from),txCustodyId)}async getTransactionDeepLink(address,txId){return this.txDeepLink(address,txId)}getAccountDetails(address){return this.accountsDetails.find(account=>account.address.toLowerCase()===address.toLowerCase())}async getSignature(address,signatureId){if(void 0===signatureId)return null;let{authDetails,envName}=this.getAccountDetails(address),sdk=this.getSDK(authDetails,envName);return await sdk.getSignature((0,util_1.toChecksumAddress)(address),signatureId)}async signPersonalMessage(address,message,opts){let{authDetails,envName}=this.getAccountDetails(address);return this.getSDK(authDetails,envName).signPersonalMessage(address,message,{chainId:null,originUrl:null,note:null})}signMessage(){throw Error("Not supported on this custodian")}exportAccount(){throw Error("Not supported on this custodian")}async getErc20Tokens(){let tokenContracts={};for(let{sdk}of this.sdkList){let tokens=await sdk.getErc20Tokens();tokenContracts={...tokenContracts,tokens}}return tokenContracts}async getCustomerProof(address){let{authDetails,envName}=this.getAccountDetails(address);return this.getSDK(authDetails,envName).getCustomerProof()}async signTypedData(address,data,opts){(null==opts?void 0:opts.version)!=="V4"&&(null==opts?void 0:opts.version)!=="V3"&&this.emit("error","Only signedTypedData_v4 and signedTypedData_v3 is supported");let{authDetails,envName}=this.getAccountDetails(address);return this.getSDK(authDetails,envName).signedTypedData_v4(address,data,opts.version,{chainId:null,originUrl:null,note:null})}getSupportedChains(address){let{authDetails,envName}=this.getAccountDetails(address);return this.getSDK(authDetails,envName).getSupportedChains(address)}getCustodianFromEnvName(envName){let custodian=this.getCustodians().find(c=>c.envName===envName);if(!custodian)throw Error(`Could not find custodian with name: ${envName} - please contact support`);return custodian}getCustodians(){let{mmiConfiguration:{custodians}}=this.mmiConfigurationController.store.getState();return custodians}}exports.CustodyKeyring=CustodyKeyring},"./node_modules/@metamask-institutional/custody-keyring/dist/MmiConfiguration.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MmiConfigurationController=void 0;let configuration_client_1=__webpack_require__("./node_modules/@metamask-institutional/configuration-client/dist/index.js"),obs_store_1=__webpack_require__("./node_modules/@metamask/obs-store/dist/index.js"),custodianTypes_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/index.js");exports.MmiConfigurationController=class{constructor(opts={}){var _a;console.log("MMI Configuration controller constructor");let initState=(null===(_a=opts.initState)||void 0===_a?void 0:_a.mmiConfiguration)?opts.initState:{mmiConfiguration:{portfolio:{enabled:!1,url:"",cookieSetUrls:[]},features:{websocketApi:!1},custodians:[]}};this.configurationClient=new configuration_client_1.ConfigurationClient(opts.mmiConfigurationServiceUrl),this.store=new obs_store_1.ObservableStore({mmiConfiguration:{portfolio:{...initState.mmiConfiguration.portfolio},features:{...initState.mmiConfiguration.features},custodians:initState.mmiConfiguration.custodians}})}async storeConfiguration(){let configuration=await this.getConfiguration(),{portfolio,features}=configuration,{mmiConfiguration}=this.store.getState(),configuredCustodians=configuration.custodians,custodians=[...Object.values(custodianTypes_1.CUSTODIAN_TYPES).filter(custodian=>!1===custodian.hidden).map(custodian=>({type:custodian.name,name:custodian.name.toLowerCase(),onboardingUrl:custodian.onboardingUrl,website:custodian.website,envName:custodian.envName,apiUrl:custodian.apiUrl,apiVersion:custodian.apiVersion,iconUrl:custodian.imgSrc,displayName:custodian.displayName,websocketApiUrl:null,production:custodian.production,refreshTokenUrl:null,isNoteToTraderSupported:!1,custodianPublishesTransaction:custodian.custodianPublishesTransaction,version:1}))];configuredCustodians.forEach(custodian=>{custodian.environments.forEach(environment=>{if(!environment.apiBaseUrl){let legacyCustodian=custodians.find(legacyCustodian=>legacyCustodian.name.toLowerCase()===environment.name);legacyCustodian?legacyCustodian.isNoteToTraderSupported=environment.isNoteToTraderSupported:console.warn(`Missing legacy custodian ${environment.name}`);return}custodians.push({type:"3"===environment.apiVersion?"ECA3":"JSONRPC",iconUrl:custodian.iconUrl,name:custodian.name,onboardingUrl:custodian.onboardingUrl,website:custodian.website,envName:environment.name,apiUrl:environment.apiBaseUrl,apiVersion:environment.apiVersion,displayName:environment.displayName,production:environment.enabled,refreshTokenUrl:environment.refreshTokenUrl,websocketApiUrl:environment.websocketApiUrl,isNoteToTraderSupported:environment.isNoteToTraderSupported,custodianPublishesTransaction:environment.custodianPublishesTransaction,version:2})})}),this.store.updateState({mmiConfiguration:{...mmiConfiguration,portfolio:{...mmiConfiguration.portfolio,enabled:portfolio.enabled,url:portfolio.url,cookieSetUrls:portfolio.cookieSetUrls},features:{websocketApi:features.websocketApi},custodians}})}getConfiguration(){return this.configurationClient.getConfiguration()}getWebsocketApiUrl(){let{mmiConfiguration}=this.store.getState();console.log("mmiConfiguration",mmiConfiguration);let custodian=mmiConfiguration.custodians.find(custodian=>custodian.websocketApiUrl);return null==custodian?void 0:custodian.websocketApiUrl}}},"./node_modules/@metamask-institutional/custody-keyring/dist/constants/index.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT=exports.REFRESH_TOKEN_CHANGE_EVENT=exports.DEFAULT_MAX_CACHE_AGE=void 0,exports.DEFAULT_MAX_CACHE_AGE=60,exports.REFRESH_TOKEN_CHANGE_EVENT="refresh_token_change",exports.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT="interactive_replacement_token_change"},"./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/bitgo/BitgoCustodyKeyring.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BitgoCustodyKeyring=void 0;let sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js"),BitgoStatusMap_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/bitgo/BitgoStatusMap.js");class BitgoCustodyKeyring extends CustodyKeyring_1.CustodyKeyring{constructor(opts={}){super(opts),this.type="Custody - Bitgo",this.authType=types_1.AuthTypes.TOKEN,this.custodianType={name:"Bitgo",displayName:"BitGo",apiUrl:"https://app.bitgo.com/defi/v2",imgSrc:"https://dashboard.metamask-institutional.io/custodian-icons/bitgo-icon.svg",icon:"https://dashboard.metamask-institutional.io/custodian-icons/bitgo-icon.svg",website:"https://www.bitgo.com",onboardingUrl:"https://www.bitgo.com",envName:"bitgo",keyringClass:BitgoCustodyKeyring,production:!0,hidden:!1,origins:[],environmentMapping:[{pattern:/^.*$/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/app.bitgo-test.com/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/app.bitgo.com/u,mmiApiUrl:"https://api.mmi-prod.codefi.network/v1"}]},this.sdkFactory=(authDetails,envName)=>(0,sdk_1.mmiSDKFactory)(sdk_1.BitgoCustodianApi,authDetails,this.authType,this.custodianType.apiUrl),this.txDeepLink=async(_custodianDetails,_txId)=>({text:"Approve and sign the transaction in BitGo. Once all required approvals have been performed, the transaction will complete. Check your BitGo wallet for the latest status.",url:null})}getStatusMap(){return BitgoStatusMap_1.BitgoStatusMap}}BitgoCustodyKeyring.type="Custody - Bitgo",exports.BitgoCustodyKeyring=BitgoCustodyKeyring},"./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/bitgo/BitgoStatusMap.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BitgoStatusMap=void 0;let types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js");exports.BitgoStatusMap={created:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Created",longText:"Created",finished:!1},signed:{mmStatus:types_1.MetaMaskTransactionStatuses.SIGNED,shortText:"Signed",longText:"Signed",finished:!1},submitted:{mmStatus:types_1.MetaMaskTransactionStatuses.SUBMITTED,shortText:"Submitted",longText:"Waiting for block",finished:!1},completed:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!1},mined:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!1},aborted:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},rejected:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},failed:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Failed",longText:"Failed",finished:!0}}},"./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/cactus/CactusCustodyKeyring.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CactusCustodyKeyring=void 0;let sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js"),CactusStatusMap_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/cactus/CactusStatusMap.js");class CactusCustodyKeyring extends CustodyKeyring_1.CustodyKeyring{constructor(opts={}){super(opts),this.type="Custody - Cactus",this.custodianType={name:"Cactus",displayName:"Cactus Custody",apiUrl:"https://api.mycactus.com/custody/v1/mmi-api",imgSrc:"https://dashboard.metamask-institutional.io/custodian-icons/cactus-icon.svg",icon:"https://dashboard.metamask-institutional.io/custodian-icons/cactus-icon.svg",website:"https://www.mycactus.com",onboardingUrl:"https://www.mycactus.com",envName:"cactus",keyringClass:CactusCustodyKeyring,production:!0,hidden:!1,origins:[],environmentMapping:[{pattern:/^.*$/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/api.mycactus.com/u,mmiApiUrl:"https://api.mmi-prod.codefi.network/v1"}]},this.authType=types_1.AuthTypes.REFRESH_TOKEN,this.sdkFactory=(authDetails,envName)=>(0,sdk_1.mmiSDKFactory)(sdk_1.CactusCustodianApi,authDetails,this.authType,this.custodianType.apiUrl),this.txDeepLink=async(_custodianDetails,_txId)=>({text:null,url:"https://www.mycactus.com/cactus/login"})}getStatusMap(){return CactusStatusMap_1.CactusStatusMap}}CactusCustodyKeyring.type="Custody - Cactus",exports.CactusCustodyKeyring=CactusCustodyKeyring},"./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/cactus/CactusStatusMap.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CactusStatusMap=void 0;let types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js");exports.CactusStatusMap={created:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Created",longText:"Created",finished:!1},approved:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Created",longText:"Created",finished:!1},submitted:{mmStatus:types_1.MetaMaskTransactionStatuses.SUBMITTED,shortText:"Submitted",longText:"Waiting for block",finished:!1},mined:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!0},completed:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Completed",longText:"Completed",finished:!0},aborted:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},rejected:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Rejected",longText:"Rejected",finished:!0},failed:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Failed",longText:"Failed",finished:!0},overriden:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Overriden",longText:"Overriden",finished:!0}}},"./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/curv/CurvCustodyKeyring.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CurvCustodyKeyring=void 0;let sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js");class CurvCustodyKeyring extends CustodyKeyring_1.CustodyKeyring{handleLegacyAccountDetails(detailsArray){return detailsArray.map(details=>{let authDetails;return authDetails=details.jwt?{jwt:details.jwt}:details.authDetails,{name:details.name,address:details.address,custodianDetails:details.custodianDetails,labels:details.labels,apiUrl:details.apiUrl,chainId:details.chainId,custodyType:details.custodyType,authDetails,envName:details.envName||this.custodianType.envName}})}deserialize(opts={}){return super.deserialize({accounts:opts.accounts||[],selectedAddresses:opts.selectedAddresses?this.handleLegacyAccountDetails(opts.selectedAddresses):[],accountsDetails:opts.accountsDetails?this.handleLegacyAccountDetails(opts.accountsDetails):[],meta:opts.meta||{}})}constructor(opts={}){super(opts),this.custodianType={name:"Curv",displayName:"Curv",apiUrl:"https://app.curv.co",imgSrc:"images/curv-logo-horizontal-black.svg",icon:"images/curv-logo.svg",website:"",onboardingUrl:"",envName:"",keyringClass:CurvCustodyKeyring,production:!1,hidden:!0,origins:[],environmentMapping:[]},this.authType=types_1.AuthTypes.TOKEN,this.type="Custody - Curv",this.apiUrlKey="curvApiUrl",this.sdkFactory=(authDetails,envName)=>{let{apiUrl}=this.getCustodianFromEnvName(envName);return(0,sdk_1.mmiSDKFactory)(sdk_1.CurvCustodianApi,authDetails,this.authType,apiUrl)},this.txDeepLink=(_custodianDetails,_txId)=>null}getStatusMap(){return null}}CurvCustodyKeyring.type="Custody - Curv",exports.CurvCustodyKeyring=CurvCustodyKeyring},"./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/eca3/ECA3CustodyKeyring.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ECA3CustodyKeyring=void 0;let sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js"),ECA3StatusMap_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/eca3/ECA3StatusMap.js");class ECA3CustodyKeyring extends CustodyKeyring_1.CustodyKeyring{constructor(opts={}){super(opts),this.type="Custody - ECA3",this.authType=types_1.AuthTypes.REFRESH_TOKEN,this.custodianType={name:"ECA3",displayName:"ECA3",apiUrl:"https://neptune-custody.codefi.network/eth",imgSrc:"https://backend.vistan-brillen.de/storage/files/images/marken/changeme/header/changeme-logo-header.jpg",icon:"https://backend.vistan-brillen.de/storage/files/images/marken/changeme/header/changeme-logo-header.jpg",website:"https://neptune-custody-ui.metamask-institutional.io/",onboardingUrl:"https://neptune-custody-ui.metamask-institutional.io/",envName:"neptune-custody",keyringClass:ECA3CustodyKeyring,production:!1,hidden:!0,origins:[],environmentMapping:[]},this.sdkFactory=(authDetails,envName)=>{let{refreshTokenUrl,apiUrl}=this.getCustodianFromEnvName(envName);return authDetails.refreshTokenUrl=refreshTokenUrl,(0,sdk_1.mmiSDKFactory)(sdk_1.ECA3CustodianApi,authDetails,this.authType,apiUrl)},this.txDeepLink=async(address,txId)=>{let{authDetails,envName}=this.getAccountDetails(address),sdk=this.getSDK(authDetails,envName);try{return await sdk.getTransactionLink(txId)}catch(e){return console.log(`Unable to get transction link for ${txId}`),null}}}getStatusMap(){return ECA3StatusMap_1.ECA3StatusMap}}ECA3CustodyKeyring.type="Custody - ECA3",exports.ECA3CustodyKeyring=ECA3CustodyKeyring},"./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/eca3/ECA3StatusMap.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ECA3StatusMap=void 0;let types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js");exports.ECA3StatusMap={created:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Created",longText:"Created",finished:!1},signed:{mmStatus:types_1.MetaMaskTransactionStatuses.SIGNED,shortText:"Signed",longText:"Signed",finished:!1},submitted:{mmStatus:types_1.MetaMaskTransactionStatuses.SUBMITTED,shortText:"Submitted",longText:"Waiting for block",finished:!1},mined:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!0},aborted:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},rejected:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},failed:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Failed",longText:"Failed",finished:!0},completed:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!0}}},"./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CUSTODIAN_TYPES=void 0;let BitgoCustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/bitgo/BitgoCustodyKeyring.js"),CactusCustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/cactus/CactusCustodyKeyring.js"),CurvCustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/curv/CurvCustodyKeyring.js"),ECA3CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/eca3/ECA3CustodyKeyring.js"),JsonRpcCustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/json-rpc/JsonRpcCustodyKeyring.js"),JupiterCustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/jupiter/JupiterCustodyKeyring.js"),QredoCustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/qredo/QredoCustodyKeyring.js");exports.CUSTODIAN_TYPES={QREDO:{name:"Qredo",displayName:"Qredo",apiUrl:"https://api-v2.qredo.network/api/v2",imgSrc:"https://dashboard.metamask-institutional.io/custodian-icons/qredo-icon.svg",icon:"https://dashboard.metamask-institutional.io/custodian-icons/qredo-icon.svg",website:"https://www.qredo.com",onboardingUrl:"https://www.qredo.com",envName:"qredo",keyringClass:QredoCustodyKeyring_1.QredoCustodyKeyring,production:!0,hidden:!1,origins:[],environmentMapping:[{pattern:/^.*$/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/api.qredo.network/u,mmiApiUrl:"https://api.mmi-prod.codefi.network/v1"}]},CACTUS:{name:"Cactus",displayName:"Cactus Custody",apiUrl:"https://api.mycactus.com/custody/v1/mmi-api",imgSrc:"https://dashboard.metamask-institutional.io/custodian-icons/cactus-icon.svg",icon:"https://dashboard.metamask-institutional.io/custodian-icons/cactus-icon.svg",website:"https://www.mycactus.com",onboardingUrl:"https://www.mycactus.com",envName:"cactus",keyringClass:CactusCustodyKeyring_1.CactusCustodyKeyring,production:!0,hidden:!1,origins:[],environmentMapping:[{pattern:/^.*$/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/api.mycactus.com/u,mmiApiUrl:"https://api.mmi-prod.codefi.network/v1"}]},BITGO:{name:"Bitgo",displayName:"BitGo",apiUrl:"https://app.bitgo.com/defi/v2",imgSrc:"https://dashboard.metamask-institutional.io/custodian-icons/bitgo-icon.svg",icon:"https://dashboard.metamask-institutional.io/custodian-icons/bitgo-icon.svg",website:"https://www.bitgo.com",onboardingUrl:"https://www.bitgo.com",envName:"bitgo",keyringClass:BitgoCustodyKeyring_1.BitgoCustodyKeyring,production:!0,hidden:!1,origins:[],environmentMapping:[{pattern:/^.*$/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/app.bitgo-test.com/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/app.bitgo.com/u,mmiApiUrl:"https://api.mmi-prod.codefi.network/v1"}]},JUPITER:{name:"Jupiter",displayName:"Jupiter Custody",apiUrl:"https://jupiter-custody.codefi.network",imgSrc:"https://saturn-custody-ui.metamask-institutional.io/saturn.svg",icon:"https://saturn-custody-ui.metamask-institutional.io/saturn.svg",website:"",onboardingUrl:"",envName:"",keyringClass:JupiterCustodyKeyring_1.JupiterCustodyKeyring,production:!0,hidden:!1,origins:[/^https:\/\/jupiter-custody-ui.codefi.network\//],environmentMapping:[{pattern:/^http:\/\/test-pattern/,mmiApiUrl:"http://test-url"},{pattern:/^http:\/\/localhost.*$/,mmiApiUrl:"http://localhost:3000/v1"}]},JSONRPC:{name:"JSONRPC",displayName:"JSON-RPC",apiUrl:"https://saturn-custody.codefi.network/eth",imgSrc:"https://saturn-custody-ui.metamask-institutional.io/saturn.svg",icon:"https://saturn-custody-ui.metamask-institutional.io/saturn.svg",website:"https://saturn-custody-ui.metamask-institutional.io/",onboardingUrl:"https://saturn-custody-ui.metamask-institutional.io/",envName:"saturn-prod",keyringClass:JsonRpcCustodyKeyring_1.JsonRpcCustodyKeyring,production:!1,hidden:!0,origins:[],environmentMapping:[]},ECA3:{name:"ECA3",displayName:"ECA3",apiUrl:"https://neptune-custody.codefi.network/eth",imgSrc:"https://backend.vistan-brillen.de/storage/files/images/marken/changeme/header/changeme-logo-header.jpg",icon:"https://backend.vistan-brillen.de/storage/files/images/marken/changeme/header/changeme-logo-header.jpg",website:"https://neptune-custody-ui.metamask-institutional.io/",onboardingUrl:"https://neptune-custody-ui.metamask-institutional.io/",envName:"neptune-custody",keyringClass:ECA3CustodyKeyring_1.ECA3CustodyKeyring,production:!1,hidden:!0,origins:[],environmentMapping:[]},CURV:{name:"Curv",displayName:"Curv",apiUrl:"https://app.curv.co",imgSrc:"images/curv-logo-horizontal-black.svg",icon:"images/curv-logo.svg",website:"",onboardingUrl:"",envName:"",keyringClass:CurvCustodyKeyring_1.CurvCustodyKeyring,production:!1,hidden:!0,origins:[],environmentMapping:[]}}},"./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/json-rpc/JsonRpcCustodyKeyring.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsonRpcCustodyKeyring=void 0;let sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js"),JsonRpcStatusMap_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/json-rpc/JsonRpcStatusMap.js");class JsonRpcCustodyKeyring extends CustodyKeyring_1.CustodyKeyring{constructor(opts={}){super(opts),this.type="Custody - JSONRPC",this.authType=types_1.AuthTypes.REFRESH_TOKEN,this.custodianType={name:"JSONRPC",displayName:"JSON-RPC",apiUrl:"https://saturn-custody.codefi.network/eth",imgSrc:"https://saturn-custody-ui.metamask-institutional.io/saturn.svg",icon:"https://saturn-custody-ui.metamask-institutional.io/saturn.svg",website:"https://saturn-custody-ui.metamask-institutional.io/",onboardingUrl:"https://saturn-custody-ui.metamask-institutional.io/",envName:"saturn-prod",keyringClass:JsonRpcCustodyKeyring,production:!1,hidden:!0,origins:[],environmentMapping:[]},this.sdkFactory=(authDetails,envName)=>{let{refreshTokenUrl,apiUrl}=this.getCustodianFromEnvName(envName);return authDetails.refreshTokenUrl=refreshTokenUrl,(0,sdk_1.mmiSDKFactory)(sdk_1.JsonRpcCustodianApi,authDetails,this.authType,apiUrl)},this.txDeepLink=async(address,txId)=>{let{authDetails,envName}=this.getAccountDetails(address),sdk=this.getSDK(authDetails,envName);try{return await sdk.getTransactionLink(txId)}catch(e){return console.log(`Unable to get transction link for ${txId}`),null}}}getStatusMap(){return JsonRpcStatusMap_1.JsonRpcStatusMap}}JsonRpcCustodyKeyring.type="Custody - JSONRPC",exports.JsonRpcCustodyKeyring=JsonRpcCustodyKeyring},"./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/json-rpc/JsonRpcStatusMap.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsonRpcStatusMap=void 0;let types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js");exports.JsonRpcStatusMap={created:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Created",longText:"Created",finished:!1},signed:{mmStatus:types_1.MetaMaskTransactionStatuses.SIGNED,shortText:"Signed",longText:"Signed",finished:!1},submitted:{mmStatus:types_1.MetaMaskTransactionStatuses.SUBMITTED,shortText:"Submitted",longText:"Waiting for block",finished:!1},mined:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!0},aborted:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},rejected:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},failed:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Failed",longText:"Failed",finished:!0},completed:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!0}}},"./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/jupiter/JupiterCustodyKeyring.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JupiterCustodyKeyring=void 0;let sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js"),JupiterStatusMap_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/jupiter/JupiterStatusMap.js");class JupiterCustodyKeyring extends CustodyKeyring_1.CustodyKeyring{constructor(opts={}){super(opts),this.type="Custody - Jupiter",this.authType=types_1.AuthTypes.TOKEN,this.custodianType={name:"Jupiter",displayName:"Jupiter Custody",apiUrl:"https://jupiter-custody.codefi.network",imgSrc:"images/jupiter.svg",icon:"images/jupiter.svg",website:"",onboardingUrl:"",envName:"",keyringClass:JupiterCustodyKeyring,production:!0,hidden:!1,origins:[/^https:\/\/jupiter-custody-ui.codefi.network\//],environmentMapping:[{pattern:/^http:\/\/test-pattern/,mmiApiUrl:"http://test-url"},{pattern:/^http:\/\/localhost.*$/,mmiApiUrl:"http://localhost:3000/v1"}]},this.sdkFactory=(authDetails,envName)=>{let{apiUrl}=this.getCustodianFromEnvName(envName);return(0,sdk_1.mmiSDKFactory)(sdk_1.JupiterCustodianApi,authDetails,this.authType,apiUrl)},this.txDeepLink=async(address,txId)=>{let{envName}=this.getAccountDetails(address),{apiUrl}=this.getCustodianFromEnvName(envName),transactionLink={text:"Approve the transaction in the Jupiter Custody app. Once all required custody approvals have been performed the transaction will complete. Check your Jupiter Custody app for status.",url:null};return apiUrl&&apiUrl.includes("-demo")&&(transactionLink.url=`https://jupiter-custody-ui-demo.codefi.network/${txId}`),transactionLink}}getStatusMap(){return JupiterStatusMap_1.JupiterStatusMap}}JupiterCustodyKeyring.type="Custody - Jupiter",exports.JupiterCustodyKeyring=JupiterCustodyKeyring},"./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/jupiter/JupiterStatusMap.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JupiterStatusMap=void 0;let types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js");exports.JupiterStatusMap={created:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Created",longText:"Created",finished:!1},signed:{mmStatus:types_1.MetaMaskTransactionStatuses.SIGNED,shortText:"Signed",longText:"Signed",finished:!1},submitted:{mmStatus:types_1.MetaMaskTransactionStatuses.SUBMITTED,shortText:"Submitted",longText:"Waiting for block",finished:!1},mined:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!1},aborted:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},rejected:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},failed:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Failed",longText:"Failed",finished:!0}}},"./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/qredo/QredoCustodyKeyring.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QredoCustodyKeyring=void 0;let sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js"),QredoStatusMap_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/qredo/QredoStatusMap.js");class QredoCustodyKeyring extends CustodyKeyring_1.CustodyKeyring{constructor(opts={}){super(opts),this.type="Custody - Qredo",this.custodianType={name:"Qredo",displayName:"Qredo",apiUrl:"https://api-v2.qredo.network/api/v2",imgSrc:"https://dashboard.metamask-institutional.io/custodian-icons/qredo-icon.svg",icon:"https://dashboard.metamask-institutional.io/custodian-icons/qredo-icon.svg",website:"https://www.qredo.com",onboardingUrl:"https://www.qredo.com",envName:"qredo",keyringClass:QredoCustodyKeyring,production:!0,hidden:!1,origins:[],environmentMapping:[{pattern:/^.*$/u,mmiApiUrl:"https://mmi.codefi.network/v1"},{pattern:/^https:\/\/api.qredo.network/u,mmiApiUrl:"https://api.mmi-prod.codefi.network/v1"}]},this.authType=types_1.AuthTypes.REFRESH_TOKEN,this.sdkFactory=(authDetails,envName)=>(0,sdk_1.mmiSDKFactory)(sdk_1.QredoCustodianApi,authDetails,this.authType,this.custodianType.apiUrl),this.txDeepLink=async(_address,_txId)=>null}getStatusMap(){return QredoStatusMap_1.QredoStatusMap}}QredoCustodyKeyring.type="Custody - Qredo",exports.QredoCustodyKeyring=QredoCustodyKeyring},"./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/qredo/QredoStatusMap.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QredoStatusMap=void 0;let types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js");exports.QredoStatusMap={created:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Created",longText:"Created",finished:!1},pending:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Pending",longText:"Pending",finished:!1},approved:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Authorized",longText:"Authorized",finished:!1},authorized:{mmStatus:types_1.MetaMaskTransactionStatuses.APPROVED,shortText:"Authorized",longText:"Authorized",finished:!1},signed:{mmStatus:types_1.MetaMaskTransactionStatuses.SIGNED,shortText:"Signed",longText:"Signed",finished:!1},scheduled:{mmStatus:types_1.MetaMaskTransactionStatuses.SIGNED,shortText:"Submitted",longText:"Waiting for block",finished:!1},pushed:{mmStatus:types_1.MetaMaskTransactionStatuses.SUBMITTED,shortText:"Submitted",longText:"Waiting for block",finished:!1},mined:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!0},confirmed:{mmStatus:types_1.MetaMaskTransactionStatuses.CONFIRMED,shortText:"Mined",longText:"Mined",finished:!0},cancelled:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},aborted:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},rejected:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Aborted",longText:"Aborted",finished:!0},failed:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Failed",longText:"Failed",finished:!0},expired:{mmStatus:types_1.MetaMaskTransactionStatuses.FAILED,shortText:"Failed",longText:"Failed",finished:!0}}},"./node_modules/@metamask-institutional/custody-keyring/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.migrations=exports.Migrator=exports.JupiterCustodyKeyring=exports.IMmiConfigurationControllerOptions=exports.MmiConfigurationController=exports.CustodyKeyring=exports.CUSTODIAN_TYPES=void 0;var custodianTypes_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/index.js");Object.defineProperty(exports,"CUSTODIAN_TYPES",{enumerable:!0,get:function(){return custodianTypes_1.CUSTODIAN_TYPES}});var CustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/CustodyKeyring.js");Object.defineProperty(exports,"CustodyKeyring",{enumerable:!0,get:function(){return CustodyKeyring_1.CustodyKeyring}});var MmiConfiguration_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/MmiConfiguration.js");Object.defineProperty(exports,"MmiConfigurationController",{enumerable:!0,get:function(){return MmiConfiguration_1.MmiConfigurationController}});var IMmiConfigurationControllerOptions_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/interfaces/IMmiConfigurationControllerOptions.js");Object.defineProperty(exports,"IMmiConfigurationControllerOptions",{enumerable:!0,get:function(){return IMmiConfigurationControllerOptions_1.IMmiConfigurationControllerOptions}});var JupiterCustodyKeyring_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/custodianTypes/jupiter/JupiterCustodyKeyring.js");Object.defineProperty(exports,"JupiterCustodyKeyring",{enumerable:!0,get:function(){return JupiterCustodyKeyring_1.JupiterCustodyKeyring}});var migrator_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/migrations/migrator.js");Object.defineProperty(exports,"Migrator",{enumerable:!0,get:function(){return migrator_1.Migrator}});var migrations_1=__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/migrations/index.js");Object.defineProperty(exports,"migrations",{enumerable:!0,get:function(){return migrations_1.migrations}})},"./node_modules/@metamask-institutional/custody-keyring/dist/interfaces/IMmiConfigurationControllerOptions.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IMmiConfigurationControllerOptions=void 0,exports.IMmiConfigurationControllerOptions=class{}},"./node_modules/@metamask-institutional/custody-keyring/dist/migrations/001.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});let types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),lodash_clonedeep_1=__importDefault(__webpack_require__("./node_modules/lodash.clonedeep/index.js")),keyringTypesToChange=[];function transformKeyring(keyring){delete keyring.jwt,delete keyring.token;let defaultApiUrl=keyring.custodianType.apiUrl;return keyring.accountsDetails=keyring.accountsDetails.map(details=>{var _a,_b;return{name:details.name,address:details.address,custodianDetails:details.custodianDetails,labels:details.labels,apiUrl:details.apiUrl||defaultApiUrl,chainId:details.chainId,custodyType:details.custodyType,authDetails:keyring.authType===types_1.AuthTypes.REFRESH_TOKEN?{refreshToken:details.jwt||details.token||(null===(_a=details.authDetails)||void 0===_a?void 0:_a.refreshToken)}:{jwt:details.jwt||details.token||(null===(_b=details.authDetails)||void 0===_b?void 0:_b.jwt)}}}),keyring}exports.default={version:1,keyringTypesToChange,migrate(keyring){var _a;let versionedKeyring={};return keyringTypesToChange.includes(keyring.type)&&(null===(_a=(versionedKeyring=(0,lodash_clonedeep_1.default)(keyring)).meta)||void 0===_a?void 0:_a.version)!==1&&(versionedKeyring.meta={version:1},versionedKeyring=transformKeyring(versionedKeyring)),versionedKeyring||keyring}}},"./node_modules/@metamask-institutional/custody-keyring/dist/migrations/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.migrations=void 0;let _001_1=__importDefault(__webpack_require__("./node_modules/@metamask-institutional/custody-keyring/dist/migrations/001.js"));exports.migrations=[_001_1.default]},"./node_modules/@metamask-institutional/custody-keyring/dist/migrations/migrator.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Migrator=void 0;let events_1=__webpack_require__("./node_modules/events/events.js");class Migrator extends events_1.EventEmitter{constructor(opts){super();let migrations=(null==opts?void 0:opts.migrations)||[];this.migrations=migrations.sort((a,b)=>a.version-b.version);let lastMigration=this.migrations.slice(-1)[0];this.defaultVersion=opts.defaultVersion||lastMigration&&lastMigration.version||0}migrateData(versionedKeyring=this.generateInitialState()){for(let migration of this.migrations.filter(migration=>migration.keyringTypesToChange.includes(versionedKeyring.type)&&(!versionedKeyring.meta||versionedKeyring.meta.version<migration.version)))try{let migratedKeyring=migration.migrate(versionedKeyring);if(!migratedKeyring.meta)throw Error("MMI Migrator - migration returned empty meta");if(migratedKeyring.meta.version!==migration.version)throw Error("MMI Migrator - Migration did not update version number correctly");versionedKeyring=migratedKeyring}catch(err){let originalErrorMessage=err.message;err.message=`MetaMask Institutional Migration Error #${migration.version}: ${originalErrorMessage}`,this.emit("error",err);break}return versionedKeyring}generateInitialState(data){return{meta:{version:this.defaultVersion},data}}}exports.Migrator=Migrator},"./node_modules/@metamask-institutional/extension/dist/ExtensionUtils.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleTxStatusUpdate=exports.getTxByCustodyId=exports.showCustodianDeepLink=exports.custodianEventHandlerFactory=exports.updateCustodianTransactions=void 0;let custody_controller_1=__webpack_require__("./node_modules/@metamask-institutional/custody-controller/dist/index.js"),sdk_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/index.js"),types_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/index.js"),TRANSACTION_EVENTS={[types_1.MetaMaskTransactionStatuses.ADDED]:"Transaction Added",[types_1.MetaMaskTransactionStatuses.APPROVED]:"Transaction Approved",[types_1.MetaMaskTransactionStatuses.SIGNED]:"Transaction Signed",[types_1.MetaMaskTransactionStatuses.REJECTED]:"Transaction Rejected",[types_1.MetaMaskTransactionStatuses.FAILED]:"Transaction Failed",[types_1.MetaMaskTransactionStatuses.SUBMITTED]:"Transaction Submitted",[types_1.MetaMaskTransactionStatuses.CONFIRMED]:"Transaction Confirmed",[types_1.MetaMaskTransactionStatuses.UNAPPROVED]:"Transaction Unapproved",[types_1.MetaMaskTransactionStatuses.DROPPED]:"Transaction Dropped",[types_1.MetaMaskTransactionStatuses.FINALIZED]:"Transaction Finalized"};async function updateCustodianTransactions({keyring,type,txList,custodyController,transactionUpdateController,txStateManager,getPendingNonce,setTxHash}){let txStatusMap=keyring.getStatusMap();await Promise.all(txList.map(async tx=>{var _a;if(tx.custodyId&&!(tx.custodyStatus&&(null===(_a=txStatusMap[tx.custodyStatus])||void 0===_a?void 0:_a.finished))){if(custodyController.getCustodyTypeByAddress((0,custody_controller_1.toChecksumHexAddress)(tx.txParams.from))!==type)return;let custodyTx=await keyring.getTransaction(tx.txParams.from,tx.custodyId);if(null===custodyTx)return;let status=(0,sdk_1.mapTransactionStatus)(custodyTx.transactionStatus),updateEvent={transaction:{id:custodyTx.custodian_transactionId,hash:custodyTx.transactionHash,status,from:custodyTx.from,gasPrice:custodyTx.gasPrice,nonce:custodyTx.nonce,to:custodyTx.to,value:custodyTx.value,data:custodyTx.data,gas:custodyTx.gasLimit,type:null},metadata:null};await handleTxStatusUpdate(updateEvent,txStateManager,getPendingNonce,setTxHash),status.finished||transactionUpdateController.addTransactionToWatchList(custodyTx.custodian_transactionId,custodyTx.from,null,!1)}})),custodyController.storeCustodyStatusMap(keyring.type.split(" - ")[1],txStatusMap)}function custodianEventHandlerFactory({getState,log,getPendingNonce,setTxHash,signatureController,txStateManager,custodyController,trackTransactionEvent,captureException}){return async txData=>{let address;if(Object.hasOwnProperty.call(txData,"transaction")&&null!==txData.transaction&&Object.hasOwnProperty.call(txData.transaction,"from")?address=txData.transaction.from:Object.hasOwnProperty.call(txData,"signedMessage")&&null!==txData.signedMessage&&Object.hasOwnProperty.call(txData.signedMessage,"address")&&(address=txData.signedMessage.address),!custodyController.getCustodyTypeByAddress((0,custody_controller_1.toChecksumHexAddress)(address)))return log.info(`Got an update for an address I do not own: ${address}`),getState();if(!Object.hasOwnProperty.call(txData,"signedMessage")&&!txData.transaction)return getState();if(Object.hasOwnProperty.call(txData,"signedMessage")&&null!==txData.signedMessage){console.log("Update for message:",txData.signedMessage.id,txData.signedMessage.status),txData.signedMessage.signature&&custodyController.setWaitForConfirmDeepLinkDialog(!1);let allMessages=signatureController.messages,filteredItem=Object.keys(allMessages).map(key=>allMessages[key]).find(item=>{var _a;return(null===(_a=item.metadata)||void 0===_a?void 0:_a.custodian_transactionId)===txData.signedMessage.id});if(!filteredItem)return;let messageId=filteredItem.id;return txData.signedMessage.signature&&"0x"!=txData.signedMessage.signature?signatureController.setDeferredSignSuccess(messageId,txData.signedMessage.signature):txData.signedMessage.status.finished&&!txData.signedMessage.status.success?signatureController.setDeferredSignError(messageId):void 0}console.log("Update for transaction: ",txData.transaction.id,txData.transaction.status);let txMeta=await handleTxStatusUpdate(txData,txStateManager,getPendingNonce,setTxHash);if(txMeta){if(TRANSACTION_EVENTS[txMeta.status])try{trackTransactionEvent(txMeta,TRANSACTION_EVENTS[txMeta.status])}catch(error){log.error(error),captureException(error)}console.log("custodianEventHandler finished, txMeta:",txMeta)}}}async function showCustodianDeepLink({dispatch,mmiActions,txId,fromAddress,closeNotification,isSignature,custodyId,onDeepLinkFetched,onDeepLinkShown,showCustodyConfirmLink}){let deepLink;let custodianTxId=custodyId;if(isSignature)deepLink=await dispatch(mmiActions.getCustodianSignMessageDeepLink(fromAddress,custodyId));else{let result=await dispatch(mmiActions.getCustodianConfirmDeepLink(txId));deepLink=result.deepLink,custodianTxId=result.custodyId}onDeepLinkFetched();try{await dispatch(showCustodyConfirmLink({link:deepLink,address:fromAddress,closeNotification:closeNotification,custodyId:custodianTxId})),dispatch(mmiActions.setWaitForConfirmDeepLinkDialog(!0)),onDeepLinkShown()}catch(e){dispatch(mmiActions.setWaitForConfirmDeepLinkDialog(!1))}}function getTxByCustodyId(getTransactions,txCustodyId){let found=getTransactions({searchCriteria:{custodyId:txCustodyId}});if(found.length)return found[0]}async function handleTxStatusUpdate(txData,txStateManager,getPendingNonce,setTxHash){var _a;let txMeta=getTxByCustodyId(({searchCriteria})=>txStateManager.getTransactions({searchCriteria}),txData.transaction.id);if(txMeta){if(txMeta.custodyStatus=txData.transaction.status.displayText.toLowerCase(),txMeta.custodyStatusDisplayText=null===(_a=txData.transaction)||void 0===_a?void 0:_a.status.displayText,txData.transaction.hash&&(!txMeta.hash||"0x"===txMeta.hash)&&setTxHash(txMeta.id,txData.transaction.hash),txData.transaction.status.signed&&!txData.transaction.status.finished&&txMeta.status!==types_1.MetaMaskTransactionStatuses.SIGNED&&txMeta.status!==types_1.MetaMaskTransactionStatuses.SUBMITTED&&txMeta.status!==types_1.MetaMaskTransactionStatuses.CONFIRMED&&txMeta.status!==types_1.MetaMaskTransactionStatuses.FAILED&&txStateManager.setTxStatusSigned(txMeta.id),!txMeta.txParams.nonce||txData.transaction.nonce&&Number(txMeta.txParams.nonce)!==Number(txData.transaction.nonce)){let nonce="0x"+(parseInt(txData.transaction.nonce)||await getPendingNonce(txData.transaction.from)).toString(16),newTxParams=await {...txMeta.txParams,nonce};txMeta.txParams=newTxParams}let looksLikeFinalUpdate=txData.transaction.status.finished&&txData.transaction.status.success&&txMeta.status!==types_1.MetaMaskTransactionStatuses.CONFIRMED,looksLikeRealSubmission=txData.transaction.status.submitted&&txMeta.status!==types_1.MetaMaskTransactionStatuses.CONFIRMED;if(looksLikeFinalUpdate||looksLikeRealSubmission)txStateManager.setTxStatusSubmitted(txMeta.id);else if(txData.transaction.status.finished&&!txData.transaction.status.success){let message=`Transaction status from custodian: ${txMeta.custodyStatusDisplayText}`;txData.transaction.status.reason&&(message=txData.transaction.status.reason),txStateManager.setTxStatusFailed(txMeta.id,message)}return txStateManager.updateTransaction(txMeta,"Updated custody transaction status."),txMeta}return null}exports.updateCustodianTransactions=updateCustodianTransactions,exports.custodianEventHandlerFactory=custodianEventHandlerFactory,exports.showCustodianDeepLink=showCustodianDeepLink,exports.getTxByCustodyId=getTxByCustodyId,exports.handleTxStatusUpdate=handleTxStatusUpdate},"./node_modules/@metamask-institutional/extension/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";exports.kC=void 0;var ExtensionUtils_1=__webpack_require__("./node_modules/@metamask-institutional/extension/dist/ExtensionUtils.js");Object.defineProperty(exports,"kC",{enumerable:!0,get:function(){return ExtensionUtils_1.showCustodianDeepLink}})},"./node_modules/@metamask-institutional/sdk/dist/classes/AccountHierarchyNode.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ETHEREUM_ACCOUNT=exports.WALLET=exports.ORGANIZATION=exports.ROOT_NAME=exports.ROOT=exports.AccountHierarchyNode=void 0,exports.AccountHierarchyNode=class{constructor(type,id,name,parent=null){this.type=type,this.name=name,this.id=id,this.parent=parent,this.children=[]}serialize(){return this.removeParents(),this}removeParents(){this.parent=void 0,this.children.length&&this.children.forEach(child=>child.removeParents())}findItemWithId(id){if(this.id===id)return this;for(let child of this.children){let found=child.findItemWithId(id);if(found)return found}return null}getEthereumAccounts(stack=[]){for(let child of(this.account&&stack.push(this.account),this.children))child.getEthereumAccounts(stack);return stack}},exports.ROOT="root",exports.ROOT_NAME="Root account node",exports.ORGANIZATION="organization",exports.WALLET="wallet",exports.ETHEREUM_ACCOUNT="ethereum-account"},"./node_modules/@metamask-institutional/sdk/dist/classes/MMISDK.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MMISDK=void 0;let simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),events_1=__webpack_require__("./node_modules/events/events.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js");class MMISDK extends events_1.EventEmitter{constructor(custodianApi,authDetails,authType,apiUrl,defaultCacheAgeSeconds=-1){super(),this.defaultCacheAgeSeconds=defaultCacheAgeSeconds,this.cache=new simplecache_1.SimpleCache,this.custodianApi=new custodianApi(authDetails,authType,apiUrl,defaultCacheAgeSeconds),this.custodianApi.on(constants_1.REFRESH_TOKEN_CHANGE_EVENT,event=>{this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,event)}),this.custodianApi.on(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,event=>{this.emit(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,event)})}changeRefreshTokenAuthDetails(authDetails){this.custodianApi.changeRefreshTokenAuthDetails(authDetails)}getAccountHierarchy(){return this.custodianApi.getAccountHierarchy()}async getListAccountsSigned(){return this.custodianApi.getListAccountsSigned()}async getEthereumAccounts(maxCacheAgeSeconds=this.defaultCacheAgeSeconds){return console.log("GetEthereumAccounts MMI SDK"),this.cache.tryCachingArray("getEthereumAccounts",maxCacheAgeSeconds,async()=>await this.custodianApi.getEthereumAccounts())}async getEthereumAccountsByAddress(address,maxCacheAgeSeconds=this.defaultCacheAgeSeconds){return this.cache.tryCachingArray("getEthereumAccountsByAddress-"+address,maxCacheAgeSeconds,async()=>await this.custodianApi.getEthereumAccountsByAddress(address))}async getEthereumAccountsByLabelOrAddressName(name,maxCacheAgeSeconds=this.defaultCacheAgeSeconds){return this.cache.tryCachingArray("getEthereumAccountsByLabelOrAddressName-"+name,maxCacheAgeSeconds,async()=>await this.custodianApi.getEthereumAccountsByLabelOrAddressName(name))}async createTransaction(txParams,txMeta){return await this.custodianApi.createTransaction(txParams,txMeta)}async replaceTransaction(txParams){return await this.custodianApi.replaceTransaction(txParams)}getTransaction(from,transactionId){return this.custodianApi.getTransaction(from,transactionId)}getAllTransactions(){return this.custodianApi.getAllTransactions()}getCustomerId(){return this.custodianApi.getCustomerId()}async signedTypedData_v4(address,data,version,signedTypedMessageMetadata){return await this.custodianApi.signTypedData_v4(address,data,version,signedTypedMessageMetadata)}async signPersonalMessage(address,message,signedMessageMetadata){return await this.custodianApi.signPersonalMessage(address,message,signedMessageMetadata)}async getSignature(address,signatureId){return this.custodianApi.getSignedMessage(address,signatureId)}async getCustomerProof(){return this.custodianApi.getCustomerProof()}async getErc20Tokens(){return this.custodianApi.getErc20Tokens()}async getSupportedChains(address){return this.custodianApi.getSupportedChains(address)}async getTransactionLink(transactionId){return this.custodianApi.getTransactionLink(transactionId)}}exports.MMISDK=MMISDK},"./node_modules/@metamask-institutional/sdk/dist/classes/NetworkMappings.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NetworkMappings=void 0;let defaultMappings=[{name:"Mainnet",custodianName:"ETHEREUM_MAINNET",custodianId:"d8e36489-4561-4062-822b-9245eadd20c0",chainId:"1"},{name:"Ropsten",custodianName:"ETHEREUM_ROPSTEN",custodianId:"13323143-efa4-4733-b4e6-79e384a39fdd",chainId:"3"},{name:"Kovan",custodianName:"ETHEREUM_KOVAN",custodianId:"6b40f106-c0b5-4d04-85df-ec772253f0f4",chainId:"42"},{name:"Ethereum Classic",custodianName:"ETHEREUM_CLASSIC_MAINNET",custodianId:"043f3fb5-53ed-4c8a-a508-765634a6b354",chainId:"61"}];exports.NetworkMappings=class{constructor(mappings=defaultMappings){this.mappings=[],this.populateMappings(mappings)}populateMappings(newMappings){this.mappings=this.mappings.concat(newMappings.filter(mapping=>!this.mappings.find(existingMapping=>mapping.chainId===existingMapping.chainId)))}unsupportedMapping(prop){return console.warn("Unsupported network: "+prop.toString()),{chainId:"0",name:"Unsupported",custodianName:"Unsupported",custodianId:"00000000-0000-0000-0000-000000000000"}}getMappingByChainId(chainId){return this.mappings.find(mapping=>mapping.chainId==chainId)||this.unsupportedMapping(chainId)}getMappingByCustodianName(custodianName){return this.mappings.find(mapping=>mapping.custodianName==custodianName)||this.unsupportedMapping(custodianName)}}},"./node_modules/@metamask-institutional/sdk/dist/constants/constants.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_MAX_CACHE_AGE=exports.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT=exports.REFRESH_TOKEN_CHANGE_EVENT=void 0,exports.REFRESH_TOKEN_CHANGE_EVENT="refresh_token_change",exports.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT="interactive_replacement_token_change",exports.DEFAULT_MAX_CACHE_AGE=60},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/bitgo/BitgoClient.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BitgoClient=void 0;let CustodianApiError_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/errors/CustodianApiError.js");exports.BitgoClient=class{constructor(apiUrl,jwt){this.bitgoApiurl=apiUrl,this.jwt=jwt}getHeaders(){return{"Content-Type":"application/json",Authorization:`Bearer ${this.jwt}`}}async getEthereumAccounts(){let headers=this.getHeaders();try{let response=await fetch(`${this.bitgoApiurl}/wallets`,{headers});if(!response.ok)throw Error(`Error fetching wallet accounts. Status: ${response.status} ${response.statusText}`);return(await response.json()).data}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getEthereumAccountByAddress(address){let headers=this.getHeaders();try{let response=await fetch(`${this.bitgoApiurl}/mmi/wallets/address/${address}`,{headers});if(!response.ok)throw Error(`Error fetching account for address ${address}. Status: ${response.status} ${response.statusText}`);let accounts=await response.json();if(accounts.data.length)return accounts.data[0];return null}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async createTransaction(bitgoTxDetails,txParams){let headers=this.getHeaders();"0"===txParams.type||"1"===txParams.type?txParams.gasPrice=txParams.gasPrice:"2"===txParams.type&&(txParams.maxPriorityFeePerGas=txParams.maxPriorityFeePerGas,txParams.maxFeePerGas=txParams.maxFeePerGas);try{let response=await fetch(`${this.bitgoApiurl}/mmi/${bitgoTxDetails.coinId}/wallet/${bitgoTxDetails.walletId}/tx/build`,{method:"POST",headers,body:JSON.stringify({txParams})});if(!response.ok)throw Error(`Error creating transaction. Status: ${response.status} ${response.statusText}`);return(await response.json()).data}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransaction(custodian_transactionId){let headers=this.getHeaders();try{let response=await fetch(`${this.bitgoApiurl}/mmi/wallets/transactions/${custodian_transactionId}`,{headers});if(!response.ok)throw Error(`Error getting transaction with id ${custodian_transactionId}. Status: ${response.status} ${response.statusText}`);return(await response.json()).data[0]}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransactions(){let headers=this.getHeaders();try{let response=await fetch(`${this.bitgoApiurl}/custodian/transaction`,{headers});if(!response.ok)throw Error(`Error getting transactions. Status: ${response.status} ${response.statusText}`);return(await response.json()).data}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getCustomerProof(){let headers=this.getHeaders();try{let response=await fetch(`${this.bitgoApiurl}/mmi/customer-proof`,{method:"POST",headers,body:JSON.stringify({version:"n/a"})});if(!response.ok)throw Error(`Error getting Custommer Proof. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signTypedData_v4(fromAddress,message,coinId,walletId,version){let headers=await this.getHeaders();try{let response=await fetch(`${this.bitgoApiurl}/mmi/${coinId}/wallet/${walletId}/messages/typed`,{method:"POST",body:JSON.stringify({address:fromAddress,payload:message,encodingVersion:version||"v4"}),headers});if(!response.ok)throw Error(`Error doing signTypedData from address: ${fromAddress}. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signPersonalMessage(fromAddress,message,coinId,walletId){let headers=await this.getHeaders();try{let response=await fetch(`${this.bitgoApiurl}/mmi/${coinId}/wallet/${walletId}/messages/personal`,{method:"POST",body:JSON.stringify({address:fromAddress,message}),headers});if(!response.ok)throw Error(`Error doing signPersonalMessage from address: ${fromAddress}. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getSignedMessage(custodian_signedMessageId,coinId,walletId){let headers=await this.getHeaders();try{let response=await fetch(`${this.bitgoApiurl}/mmi/${coinId}/wallet/${walletId}/messages/${custodian_signedMessageId}`,{headers});if(!response.ok)throw Error(`Error getting signed message with id ${custodian_signedMessageId}. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/bitgo/BitgoCustodianApi.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BitgoCustodianApi=void 0;let events_1=__webpack_require__("./node_modules/events/events.js"),BitgoClient_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/bitgo/BitgoClient.js"),DefaultBitgoCustodianDetails_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/bitgo/DefaultBitgoCustodianDetails.js");class BitgoCustodianApi extends events_1.EventEmitter{constructor(authDetails,_authType,apiUrl=DefaultBitgoCustodianDetails_1.DefaultBitgoCustodianDetails.apiUrl,_cacheAge){super(),this._cacheAge=_cacheAge,this.integrationVersion=1;let{jwt}=authDetails;this.client=new BitgoClient_1.BitgoClient(apiUrl,jwt),this.jwt=jwt}getAccountHierarchy(){return null}async getEthereumAccounts(chainId){let mappedAccounts=(await this.client.getEthereumAccounts()).map(account=>{var _a;return{name:(null===(_a=account.labels.find(label=>"Wallet Name"===label.key))||void 0===_a?void 0:_a.value)||"Unnamed Bitgo Wallet",address:account.address,balance:account.balance,custodianDetails:{accountId:account.custodianDetails.id,coinId:account.custodianDetails.coin},chainId:account.chainId,labels:account.labels.filter(label=>"Wallet Name"!==label.key)}});return chainId?mappedAccounts.filter(account=>account.chainId===chainId):mappedAccounts}async getEthereumAccountsByAddress(address){return(await this.getEthereumAccounts()).filter(account=>account.address.toLowerCase().includes(address.toLowerCase()))}async getEthereumAccountsByLabelOrAddressName(name){return(await this.getEthereumAccounts()).filter(account=>account.name.includes(name))}async createTransaction(txParams){let fromAddress=txParams.from,accounts=await this.getEthereumAccountsByAddress(fromAddress);if(!accounts.length)throw Error("No such ethereum account!");let walletId=accounts[0].custodianDetails.accountId,coinId=accounts[0].custodianDetails.coinId;txParams.gasLimit=(Number(txParams.gasLimit)+1e5).toString();let result=await this.client.createTransaction({walletId,coinId},txParams);return{transactionStatus:result.transactionStatus,custodian_transactionId:result.custodianTransactionId,from:result.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxFeePerGas,nonce:result.nonce,transactionHash:result.transactionHash}}async getTransaction(_from,custodian_transactionId){let result=await this.client.getTransaction(custodian_transactionId);return{transactionStatus:result.transactionStatus,custodian_transactionId:result.custodianTransactionId,from:result.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxPriorityFeePerGas,nonce:result.nonce,transactionHash:result.transactionHash}}async getCustomerId(){return"bitgo-customer"}async getAllTransactions(){return(await this.client.getTransactions()).map(result=>({transactionStatus:result.transactionStatus,custodian_transactionId:result.custodianTransactionId,from:result.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxPriorityFeePerGas,nonce:result.nonce,transactionHash:result.transactionHash}))}async getCustomerProof(){let{data}=await this.client.getCustomerProof();return data}async getErc20Tokens(){return{}}async getSupportedChains(address){let account=await this.client.getEthereumAccountByAddress(address);return account?[account.chainId.toString()]:[]}async getTransactionLink(_transactionId){return null}changeRefreshTokenAuthDetails(authDetails){throw Error("BitGo does not support refresh tokens")}async getSignedMessage(address,custodian_signedMessageId){let accounts=await this.getEthereumAccountsByAddress(address);if(!accounts.length)throw Error("No such ethereum account!");let walletId=accounts[0].custodianDetails.accountId,coinId=accounts[0].custodianDetails.coinId,result=await this.client.getSignedMessage(custodian_signedMessageId,coinId,walletId);return result?{id:result.data.id,signature:result.data.signature,status:result.data.status}:null}async signTypedData_v4(address,message,version){let accounts=await this.getEthereumAccountsByAddress(address);if(!accounts.length)throw Error("No such ethereum account!");let walletId=accounts[0].custodianDetails.accountId,coinId=accounts[0].custodianDetails.coinId;return{custodian_transactionId:(await this.client.signTypedData_v4(address,message,coinId,walletId,version)).data.id,transactionStatus:"created",from:address}}async signPersonalMessage(address,message){let accounts=await this.getEthereumAccountsByAddress(address);if(!accounts.length)throw Error("No such ethereum account!");let walletId=accounts[0].custodianDetails.accountId,coinId=accounts[0].custodianDetails.coinId;return{custodian_transactionId:(await this.client.signPersonalMessage(address,message,coinId,walletId)).data.id,transactionStatus:"created",from:address}}}exports.BitgoCustodianApi=BitgoCustodianApi},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/bitgo/DefaultBitgoCustodianDetails.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultBitgoCustodianDetails=void 0,exports.DefaultBitgoCustodianDetails={apiUrl:"https://app.bitgo.com/defi/v2"}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/cactus/CactusClient.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CactusClient=void 0;let simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),CustodianApiError_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/errors/CustodianApiError.js");exports.CactusClient=class{constructor(apiUrl,refreshToken){this.apiUrl=apiUrl,this.refreshToken=refreshToken,this.cache=new simplecache_1.SimpleCache}async getHeaders(){let accessToken=await this.cache.tryCachingArray("accessToken",7200,async()=>this.getAccessToken());return{"Content-Type":"application/json",Authorization:`Bearer ${accessToken}`}}async getAccessToken(){try{let response=await fetch(`${this.apiUrl}/tokens`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grantType:"refresh_token",refreshToken:this.refreshToken})});if(!response.ok)throw Error(`Error fetching the access token. Status: ${response.status} ${response.statusText}`);let data=await response.json();if(!data.jwt)throw Error("No access token");return data.jwt}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getEthereumAccounts(){let headers=await this.getHeaders();try{let response=await fetch(`${this.apiUrl}/eth-accounts`,{headers});if(!response.ok)throw Error(`Error fetching accounts. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async createTransaction(cactusTxDetails,txParams){let headers=await this.getHeaders(),payload={to:txParams.to,from:txParams.from,value:txParams.value,data:txParams.data,gasLimit:txParams.gasLimit,note:cactusTxDetails.note};"0"===txParams.type||"1"===txParams.type?payload.gasPrice=txParams.gasPrice:"2"===txParams.type&&(payload.maxPriorityFeePerGas=txParams.maxPriorityFeePerGas,payload.maxFeePerGas=txParams.maxFeePerGas);try{let response=await fetch(`${this.apiUrl}/transactions?chainId=${cactusTxDetails.chainId}`,{method:"POST",body:JSON.stringify(payload),headers});if(!response.ok)throw Error(`Error creating transaction. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getSignedMessage(custodian_signedMessageId){let headers=await this.getHeaders();try{let response=await fetch(`${this.apiUrl}/signatures?transactionId=${custodian_signedMessageId}`,{headers});if(!response.ok)throw Error(`Error getting signed message with id ${custodian_signedMessageId}. Status: ${response.status} ${response.statusText}`);let data=await response.json();if(data.length)return data[0];return null}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransaction(custodian_transactionId){let headers=await this.getHeaders();try{let response=await fetch(`${this.apiUrl}/transactions?transactionId=${custodian_transactionId}`,{headers});if(!response.ok)throw Error(`Error getting transaction with id ${custodian_transactionId}. Status: ${response.status} ${response.statusText}`);let data=await response.json();if(data.length)return data[0];return null}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransactions(chainId){let headers=await this.getHeaders();try{let response=await fetch(`${this.apiUrl}/transactions?chainId=${chainId}`,{headers});if(!response.ok)throw Error(`Error getting transactions with chainId ${chainId}. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getCustomerProof(){let headers=await this.getHeaders();try{let response=await fetch(`${this.apiUrl}/customer-proof`,{method:"POST",headers,body:JSON.stringify({})});if(!response.ok)throw Error(`Error getting Custommer Proof. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signTypedData_v4(fromAddress,message,signatureVersion,chainId){let headers=await this.getHeaders(),url=`${this.apiUrl}/signatures`;chainId&&(url+=`?chainId=${chainId}`);try{let response=await fetch(url,{method:"POST",body:JSON.stringify({address:fromAddress,payload:message,signatureVersion}),headers});if(!response.ok)throw Error(`Error doing signTypedData from address: ${fromAddress}. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signPersonalMessage(fromAddress,message){let headers=await this.getHeaders();try{let response=await fetch(`${this.apiUrl}/signatures`,{method:"POST",body:JSON.stringify({address:fromAddress,payload:{message},signatureVersion:"personalSign"}),headers});if(!response.ok)throw Error(`Error doing signPersonalMessage from address: ${fromAddress}. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getChainIds(){let headers=await this.getHeaders();try{let response=await fetch(`${this.apiUrl}/chainIds`,{headers});if(!response.ok)throw Error(`Error getting chainIds. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/cactus/CactusCustodianApi.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CactusCustodianApi=void 0;let simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),events_1=__webpack_require__("./node_modules/events/events.js"),map_status_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/util/map-status.js"),CactusClient_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/cactus/CactusClient.js"),DefaultCactusCustodianDetails_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/cactus/DefaultCactusCustodianDetails.js");class CactusCustodianApi extends events_1.EventEmitter{constructor(authDetails,_authType,apiUrl=DefaultCactusCustodianDetails_1.DefaultCactusCustodianDetails.apiUrl,cacheAge){super(),this.cacheAge=cacheAge,this.cache=new simplecache_1.SimpleCache,this.integrationVersion=1,this.client=new CactusClient_1.CactusClient(apiUrl,authDetails.refreshToken)}getAccountHierarchy(){return null}async getEthereumAccounts(){return(await this.client.getEthereumAccounts()).map(account=>({name:account.name||"Cactus wallet",address:account.address,balance:account.balance,custodianDetails:{walletId:account.custodianDetails.walletId,chainId:account.chainId},labels:account.labels?account.labels.map(label=>({key:"label",value:label})):[]}))}async getEthereumAccountsByAddress(address){return(await this.getEthereumAccounts()).filter(account=>account.address.toLowerCase().includes(address.toLowerCase()))}async getEthereumAccountsByLabelOrAddressName(name){let accounts=await this.getEthereumAccounts();return name.length?accounts.filter(account=>new RegExp(name).test(account.name)):accounts}async createTransaction(txParams,txMeta){let result=await this.client.createTransaction({chainId:Number(txMeta.chainId),note:txMeta.note},txParams);return{transactionStatus:result.transactionStatus,custodian_transactionId:result.custodian_transactionId,from:result.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxFeePerGas,nonce:result.nonce,transactionHash:result.transactionHash}}async getTransaction(_from,custodian_transactionId){let result=await this.client.getTransaction(custodian_transactionId);return result?{transactionStatus:result.transactionStatus,custodian_transactionId:result.custodian_transactionId,from:result.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxPriorityFeePerGas,nonce:result.nonce,transactionHash:result.transactionHash}:null}async getSignedMessage(address,custodian_signedMessageId){var _a;let result=await this.client.getSignedMessage(custodian_signedMessageId),signature=null==result?void 0:result.signature;return result?((null===(_a=result.signature)||void 0===_a?void 0:_a.length)&&(signature=result.signature),{id:result.custodian_transactionId,signature,status:(0,map_status_1.mapTransactionStatus)(result.transactionStatus)}):null}async getCustomerId(){return"cactus-customer"}async getAllTransactions(){throw Error("Not implemented")}async getCustomerProof(){let{jwt}=await this.client.getCustomerProof();return jwt}async signTypedData_v4(address,message,version){var _a;let result=await this.client.signTypedData_v4(address,message,version,null===(_a=message.domain)||void 0===_a?void 0:_a.chainId);return{custodian_transactionId:result.custodian_transactionId,transactionStatus:result.transactionStatus,from:address}}async signPersonalMessage(address,message){let result=await this.client.signPersonalMessage(address,message);return{custodian_transactionId:result.custodian_transactionId,transactionStatus:result.transactionStatus,from:address}}async getErc20Tokens(){return{}}async getSupportedChains(){return this.cache.tryCachingArray("getSupportedChains",this.cacheAge,async()=>{let{networks}=await this.client.getChainIds();return networks.map(network=>network.chainID)})}async getTransactionLink(_transactionId){return null}changeRefreshTokenAuthDetails(authDetails){throw Error("Not implemented yet")}}exports.CactusCustodianApi=CactusCustodianApi},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/cactus/DefaultCactusCustodianDetails.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultCactusCustodianDetails=void 0,exports.DefaultCactusCustodianDetails={apiUrl:"https://jupiter-custody.codefi.network"}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/curv/CurvCustodianApi.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CurvCustodianApi=void 0;let events_1=__webpack_require__("./node_modules/events/events.js");class CurvCustodianApi extends events_1.EventEmitter{constructor(authDetails,_authType,_apiUrl=null,cacheAge){super(),this.cacheAge=cacheAge,this.integrationVersion=1}async getAccountHierarchy(){return null}async getEthereumAccounts(_chainId){return null}async getEthereumAccountsByAddress(_address){return null}async createTransaction(_txParams){return null}async getTransaction(_from,_custodian_transactionId){return null}changeRefreshTokenAuthDetails(authDetails){throw Error("Not implemented yet")}async getCustomerId(){return null}async getCustomerProof(){return null}async getAllTransactions(){return null}async signTypedData_v4(_address,_buffer,_version){return null}async signPersonalMessage(_address,_message){return null}async suggestGasPrices(_address){return null}async getNetworkMappings(_organizationId){return null}async getErc20Tokens(){return null}async getSupportedChains(){return null}async getEthereumAccountsByLabelOrAddressName(_name,_chainId){return null}async getTransactionLink(_transactionId){return null}}exports.CurvCustodianApi=CurvCustodianApi},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/eca3/ECA3Client.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ECA3Client=void 0;let simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),crypto_1=__importDefault(__webpack_require__("?cbdd")),events_1=__webpack_require__("./node_modules/events/events.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js"),json_rpc_call_1=__importDefault(__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/eca3/util/json-rpc-call.js"));class ECA3Client extends events_1.EventEmitter{constructor(apiBaseUrl,refreshToken,refreshTokenUrl){super(),this.apiBaseUrl=apiBaseUrl,this.refreshToken=refreshToken,this.refreshTokenUrl=refreshTokenUrl,this.cacheAge=null,this.call=(0,json_rpc_call_1.default)(`${apiBaseUrl}/v3/json-rpc`),this.cache=new simplecache_1.SimpleCache}setRefreshToken(refreshToken){let payload={oldRefreshToken:this.refreshToken,newRefreshToken:refreshToken};this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,payload),this.refreshToken=refreshToken}async getAccessToken(){if(this.cacheAge&&this.cache.cacheExists("accessToken")&&this.cache.cacheValid("accessToken",this.cacheAge))return this.cache.getCache("accessToken");try{let data={grant_type:"refresh_token",refresh_token:this.refreshToken},response=await fetch(this.refreshTokenUrl,{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"},credentials:"same-origin"});if((null==response?void 0:response.status)===401&&(null==response?void 0:response.url)){let url=response.url,oldRefreshToken=this.refreshToken,hashedToken=crypto_1.default.createHash("sha256").update(oldRefreshToken+url).digest("hex");throw this.emit(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,{url,oldRefreshToken:hashedToken}),Error("Refresh token provided is no longer valid.")}if(!response.ok){let errorResponse=await response.json();throw Error(`Request failed with status ${response.status}: ${errorResponse.message}`)}let responseJson=await response.json();if(this.cacheAge=responseJson.expires_in,this.cache.setCache("accessToken",responseJson.access_token),responseJson.refresh_token&&responseJson.refresh_token!==this.refreshToken){console.log("JsonRPCClient: Refresh token changed to "+responseJson.refresh_token.substring(0,5)+"..."+responseJson.refresh_token.substring(responseJson.refresh_token.length-5));let oldRefreshToken=this.refreshToken;this.setRefreshToken(responseJson.refresh_token);let payload={oldRefreshToken,newRefreshToken:responseJson.refresh_token};this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,payload)}return responseJson.access_token}catch(error){throw Error(`Error getting the Access Token: ${error}`)}}async listAccounts(){let accessToken=await this.getAccessToken();return this.call("custodian_listAccounts",{},accessToken)}async listAccountsSigned(){let accessToken=await this.getAccessToken();return this.call("custodian_listAccountsSigned",{},accessToken)}async replaceTransaction(replaceTransactionPayload){let accessToken=await this.getAccessToken();return this.call("custodian_replaceTransaction",replaceTransactionPayload,accessToken)}async getCustomerProof(){let accessToken=await this.getAccessToken();return this.call("custodian_getCustomerProof",{},accessToken)}async createTransaction(createTransactionPayload){let accessToken=await this.getAccessToken();return this.call("custodian_createTransaction",createTransactionPayload,accessToken)}async getAccountChainIds(listAccountChainIdPayload){let accessToken=await this.getAccessToken();return this.call("custodian_listAccountChainIds",listAccountChainIdPayload,accessToken)}async signPersonalMessage(signPayload){let accessToken=await this.getAccessToken();return this.call("custodian_sign",signPayload,accessToken)}async signTypedData(signPayload){let accessToken=await this.getAccessToken();return this.call("custodian_signTypedData",signPayload,accessToken)}async getTransaction(getTransactionPayload){let accessToken=await this.getAccessToken();return this.call("custodian_getTransactionById",getTransactionPayload,accessToken)}async getSignedMessage(getSignedMessagePayload){let accessToken=await this.getAccessToken();return this.call("custodian_getSignedMessageById",getSignedMessagePayload,accessToken)}async getTransactionLink(getTransactionLinkPayload){let accessToken=await this.getAccessToken();return this.call("custodian_getTransactionLink",getTransactionLinkPayload,accessToken)}async getSignedMessageLink(getSignedMessageLinkPayload){let accessToken=await this.getAccessToken();return this.call("custodian_getSignedMessageLink",getSignedMessageLinkPayload,accessToken)}}exports.ECA3Client=ECA3Client},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/eca3/ECA3CustodianApi.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ECA3CustodianApi=void 0;let simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),events_1=__webpack_require__("./node_modules/events/events.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js"),ECA3Client_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/eca3/ECA3Client.js"),hexlify_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/eca3/util/hexlify.js"),mapStatusObjectToStatusText_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/eca3/util/mapStatusObjectToStatusText.js");class ECA3CustodianApi extends events_1.EventEmitter{constructor(authDetails,_authType,apiUrl,cacheAge){super(),this.cacheAge=cacheAge,this.cache=new simplecache_1.SimpleCache,this.integrationVersion=2;let{refreshToken}=authDetails;this.client=new ECA3Client_1.ECA3Client(apiUrl,refreshToken,authDetails.refreshTokenUrl),this.client.on(constants_1.REFRESH_TOKEN_CHANGE_EVENT,event=>{this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,event)}),this.client.on(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,event=>{this.emit(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,event)})}getAccountHierarchy(){return null}async getEthereumAccounts(){return(await this.client.listAccounts()).result.map(account=>({name:account.name,address:account.address,custodianDetails:null,labels:account.tags.map(tag=>({key:tag.name,value:tag.value})),metadata:account.metadata}))}async getEthereumAccountsByAddress(address){return(await this.getEthereumAccounts()).filter(account=>account.address.toLowerCase().includes(address.toLowerCase()))}async getListAccountsSigned(){let{result}=await this.client.listAccountsSigned();return result.jwt}async getEthereumAccountsByLabelOrAddressName(name){return(await this.getEthereumAccounts()).filter(account=>account.name.includes(name))}async createTransaction(txParams,txMeta){let fromAddress=txParams.from,accounts=await this.getEthereumAccountsByAddress(fromAddress);if(!accounts.length)throw Error("No such ethereum account!");let payload={from:accounts[0].address,to:txParams.to,data:txParams.data,value:(0,hexlify_1.hexlify)(txParams.value),gas:(0,hexlify_1.hexlify)(txParams.gasLimit),type:(0,hexlify_1.hexlify)(txParams.type)};2===Number(txParams.type)?(payload.maxFeePerGas=(0,hexlify_1.hexlify)(txParams.maxFeePerGas),payload.maxPriorityFeePerGas=(0,hexlify_1.hexlify)(txParams.maxPriorityFeePerGas)):payload.gasPrice=(0,hexlify_1.hexlify)(txParams.gasPrice);let{result}=await this.client.createTransaction([payload,{chainId:(0,hexlify_1.hexlify)(txMeta.chainId),note:txMeta.note,originUrl:txMeta.origin,transactionCategory:txMeta.transactionCategory,custodianPublishesTransaction:txMeta.custodianPublishesTransaction,rpcUrl:txMeta.rpcUrl}]);return{custodian_transactionId:result,transactionStatus:"created",from:accounts[0].address}}async getTransaction(_from,custodian_transactionId){var _a;let{result}=await this.client.getTransaction([custodian_transactionId]);return result?{transactionStatus:(0,mapStatusObjectToStatusText_1.mapStatusObjectToStatusText)(result.transaction.status),transactionStatusDisplayText:null===(_a=result.transaction.status)||void 0===_a?void 0:_a.displayText,custodian_transactionId:result.transaction.id,from:result.transaction.from,gasLimit:result.transaction.gas,gasPrice:result.transaction.gasPrice,maxFeePerGas:result.transaction.maxFeePerGas,maxPriorityFeePerGas:result.transaction.maxPriorityFeePerGas,nonce:result.transaction.nonce,transactionHash:result.transaction.hash,reason:result.transaction.status.reason,to:result.transaction.to,signedRawTransaction:result.transaction.signedRawTransaction,chainId:result.metadata.chainId,custodianPublishesTransaction:result.metadata.custodianPublishesTransaction,rpcUrl:result.metadata.rpcUrl}:null}async replaceTransaction(txParams){let payload={transactionId:txParams.transactionId,action:txParams.action},{result}=await this.client.replaceTransaction([payload,{gas:(0,hexlify_1.hexlify)(txParams.gasLimit),maxPriorityFeePerGas:(0,hexlify_1.hexlify)(txParams.maxPriorityFeePerGas),maxFeePerGas:(0,hexlify_1.hexlify)(txParams.maxFeePerGas)}]);return{transactionId:result.transactionId}}async getSignedMessage(_address,custodian_signedMessageId){let{result}=await this.client.getSignedMessage([custodian_signedMessageId]);return result?{signature:result.signature,status:result.status}:null}async getTransactionLink(transactionId){let{result}=await this.client.getTransactionLink([transactionId]);return result?{url:result.url,text:result.text,action:result.action,ethereum:result.ethereum}:null}async getSignedMessageLink(transactionId){let{result}=await this.client.getSignedMessageLink([transactionId]);return result?{url:result.url,text:result.text,action:result.action,ethereum:result.ethereum}:null}async getCustomerId(){return null}async getAllTransactions(){return null}async getCustomerProof(){let{result}=await this.client.getCustomerProof();return result.jwt}async signTypedData_v4(address,data,version,signedTypedMessageMetadata){if(!(await this.getEthereumAccountsByAddress(address)).length)throw Error("No such ethereum account!");version=version.toLowerCase();let{result}=await this.client.signTypedData([{address,data,version},signedTypedMessageMetadata]);return{custodian_transactionId:result,transactionStatus:"created",from:address}}async signPersonalMessage(address,message,signedMessageMetadata){let accounts=await this.getEthereumAccountsByAddress(address);if(!accounts.length)throw Error("No such ethereum account!");let{result}=await this.client.signPersonalMessage([{address,message},signedMessageMetadata]);return{custodian_transactionId:result,transactionStatus:"created",from:accounts[0].address}}async getErc20Tokens(){return{}}async getSupportedChains(address){return this.cache.tryCachingArray("getSupportedChains-"+address,this.cacheAge,async()=>{let{result}=await this.client.getAccountChainIds([address]);return result})}changeRefreshTokenAuthDetails(authDetails){this.client.setRefreshToken(authDetails.refreshToken)}}exports.ECA3CustodianApi=ECA3CustodianApi},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/eca3/util/hexlify.js":(__unused_webpack_module,exports)=>{"use strict";function hexlify(num){return"0x"+BigInt(num).toString(16)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hexlify=void 0,exports.hexlify=hexlify},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/eca3/util/json-rpc-call.js":(__unused_webpack_module,exports)=>{"use strict";function default_1(jsonRpcEndpoint){let requestId=0;return async function jsonRpcCall(method,params,accessToken){let response,responseJson;console.debug("JSON-RPC >",method,++requestId,params,jsonRpcEndpoint);try{if(response=await fetch(jsonRpcEndpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${accessToken}`},body:JSON.stringify({jsonrpc:"2.0",id:requestId,method,params}),credentials:"same-origin"}),(responseJson=await response.json()).error)throw console.log("JSON-RPC <",method,requestId,responseJson,jsonRpcEndpoint),Error(responseJson.error.message);console.debug("JSON-RPC <",method,requestId,responseJson.result,jsonRpcEndpoint)}catch(e){throw console.log("JSON-RPC <",method,requestId,e,jsonRpcEndpoint),e}return responseJson}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=default_1},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/eca3/util/mapStatusObjectToStatusText.js":(__unused_webpack_module,exports)=>{"use strict";function mapStatusObjectToStatusText(status){return status.finished&&status.submitted&&status.signed&&status.success?"mined":status.finished&&status.submitted&&status.signed&&!status.success?"failed":status.submitted&&!status.finished?"submitted":status.signed&&!status.submitted?"signed":status.signed||status.finished?!status.signed&&status.finished?"aborted":void 0:"created"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapStatusObjectToStatusText=void 0,exports.mapStatusObjectToStatusText=mapStatusObjectToStatusText},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/JsonRpcClient.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsonRpcClient=void 0;let simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),crypto_1=__importDefault(__webpack_require__("?9581")),events_1=__webpack_require__("./node_modules/events/events.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js"),json_rpc_call_1=__importDefault(__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/util/json-rpc-call.js"));class JsonRpcClient extends events_1.EventEmitter{constructor(apiBaseUrl,refreshToken,refreshTokenUrl){super(),this.apiBaseUrl=apiBaseUrl,this.refreshToken=refreshToken,this.refreshTokenUrl=refreshTokenUrl,this.cacheAge=null,this.call=(0,json_rpc_call_1.default)(`${apiBaseUrl}/v1/json-rpc`),this.cache=new simplecache_1.SimpleCache}setRefreshToken(refreshToken){let payload={oldRefreshToken:this.refreshToken,newRefreshToken:refreshToken};this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,payload),this.refreshToken=refreshToken}async getAccessToken(){if(this.cacheAge&&this.cache.cacheExists("accessToken")&&this.cache.cacheValid("accessToken",this.cacheAge))return this.cache.getCache("accessToken");try{let data=new URLSearchParams({grant_type:"refresh_token",refresh_token:this.refreshToken}),response=await fetch(this.refreshTokenUrl,{method:"POST",body:data,headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:"same-origin"});if((null==response?void 0:response.status)===401&&(null==response?void 0:response.url)){let url=null==response?void 0:response.url,oldRefreshToken=this.refreshToken,hashedToken=crypto_1.default.createHash("sha256").update(oldRefreshToken+url).digest("hex");throw this.emit(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,{url,oldRefreshToken:hashedToken}),Error("Refresh token provided is no longer valid.")}if(!response.ok){let errorResponse=await response.json();throw Error(`Request failed with status ${response.status}: ${errorResponse.message}`)}let responseJson=await response.json();if(this.cacheAge=responseJson.expires_in,this.cache.setCache("accessToken",responseJson.access_token),responseJson.refresh_token&&responseJson.refresh_token!==this.refreshToken){console.log("JsonRPCClient: Refresh token changed to "+responseJson.refresh_token.substring(0,5)+"..."+responseJson.refresh_token.substring(responseJson.refresh_token.length-5));let oldRefreshToken=this.refreshToken;this.setRefreshToken(responseJson.refresh_token);let payload={oldRefreshToken,newRefreshToken:responseJson.refresh_token};this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,payload)}return responseJson.access_token}catch(error){throw Error(`Error getting the Access Token: ${error}`)}}async listAccounts(){let accessToken=await this.getAccessToken();return this.call("custodian_listAccounts",{},accessToken)}async getCustomerProof(){let accessToken=await this.getAccessToken();return this.call("custodian_getCustomerProof",{},accessToken)}async createTransaction(createTransactionPayload){let accessToken=await this.getAccessToken();return this.call("custodian_createTransaction",createTransactionPayload,accessToken)}async getAccountChainIds(listAccountChainIdPayload){let accessToken=await this.getAccessToken();return this.call("custodian_listAccountChainIds",listAccountChainIdPayload,accessToken)}async signPersonalMessage(signPayload){let accessToken=await this.getAccessToken();return this.call("custodian_sign",signPayload,accessToken)}async signTypedData(signPayload){let accessToken=await this.getAccessToken();return this.call("custodian_signTypedData",signPayload,accessToken)}async getTransaction(getTransactionPayload){let accessToken=await this.getAccessToken();return this.call("custodian_getTransactionById",getTransactionPayload,accessToken)}async getSignedMessage(getSignedMessagePayload){let accessToken=await this.getAccessToken();return this.call("custodian_getSignedMessageById",getSignedMessagePayload,accessToken)}async getTransactionLink(getTransactionLinkPayload){let accessToken=await this.getAccessToken();return this.call("custodian_getTransactionLink",getTransactionLinkPayload,accessToken)}}exports.JsonRpcClient=JsonRpcClient},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/JsonRpcCustodianApi.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JsonRpcCustodianApi=void 0;let simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),events_1=__webpack_require__("./node_modules/events/events.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js"),JsonRpcClient_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/JsonRpcClient.js"),hexlify_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/util/hexlify.js"),mapStatusObjectToStatusText_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/util/mapStatusObjectToStatusText.js");class JsonRpcCustodianApi extends events_1.EventEmitter{constructor(authDetails,_authType,apiUrl,cacheAge){super(),this.cacheAge=cacheAge,this.cache=new simplecache_1.SimpleCache,this.integrationVersion=2;let{refreshToken}=authDetails;this.client=new JsonRpcClient_1.JsonRpcClient(apiUrl,refreshToken,authDetails.refreshTokenUrl),this.client.on(constants_1.REFRESH_TOKEN_CHANGE_EVENT,event=>{this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,event)}),this.client.on(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,event=>{this.emit(constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT,event)})}getAccountHierarchy(){return null}async getEthereumAccounts(){return(await this.client.listAccounts()).result.map(account=>({name:account.name,address:account.address,custodianDetails:null,labels:account.tags.map(tag=>({key:tag.name,value:tag.value}))}))}async getEthereumAccountsByAddress(address){return(await this.getEthereumAccounts()).filter(account=>account.address.toLowerCase().includes(address.toLowerCase()))}async getEthereumAccountsByLabelOrAddressName(name){return(await this.getEthereumAccounts()).filter(account=>account.name.includes(name))}async createTransaction(txParams,txMeta){let fromAddress=txParams.from,accounts=await this.getEthereumAccountsByAddress(fromAddress);if(!accounts.length)throw Error("No such ethereum account!");let payload={from:accounts[0].address,to:txParams.to,data:txParams.data,value:(0,hexlify_1.hexlify)(txParams.value),gas:(0,hexlify_1.hexlify)(txParams.gasLimit),type:(0,hexlify_1.hexlify)(txParams.type)};2===Number(txParams.type)?(payload.maxFeePerGas=(0,hexlify_1.hexlify)(txParams.maxFeePerGas),payload.maxPriorityFeePerGas=(0,hexlify_1.hexlify)(txParams.maxPriorityFeePerGas)):payload.gasPrice=(0,hexlify_1.hexlify)(txParams.gasPrice);let{result}=await this.client.createTransaction([payload,{chainId:(0,hexlify_1.hexlify)(txMeta.chainId),note:txMeta.note,originUrl:txMeta.origin,transactionCategory:txMeta.transactionCategory}]);return{custodian_transactionId:result,transactionStatus:"created",from:accounts[0].address}}async getTransaction(_from,custodian_transactionId){var _a;let{result}=await this.client.getTransaction([custodian_transactionId]);return result?{transactionStatus:(0,mapStatusObjectToStatusText_1.mapStatusObjectToStatusText)(result.status),transactionStatusDisplayText:null===(_a=result.status)||void 0===_a?void 0:_a.displayText,custodian_transactionId:result.id,from:result.from,gasLimit:result.gas,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxPriorityFeePerGas,nonce:result.nonce,transactionHash:result.hash,reason:result.status.reason,to:result.to}:null}async getSignedMessage(_address,custodian_signedMessageId){let{result}=await this.client.getSignedMessage([custodian_signedMessageId]);return result?{signature:result.signature,status:result.status}:null}async getTransactionLink(transactionId){let{result}=await this.client.getTransactionLink([transactionId]);return result?{url:result.url,text:result.text,action:result.action,ethereum:result.ethereum}:null}async getCustomerId(){return null}async getAllTransactions(){return null}async getCustomerProof(){let{result}=await this.client.getCustomerProof();return result.jwt}async signTypedData_v4(address,message,version){if(!(await this.getEthereumAccountsByAddress(address)).length)throw Error("No such ethereum account!");version=version.toLowerCase();let{result}=await this.client.signTypedData([address,message,version]);return{custodian_transactionId:result,transactionStatus:"created",from:address}}async signPersonalMessage(address,message){let accounts=await this.getEthereumAccountsByAddress(address);if(!accounts.length)throw Error("No such ethereum account!");let{result}=await this.client.signPersonalMessage([address,message]);return{custodian_transactionId:result,transactionStatus:"created",from:accounts[0].address}}async getErc20Tokens(){return{}}async getSupportedChains(address){return this.cache.tryCachingArray("getSupportedChains-"+address,this.cacheAge,async()=>{let{result}=await this.client.getAccountChainIds([address]);return result})}changeRefreshTokenAuthDetails(authDetails){this.client.setRefreshToken(authDetails.refreshToken)}}exports.JsonRpcCustodianApi=JsonRpcCustodianApi},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/util/hexlify.js":(__unused_webpack_module,exports)=>{"use strict";function hexlify(num){return"0x"+BigInt(num).toString(16)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hexlify=void 0,exports.hexlify=hexlify},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/util/json-rpc-call.js":(__unused_webpack_module,exports)=>{"use strict";function default_1(jsonRpcEndpoint){let requestId=0;return async function jsonRpcCall(method,params,accessToken){let response,responseJson;console.debug("JSON-RPC >",method,++requestId,params,jsonRpcEndpoint);try{if(response=await fetch(jsonRpcEndpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${accessToken}`},body:JSON.stringify({jsonrpc:"2.0",id:requestId,method,params}),credentials:"same-origin"}),(responseJson=await response.json()).error)throw console.log("JSON-RPC <",method,requestId,responseJson,jsonRpcEndpoint),Error(responseJson.error.message);console.debug("JSON-RPC <",method,requestId,responseJson.result,jsonRpcEndpoint)}catch(e){throw console.log("JSON-RPC <",method,requestId,e,jsonRpcEndpoint),e}return responseJson}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=default_1},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/util/mapStatusObjectToStatusText.js":(__unused_webpack_module,exports)=>{"use strict";function mapStatusObjectToStatusText(status){return status.finished&&status.submitted&&status.signed&&status.success?"mined":status.finished&&status.submitted&&status.signed&&!status.success?"failed":status.submitted&&!status.finished?"submitted":status.signed&&!status.submitted?"signed":status.signed||status.finished?!status.signed&&status.finished?"aborted":void 0:"created"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapStatusObjectToStatusText=void 0,exports.mapStatusObjectToStatusText=mapStatusObjectToStatusText},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/jupiter/DefaultJupiterCustodianDetails.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultJupiterCustodianDetails=void 0,exports.DefaultJupiterCustodianDetails={apiUrl:"https://jupiter-custody.codefi.network"}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/jupiter/JupiterClient.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JupiterClient=void 0;let CustodianApiError_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/errors/CustodianApiError.js");exports.JupiterClient=class{constructor(apiUrl,jwt){this.jupiterApiurl=apiUrl,this.jwt=jwt}getHeaders(){return{Authorization:`Bearer ${this.jwt}`}}async getEthereumAccounts(){let headers=this.getHeaders();try{let response=await fetch(`${this.jupiterApiurl}/custodian/account`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async createTransaction(jupiterTxDetails,txParams){let headers=this.getHeaders(),payload={to:txParams.to,accountId:jupiterTxDetails.accountId,value:txParams.value,data:txParams.data,type:txParams.type,gasLimit:txParams.gasLimit,network:jupiterTxDetails.chainId};"0"===txParams.type||"1"===txParams.type?payload.gasPrice=txParams.gasPrice:"2"===txParams.type&&(payload.maxPriorityFeePerGas=txParams.maxPriorityFeePerGas,payload.maxFeePerGas=txParams.maxFeePerGas);try{let response=await fetch(`${this.jupiterApiurl}/custodian/transaction`,{method:"POST",body:JSON.stringify(payload),headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransaction(custodian_transactionId){let headers=this.getHeaders();try{let response=await fetch(`${this.jupiterApiurl}/custodian/transaction/${custodian_transactionId}`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransactions(){let headers=this.getHeaders();try{let response=await fetch(`${this.jupiterApiurl}/custodian/transaction`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getCustomerProof(customerId,issuer){let headers=this.getHeaders();try{let response=await fetch(`${this.jupiterApiurl}/customer-proof`,{method:"POST",headers,body:JSON.stringify({customerId,issuer,custodian:"jupiter"})});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signTypedData_v4(accountId,message,signatureVersion){let headers=this.getHeaders();try{let response=await fetch(`${this.jupiterApiurl}/custodian/signature`,{method:"POST",body:JSON.stringify({accountId,payload:message,signatureVersion}),headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signPersonalMessage(accountId,message){let headers=this.getHeaders();try{let response=await fetch(`${this.jupiterApiurl}/custodian/personal-signature`,{method:"POST",body:JSON.stringify({accountId,payload:message}),headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getSupportedChains(){let headers=this.getHeaders();try{let response=await fetch(`${this.jupiterApiurl}/custodian/networks`,{headers});return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/jupiter/JupiterCustodianApi.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JupiterCustodianApi=void 0;let simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),events_1=__webpack_require__("./node_modules/events/events.js"),get_token_issuer_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/util/get-token-issuer.js"),DefaultJupiterCustodianDetails_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/jupiter/DefaultJupiterCustodianDetails.js"),JupiterClient_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/jupiter/JupiterClient.js");class JupiterCustodianApi extends events_1.EventEmitter{constructor(authDetails,_authType,apiUrl=DefaultJupiterCustodianDetails_1.DefaultJupiterCustodianDetails.apiUrl,cacheAge){super(),this.cacheAge=cacheAge,this.cache=new simplecache_1.SimpleCache,this.integrationVersion=1;let{jwt}=authDetails;this.client=new JupiterClient_1.JupiterClient(apiUrl,jwt),this.jwt=jwt}getAccountHierarchy(){return null}async getEthereumAccounts(){return(await this.client.getEthereumAccounts()).map(account=>({name:account.label,address:account.address,balance:account.balance,custodianDetails:{accountId:account.id},labels:[{key:"label",value:account.label}]}))}async getEthereumAccountsByAddress(address){return(await this.getEthereumAccounts()).filter(account=>account.address.toLowerCase().includes(address.toLowerCase()))}async getEthereumAccountsByLabelOrAddressName(name){return(await this.getEthereumAccounts()).filter(account=>account.name.includes(name))}async createTransaction(txParams,txMeta){let fromAddress=txParams.from,accounts=await this.getEthereumAccountsByAddress(fromAddress);if(!accounts.length)throw Error("No such ethereum account!");let accountId=accounts[0].custodianDetails.accountId,result=await this.client.createTransaction({accountId,chainId:txMeta.chainId},txParams);return{transactionStatus:result.transactionStatus,custodian_transactionId:result.id,from:result.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxFeePerGas,nonce:result.nonce,transactionHash:result.transactionHash}}async getTransaction(_from,custodian_transactionId){let result=await this.client.getTransaction(custodian_transactionId);return{transactionStatus:result.transactionStatus,custodian_transactionId:result.id,from:result.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:result.maxFeePerGas,maxPriorityFeePerGas:result.maxPriorityFeePerGas,nonce:result.nonce,transactionHash:result.transactionHash}}async getCustomerId(){return"jupiter-customer"}async getAllTransactions(){return(await this.client.getTransactions()).map(result=>({transactionStatus:result.transactionStatus,custodian_transactionId:result.id,from:result.from}))}async getCustomerProof(){let customerId=await this.getCustomerId(),issuer=(0,get_token_issuer_1.getTokenIssuer)(this.jwt),{jwt}=await this.client.getCustomerProof(customerId,issuer);return jwt}async signTypedData_v4(address,message,version){let accounts=await this.getEthereumAccountsByAddress(address);if(!accounts.length)throw Error("No such ethereum account!");let accountId=accounts[0].custodianDetails.accountId,result=await this.client.signTypedData_v4(accountId,message,version);return{custodian_transactionId:result.id,transactionStatus:result.transactionStatus,from:result.from}}async signPersonalMessage(address,message){let accounts=await this.getEthereumAccountsByAddress(address);if(!accounts.length)throw Error("No such ethereum account!");let accountId=accounts[0].custodianDetails.accountId,result=await this.client.signPersonalMessage(accountId,message);return{custodian_transactionId:result.id,transactionStatus:result.transactionStatus,from:result.from}}async getErc20Tokens(){return{}}async getSupportedChains(){return this.cache.tryCachingArray("getSupportedChains",this.cacheAge,async()=>Object.keys(await this.client.getSupportedChains()))}async getTransactionLink(_transactionId){return null}changeRefreshTokenAuthDetails(authDetails){throw Error("Not implemented yet")}}exports.JupiterCustodianApi=JupiterCustodianApi},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/DefaultQredoCustodianDetails.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DefaultQredoCustodianDetails=void 0,exports.DefaultQredoCustodianDetails={apiUrl:"https://jupiter-custody.codefi.network"}},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/QredoClient.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QredoClient=void 0;let simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),events_1=__webpack_require__("./node_modules/events/events.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js"),CustodianApiError_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/errors/CustodianApiError.js");class QredoClient extends events_1.EventEmitter{constructor(apiUrl,refreshToken){super(),this.apiUrl=apiUrl,this.refreshToken=refreshToken,this.cache=new simplecache_1.SimpleCache}async getHeaders(){let accessToken=await this.cache.tryCachingArray("accessToken",800,async()=>this.getAccessToken());return{"Content-Type":"application/json",Authorization:`Bearer ${accessToken}`}}async getAccessToken(){try{let response=await fetch(`${this.apiUrl}/connect/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`grant_type=refresh_token&refresh_token=${this.refreshToken}`});if(!response.ok)throw Error(`Error fetching the access token. Status: ${response.status} ${response.statusText}`);let data=await response.json();if(!data.access_token)throw Error("No access token");if(data.refresh_token&&data.refresh_token!==this.refreshToken){console.log("JsonRPCClient: Refresh token changed to "+data.refresh_token.substring(0,5)+"..."+data.refresh_token.substring(data.refresh_token.length-5));let oldRefreshToken=this.refreshToken;this.setRefreshToken(data.refresh_token);let payload={oldRefreshToken,newRefreshToken:data.refresh_token};this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,payload)}return data.access_token}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getEthereumAccounts(){let headers=await this.getHeaders();try{let response=await fetch(`${this.apiUrl}/connect/wallets`,{headers});if(!response.ok)throw Error(`Error fetching wallet accounts. Status: ${response.status} ${response.statusText}`);return(await response.json()).wallets}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async createTransaction(qredoTxDetails,txParams){let headers=await this.getHeaders(),payload={to:txParams.to,from:qredoTxDetails.from,value:txParams.value,data:txParams.data,gasLimit:txParams.gasLimit,chainID:qredoTxDetails.chainId,note:qredoTxDetails.note};"0"===txParams.type||"1"===txParams.type?payload.gasPrice=txParams.gasPrice:"2"===txParams.type&&(payload.maxPriorityFeePerGas=txParams.maxPriorityFeePerGas,payload.maxFeePerGas=txParams.maxFeePerGas);try{let response=await fetch(`${this.apiUrl}/connect/transaction`,{method:"POST",headers,body:JSON.stringify(payload)});if(!response.ok)throw Error(`Error creating transaction. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransaction(custodian_transactionId){let headers=await this.getHeaders();try{let response=await fetch(`${this.apiUrl}/connect/transaction/${custodian_transactionId}`,{headers});if(!response.ok)throw Error(`Error getting transaction with id ${custodian_transactionId}. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getTransactions(){throw await this.getHeaders(),Error("Not implemented yet")}async getSignedMessage(custodian_signedMessageId){let headers=await this.getHeaders();try{let response=await fetch(`${this.apiUrl}/connect/sign/${custodian_signedMessageId}`,{headers});if(!response.ok)throw Error(`Error getting signed message with id ${custodian_signedMessageId}. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async getCustomerProof(){var _a,_b;let headers=await this.getHeaders();try{let response=await fetch(`${this.apiUrl}/connect/customer-proof`,{method:"POST",headers});if(!response.ok)throw Error(`Error getting Custommer Proof. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw(null===(_a=e.response)||void 0===_a?void 0:_a.status)>=400&&(null===(_b=e.response)||void 0===_b?void 0:_b.status)<500&&(console.warn("Authentication error obtaining customer proof - deleting token"),this.cache.deleteCache("accessToken")),new CustodianApiError_1.CustodianApiError(e)}}async getNetworks(){let headers=await this.getHeaders();try{let response=await fetch(`${this.apiUrl}/connect/networks`,{headers});if(!response.ok)throw Error(`Error getting Networks. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signTypedData_v4(fromAddress,message){let headers=await this.getHeaders();try{let response=await fetch(`${this.apiUrl}/connect/sign`,{method:"POST",body:JSON.stringify({from:fromAddress,payload:message}),headers});if(!response.ok)throw Error(`Error doing signTypedData from address: ${fromAddress}. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}async signPersonalMessage(fromAddress,message){let headers=await this.getHeaders();try{let response=await fetch(`${this.apiUrl}/connect/sign`,{method:"POST",body:JSON.stringify({from:fromAddress,message}),headers});if(!response.ok)throw Error(`Error doing signPersonalMessage from address: ${fromAddress}. Status: ${response.status} ${response.statusText}`);return await response.json()}catch(e){throw new CustodianApiError_1.CustodianApiError(e)}}setRefreshToken(refreshToken){this.refreshToken=refreshToken}}exports.QredoClient=QredoClient},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/QredoCustodianApi.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QredoCustodianApi=void 0;let simplecache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/index.js"),events_1=__webpack_require__("./node_modules/events/events.js"),NetworkMappings_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/classes/NetworkMappings.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js"),map_status_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/util/map-status.js"),DefaultQredoCustodianDetails_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/DefaultQredoCustodianDetails.js"),qredo_network_mappings_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/qredo-network-mappings.js"),QredoClient_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/QredoClient.js");class QredoCustodianApi extends events_1.EventEmitter{constructor(authDetails,_authType,apiUrl=DefaultQredoCustodianDetails_1.DefaultQredoCustodianDetails.apiUrl,cacheAge){super(),this.cacheAge=cacheAge,this.cache=new simplecache_1.SimpleCache,this.integrationVersion=1,this.client=new QredoClient_1.QredoClient(apiUrl,authDetails.refreshToken),this.networkMappings=new NetworkMappings_1.NetworkMappings(qredo_network_mappings_1.qredoNetworkMappings),this.client.on(constants_1.REFRESH_TOKEN_CHANGE_EVENT,event=>{this.emit(constants_1.REFRESH_TOKEN_CHANGE_EVENT,event)})}getAccountHierarchy(){return null}async getEthereumAccounts(){return(await this.client.getEthereumAccounts()).map(account=>({name:account.labels.find(label=>"wallet-name"===label.key).value,address:account.address,balance:null,custodianDetails:{accountId:account.walletID},chainId:this.networkMappings.getMappingByCustodianName(account.network).chainId,labels:account.labels.filter(label=>"wallet-name"!==label.key).map(label=>({key:label.name,value:label.value}))}))}async getEthereumAccountsByAddress(address){return(await this.getEthereumAccounts()).filter(account=>account.address.toLowerCase().includes(address.toLowerCase()))}async getEthereumAccountsByLabelOrAddressName(name){return(await this.getEthereumAccounts()).filter(account=>account.name.includes(name))}async createTransaction(txParams,txMeta){let fromAddress=txParams.from,result=await this.client.createTransaction({from:fromAddress,chainId:txMeta.chainId,note:txMeta.note},txParams);return{transactionStatus:result.status,custodian_transactionId:result.txID,from:txParams.from,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:null,maxPriorityFeePerGas:null,nonce:result.nonce.toString(10),transactionHash:result.txHash}}async getTransaction(_from,custodian_transactionId){var _a;let result=await this.client.getTransaction(custodian_transactionId);return{transactionStatus:result.status,custodian_transactionId:result.txID,from:result.from||null,gasLimit:result.gasLimit,gasPrice:result.gasPrice,maxFeePerGas:null,maxPriorityFeePerGas:null,nonce:null===(_a=result.nonce)||void 0===_a?void 0:_a.toString(10),transactionHash:result.txHash}}async getCustomerId(){return"qredo-customer"}async getSignedMessage(_address,custodian_signedMessageId){var _a;let result=await this.client.getSignedMessage(custodian_signedMessageId),signature=null==result?void 0:result.signature;return result?((null===(_a=result.signature)||void 0===_a?void 0:_a.length)&&(signature="0x"+result.signature),{id:result.sigID,signature,status:(0,map_status_1.mapTransactionStatus)(result.status)}):null}async getAllTransactions(){return(await this.client.getTransactions()).map(result=>({transactionStatus:result.status,custodian_transactionId:result.txID,from:null}))}async getCustomerProof(){let{jwt}=await this.client.getCustomerProof();return jwt}async signPersonalMessage(address,message){let result=await this.client.signPersonalMessage(address,message);return{custodian_transactionId:result.sigID,transactionStatus:result.status,from:address}}async signTypedData_v4(address,message,_version){let result=await this.client.signTypedData_v4(address,message);return{custodian_transactionId:result.sigID,transactionStatus:result.status,from:address}}async getErc20Tokens(){return{}}async getSupportedChains(){return this.cache.tryCachingArray("getSupportedChains",this.cacheAge,async()=>{let{networks}=await this.client.getNetworks();return networks.map(network=>network.chainID)})}async getTransactionLink(_transactionId){return null}changeRefreshTokenAuthDetails(authDetails){throw Error("Not implemented yet")}}exports.QredoCustodianApi=QredoCustodianApi},"./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/qredo-network-mappings.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.qredoNetworkMappings=void 0,exports.qredoNetworkMappings=[{name:"Mainnet",custodianName:"eth-mainnet",custodianId:"eth-mainnet",chainId:"1"},{name:"Ropsten",custodianName:"eth-ropsten",custodianId:"eth-ropsten",chainId:"3"}]},"./node_modules/@metamask-institutional/sdk/dist/errors/CustodianApiError.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustodianApiError=void 0;class CustodianApiError extends Error{constructor(e,requestId){var _a,_b,_c,_d;let detail;let statusCode=null===(_a=e.response)||void 0===_a?void 0:_a.status,body=null===(_b=e.response)||void 0===_b?void 0:_b.data,requestMeta="";if(requestId&&(requestMeta+=`(Request ID: ${requestId})`),statusCode&&body){if("string"==typeof body)try{detail=(body=JSON.parse(body)).detail}catch(e){detail=body}else"object"==typeof body&&(body.detail||body.message)&&(detail="string"==typeof body.detail?body.detail:"string"==typeof(null===(_c=body.detail)||void 0===_c?void 0:_c.reason)?body.detail.reason:"string"==typeof body.message?body.message:JSON.stringify(body.detail));502===statusCode&&(detail=`Gateway timeout reaching ${null===(_d=e.config)||void 0===_d?void 0:_d.url}`),detail||(detail=e.message),super(`${statusCode}: ${detail} ${requestMeta}`),Object.setPrototypeOf(this,CustodianApiError.prototype),this.detail={code:statusCode,body:detail}}else super(e.message),this.detail={code:0,body:e.message}}}exports.CustodianApiError=CustodianApiError},"./node_modules/@metamask-institutional/sdk/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mmiSDKFactory=exports.mapTransactionStatus=exports.QredoCustodianApi=exports.JupiterCustodianApi=exports.ECA3CustodianApi=exports.JsonRpcCustodianApi=exports.CurvCustodianApi=exports.CactusCustodianApi=exports.BitgoCustodianApi=exports.DEFAULT_MAX_CACHE_AGE=exports.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT=exports.REFRESH_TOKEN_CHANGE_EVENT=exports.MMISDK=exports.AccountHierarchyNode=void 0;var AccountHierarchyNode_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/classes/AccountHierarchyNode.js");Object.defineProperty(exports,"AccountHierarchyNode",{enumerable:!0,get:function(){return AccountHierarchyNode_1.AccountHierarchyNode}});var MMISDK_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/classes/MMISDK.js");Object.defineProperty(exports,"MMISDK",{enumerable:!0,get:function(){return MMISDK_1.MMISDK}});var constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js");Object.defineProperty(exports,"REFRESH_TOKEN_CHANGE_EVENT",{enumerable:!0,get:function(){return constants_1.REFRESH_TOKEN_CHANGE_EVENT}}),Object.defineProperty(exports,"INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT",{enumerable:!0,get:function(){return constants_1.INTERACTIVE_REPLACEMENT_TOKEN_CHANGE_EVENT}}),Object.defineProperty(exports,"DEFAULT_MAX_CACHE_AGE",{enumerable:!0,get:function(){return constants_1.DEFAULT_MAX_CACHE_AGE}});var BitgoCustodianApi_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/bitgo/BitgoCustodianApi.js");Object.defineProperty(exports,"BitgoCustodianApi",{enumerable:!0,get:function(){return BitgoCustodianApi_1.BitgoCustodianApi}});var CactusCustodianApi_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/cactus/CactusCustodianApi.js");Object.defineProperty(exports,"CactusCustodianApi",{enumerable:!0,get:function(){return CactusCustodianApi_1.CactusCustodianApi}});var CurvCustodianApi_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/curv/CurvCustodianApi.js");Object.defineProperty(exports,"CurvCustodianApi",{enumerable:!0,get:function(){return CurvCustodianApi_1.CurvCustodianApi}});var JsonRpcCustodianApi_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/json-rpc/JsonRpcCustodianApi.js");Object.defineProperty(exports,"JsonRpcCustodianApi",{enumerable:!0,get:function(){return JsonRpcCustodianApi_1.JsonRpcCustodianApi}});var ECA3CustodianApi_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/eca3/ECA3CustodianApi.js");Object.defineProperty(exports,"ECA3CustodianApi",{enumerable:!0,get:function(){return ECA3CustodianApi_1.ECA3CustodianApi}});var JupiterCustodianApi_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/jupiter/JupiterCustodianApi.js");Object.defineProperty(exports,"JupiterCustodianApi",{enumerable:!0,get:function(){return JupiterCustodianApi_1.JupiterCustodianApi}});var QredoCustodianApi_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/custodianApi/qredo/QredoCustodianApi.js");Object.defineProperty(exports,"QredoCustodianApi",{enumerable:!0,get:function(){return QredoCustodianApi_1.QredoCustodianApi}});var map_status_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/util/map-status.js");Object.defineProperty(exports,"mapTransactionStatus",{enumerable:!0,get:function(){return map_status_1.mapTransactionStatus}});var mmi_sdk_factory_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/util/mmi-sdk-factory.js");Object.defineProperty(exports,"mmiSDKFactory",{enumerable:!0,get:function(){return mmi_sdk_factory_1.mmiSDKFactory}})},"./node_modules/@metamask-institutional/sdk/dist/util/get-token-issuer.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getTokenIssuer=void 0;let jsonwebtoken_1=__importDefault(__webpack_require__("./node_modules/jsonwebtoken/index.js"));function getTokenIssuer(token){let decoded=jsonwebtoken_1.default.decode(token.trim());if(!decoded.iss)throw Error("Missing `iss` claim in token");return decoded.iss}exports.getTokenIssuer=getTokenIssuer},"./node_modules/@metamask-institutional/sdk/dist/util/map-status.js":(__unused_webpack_module,exports)=>{"use strict";function mapTransactionStatus(status,reason){switch(status){case"created":return{finished:!1,submitted:!1,signed:!1,success:!1,displayText:"Created",reason};case"signed":return{finished:!1,submitted:!1,signed:!0,success:!1,displayText:"Signed",reason};case"submitted":return{finished:!1,submitted:!0,signed:!0,success:!1,displayText:"Submitted",reason};case"mined":return{finished:!0,submitted:!0,signed:!0,success:!0,displayText:"Mined",reason};case"completed":return{finished:!0,submitted:!0,signed:!0,success:!0,displayText:"Completed",reason};case"failed":return{finished:!0,submitted:!0,signed:!0,success:!1,displayText:"Failed",reason};case"rejected":return{finished:!0,submitted:!1,signed:!1,success:!1,displayText:"Rejected",reason};case"aborted":return{finished:!0,submitted:!1,signed:!1,success:!1,displayText:"Aborted",reason};case"confirmed":return{finished:!0,submitted:!0,signed:!0,success:!0,displayText:"Confirmed",reason};default:return{finished:!1,submitted:!1,signed:!1,success:!1,displayText:"Unknown",reason}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapTransactionStatus=void 0,exports.mapTransactionStatus=mapTransactionStatus},"./node_modules/@metamask-institutional/sdk/dist/util/mmi-sdk-factory.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mmiSDKFactory=void 0;let MMISDK_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/classes/MMISDK.js"),constants_1=__webpack_require__("./node_modules/@metamask-institutional/sdk/dist/constants/constants.js");exports.mmiSDKFactory=function(custodianApi,authDetails,authType,apiUrl){if(apiUrl.startsWith("http://")&&!apiUrl.startsWith("http://localhost")&&!apiUrl.startsWith("http://18.139.217.63"))throw Error("http:// URLs are not supported - only https://");return new MMISDK_1.MMISDK(custodianApi,authDetails,authType,apiUrl,constants_1.DEFAULT_MAX_CACHE_AGE)}},"./node_modules/@metamask-institutional/simplecache/dist/SimpleCache.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleCache=void 0,exports.SimpleCache=class{constructor(){this.cache={}}async tryCachingArray(key,maxCacheAgeSeconds,fn){if(maxCacheAgeSeconds>=0&&this.cacheExists(key)&&this.cacheValid(key,maxCacheAgeSeconds))return this.cache[key].results;let results=await fn();return this.cache[key]={results,timestamp:new Date().getTime()},results}setCache(key,value){this.cache[key]={results:value,timestamp:new Date().getTime()}}getCache(key){return this.cacheExists(key)?this.cache[key].results:null}cacheExists(key){return this.cache.hasOwnProperty(key)}cacheValid(key,maxCacheAgeSeconds){let cache=this.cache[key];return new Date().getTime()-cache.timestamp<1e3*maxCacheAgeSeconds}deleteCache(key){this.cacheExists(key)&&delete this.cache[key]}}},"./node_modules/@metamask-institutional/simplecache/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleCache=void 0;var SimpleCache_1=__webpack_require__("./node_modules/@metamask-institutional/simplecache/dist/SimpleCache.js");Object.defineProperty(exports,"SimpleCache",{enumerable:!0,get:function(){return SimpleCache_1.SimpleCache}})},"./node_modules/@metamask-institutional/types/dist/enum/AddressType.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AddressType=void 0,function(AddressType){AddressType[AddressType.MONOCHAIN=0]="MONOCHAIN",AddressType[AddressType.POLYCHAIN=1]="POLYCHAIN"}(exports.AddressType||(exports.AddressType={}))},"./node_modules/@metamask-institutional/types/dist/enum/AuthTypes.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AuthTypes=void 0,function(AuthTypes){AuthTypes[AuthTypes.TOKEN=0]="TOKEN",AuthTypes[AuthTypes.REFRESH_TOKEN=1]="REFRESH_TOKEN",AuthTypes[AuthTypes.AUTHORIZATION_CODE_FLOW=2]="AUTHORIZATION_CODE_FLOW"}(exports.AuthTypes||(exports.AuthTypes={}))},"./node_modules/@metamask-institutional/types/dist/enum/MetaMaskTransactionStatuses.js":(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MetaMaskTransactionStatuses=void 0,function(MetaMaskTransactionStatuses){MetaMaskTransactionStatuses.UNAPPROVED="unapproved",MetaMaskTransactionStatuses.APPROVED="approved",MetaMaskTransactionStatuses.REJECTED="rejected",MetaMaskTransactionStatuses.SIGNED="signed",MetaMaskTransactionStatuses.SUBMITTED="submitted",MetaMaskTransactionStatuses.FAILED="failed",MetaMaskTransactionStatuses.DROPPED="dropped",MetaMaskTransactionStatuses.CONFIRMED="confirmed",MetaMaskTransactionStatuses.ADDED="added",MetaMaskTransactionStatuses.FINALIZED="finalized"}(exports.MetaMaskTransactionStatuses||(exports.MetaMaskTransactionStatuses={}))},"./node_modules/@metamask-institutional/types/dist/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MetaMaskTransactionStatuses=exports.AddressType=exports.AuthTypes=void 0;var AuthTypes_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/enum/AuthTypes.js");Object.defineProperty(exports,"AuthTypes",{enumerable:!0,get:function(){return AuthTypes_1.AuthTypes}});var AddressType_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/enum/AddressType.js");Object.defineProperty(exports,"AddressType",{enumerable:!0,get:function(){return AddressType_1.AddressType}});var MetaMaskTransactionStatuses_1=__webpack_require__("./node_modules/@metamask-institutional/types/dist/enum/MetaMaskTransactionStatuses.js");Object.defineProperty(exports,"MetaMaskTransactionStatuses",{enumerable:!0,get:function(){return MetaMaskTransactionStatuses_1.MetaMaskTransactionStatuses}})},"./node_modules/@metamask/obs-store/dist/ComposedStore.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComposedStore=void 0;let ObservableStore_1=__webpack_require__("./node_modules/@metamask/obs-store/dist/ObservableStore.js");class ComposedStore extends ObservableStore_1.ObservableStore{constructor(children){super({}),this._children=children||{},Object.keys(this._children).forEach(childKey=>{let child=this._children[childKey];this._addChild(childKey,child)})}_addChild(childKey,child){let updateFromChild=childValue=>{let state=this.getState();state[childKey]=childValue,this.putState(state)};child.subscribe(updateFromChild),updateFromChild(child.getState())}}exports.ComposedStore=ComposedStore},"./node_modules/@metamask/obs-store/dist/MergedStore.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MergedStore=void 0;let ObservableStore_1=__webpack_require__("./node_modules/@metamask/obs-store/dist/ObservableStore.js");class MergedStore extends ObservableStore_1.ObservableStore{constructor(children=[]){super({}),this._children=children,children.forEach(child=>this._addChild(child)),this._updateWholeState()}_addChild(child){child.subscribe(()=>this._updateWholeState())}_updateWholeState(){let state=Object.assign({},...this._children.map(child=>child.getState()));this.putState(state)}}exports.MergedStore=MergedStore},"./node_modules/@metamask/obs-store/dist/ObservableStore.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ObservableStore=void 0;let safe_event_emitter_1=__importDefault(__webpack_require__("./node_modules/@metamask/safe-event-emitter/index.js"));class ObservableStore extends safe_event_emitter_1.default{constructor(initState){super(),void 0===initState?this._state={}:this._state=initState}getState(){return this._getState()}putState(newState){this._putState(newState),this.emit("update",newState)}updateState(partialState){if(partialState&&"object"==typeof partialState){let state=this.getState();this.putState(Object.assign(Object.assign({},state),partialState))}else this.putState(partialState)}subscribe(handler){this.on("update",handler)}unsubscribe(handler){this.removeListener("update",handler)}_getState(){return this._state}_putState(newState){this._state=newState}}exports.ObservableStore=ObservableStore},"./node_modules/@metamask/obs-store/dist/asStream.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.storeAsStream=void 0;let stream_1=__webpack_require__("./node_modules/stream-browserify/index.js");class ObservableStoreStream extends stream_1.Duplex{constructor(obsStore){super({objectMode:!0}),this.resume(),this.handler=state=>this.push(state),this.obsStore=obsStore,this.obsStore.subscribe(this.handler)}pipe(dest,options){let result=super.pipe(dest,options);return dest.write(this.obsStore.getState()),result}_write(chunk,_encoding,callback){this.obsStore.putState(chunk),callback()}_read(_size){}_destroy(err,callback){this.obsStore.unsubscribe(this.handler),super._destroy(err,callback)}}function storeAsStream(obsStore){return new ObservableStoreStream(obsStore)}exports.storeAsStream=storeAsStream},"./node_modules/@metamask/obs-store/dist/index.js":function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__("./node_modules/@metamask/obs-store/dist/asStream.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/obs-store/dist/ComposedStore.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/obs-store/dist/MergedStore.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/obs-store/dist/ObservableStore.js"),exports),__exportStar(__webpack_require__("./node_modules/@metamask/obs-store/dist/transform.js"),exports)},"./node_modules/@metamask/obs-store/dist/transform.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.storeTransformStream=void 0;let through2_1=__webpack_require__("./node_modules/@metamask/obs-store/node_modules/through2/through2.js");function storeTransformStream(syncTransformFn){return through2_1.obj((state,_encoding,cb)=>{try{let newState=syncTransformFn(state);cb(null,newState);return}catch(err){cb(err);return}})}exports.storeTransformStream=storeTransformStream},"./node_modules/@metamask/obs-store/node_modules/through2/through2.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js"),Transform=__webpack_require__("./node_modules/readable-stream/readable-browser.js").Transform,inherits=__webpack_require__("./node_modules/util/util.js").inherits,xtend=__webpack_require__("./node_modules/xtend/immutable.js");function DestroyableTransform(opts){Transform.call(this,opts),this._destroyed=!1}function noop(chunk,enc,callback){callback(null,chunk)}function through2(construct){return function(options,transform,flush){return"function"==typeof options&&(flush=transform,transform=options,options={}),"function"!=typeof transform&&(transform=noop),"function"!=typeof flush&&(flush=null),construct(options,transform,flush)}}inherits(DestroyableTransform,Transform),DestroyableTransform.prototype.destroy=function(err){if(!this._destroyed){this._destroyed=!0;var self1=this;process.nextTick(function(){err&&self1.emit("error",err),self1.emit("close")})}},module.exports=through2(function(options,transform,flush){var t2=new DestroyableTransform(options);return t2._transform=transform,flush&&(t2._flush=flush),t2}),module.exports.ctor=through2(function(options,transform,flush){function Through2(override){if(!(this instanceof Through2))return new Through2(override);this.options=xtend(options,override),DestroyableTransform.call(this,this.options)}return inherits(Through2,DestroyableTransform),Through2.prototype._transform=transform,flush&&(Through2.prototype._flush=flush),Through2}),module.exports.obj=through2(function(options,transform,flush){var t2=new DestroyableTransform(xtend({objectMode:!0,highWaterMark:16},options));return t2._transform=transform,flush&&(t2._flush=flush),t2})},"./node_modules/@metamask/safe-event-emitter/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});let events_1=__webpack_require__("./node_modules/events/events.js");function safeApply(handler,context,args){try{Reflect.apply(handler,context,args)}catch(err){setTimeout(()=>{throw err})}}function arrayClone(arr){let n=arr.length,copy=Array(n);for(let i=0;i<n;i+=1)copy[i]=arr[i];return copy}class SafeEventEmitter extends events_1.EventEmitter{emit(type,...args){let doError="error"===type,events=this._events;if(void 0!==events)doError=doError&&void 0===events.error;else if(!doError)return!1;if(doError){let er;if(args.length>0&&([er]=args),er instanceof Error)throw er;let err=Error(`Unhandled error.${er?` (${er.message})`:""}`);throw err.context=er,err}let handler=events[type];if(void 0===handler)return!1;if("function"==typeof handler)safeApply(handler,this,args);else{let len=handler.length,listeners=arrayClone(handler);for(let i=0;i<len;i+=1)safeApply(listeners[i],this,args)}return!0}}exports.default=SafeEventEmitter},"./node_modules/@metamask/snaps-rpc-methods/dist/esm/endowments/transaction-insight.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{pG:()=>getTransactionOriginCaveat});var _metamask_permission_controller__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@metamask/permission-controller/dist/index.js"),_metamask_rpc_errors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@metamask/rpc-errors/dist/index.mjs"),_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@metamask/snaps-utils/dist/esm/caveats.js"),_metamask_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@metamask/utils/dist/chunk-H4YFDLB7.mjs"),_metamask_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@metamask/utils/dist/chunk-74DGVJVE.mjs"),_caveats__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@metamask/snaps-rpc-methods/dist/esm/endowments/caveats/generic.js");let permissionName=__webpack_require__("./node_modules/@metamask/snaps-rpc-methods/dist/esm/endowments/enum.js").p.TransactionInsight;function validateCaveat(caveat){if(!(0,_metamask_utils__WEBPACK_IMPORTED_MODULE_5__.l$)(caveat,"value")||!(0,_metamask_utils__WEBPACK_IMPORTED_MODULE_5__.PO)(caveat))throw _metamask_rpc_errors__WEBPACK_IMPORTED_MODULE_1__.PY.invalidParams({message:"Expected a plain object."});let{value}=caveat;(0,_metamask_utils__WEBPACK_IMPORTED_MODULE_6__.hu)("boolean"==typeof value,'Expected caveat value to have type "boolean"')}function getTransactionOriginCaveat(permission){return permission?.caveats?((0,_metamask_utils__WEBPACK_IMPORTED_MODULE_6__.hu)(1===permission.caveats.length),(0,_metamask_utils__WEBPACK_IMPORTED_MODULE_6__.hu)(permission.caveats[0].type===_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__.j.TransactionOrigin),permission.caveats[0].value??null):null}Object.freeze({targetName:permissionName,specificationBuilder:_builderOptions=>({permissionType:_metamask_permission_controller__WEBPACK_IMPORTED_MODULE_0__.PermissionType.Endowment,targetName:permissionName,allowedCaveats:[_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__.j.TransactionOrigin,_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__.j.MaxRequestTime],endowmentGetter:_getterOptions=>void 0,validator:(0,_caveats__WEBPACK_IMPORTED_MODULE_4__.S)([{type:_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__.j.TransactionOrigin,optional:!0},{type:_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__.j.MaxRequestTime,optional:!0}]),subjectTypes:[_metamask_permission_controller__WEBPACK_IMPORTED_MODULE_0__.SubjectType.Snap]})}),_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__.j.TransactionOrigin,Object.freeze({type:_metamask_snaps_utils__WEBPACK_IMPORTED_MODULE_3__.j.TransactionOrigin,validator:caveat=>validateCaveat(caveat)})},"./node_modules/@metamask/snaps-sdk/dist/esm/types/handlers/transaction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var SeverityLevel;__webpack_require__.d(__webpack_exports__,{_:()=>SeverityLevel}),(SeverityLevel||(SeverityLevel={})).Critical="critical"},"./node_modules/buffer-equal-constant-time/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer,SlowBuffer=__webpack_require__("./node_modules/buffer/index.js").SlowBuffer;function bufferEq(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)||a.length!==b.length)return!1;for(var c=0,i=0;i<a.length;i++)c|=a[i]^b[i];return 0===c}module.exports=bufferEq,bufferEq.install=function(){Buffer.prototype.equal=SlowBuffer.prototype.equal=function equal(that){return bufferEq(this,that)}};var origBufEqual=Buffer.prototype.equal,origSlowBufEqual=SlowBuffer.prototype.equal;bufferEq.restore=function(){Buffer.prototype.equal=origBufEqual,SlowBuffer.prototype.equal=origSlowBufEqual}},"./node_modules/core-util-is/lib/util.js":(__unused_webpack_module,exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;function isArray(arg){return Array.isArray?Array.isArray(arg):"[object Array]"===objectToString(arg)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isSymbol(arg){return"symbol"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return"[object Date]"===objectToString(d)}function isError(e){return"[object Error]"===objectToString(e)||e instanceof Error}function isFunction(arg){return"function"==typeof arg}function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||void 0===arg}function objectToString(o){return Object.prototype.toString.call(o)}exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=Buffer.isBuffer},"./node_modules/ecdsa-sig-formatter/src/ecdsa-sig-formatter.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/safe-buffer/index.js").Buffer,getParamBytesForAlg=__webpack_require__("./node_modules/ecdsa-sig-formatter/src/param-bytes-for-alg.js");function base64Url(base64){return base64.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function signatureAsBuffer(signature){if(Buffer.isBuffer(signature))return signature;if("string"==typeof signature)return Buffer.from(signature,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function derToJose(signature,alg){signature=signatureAsBuffer(signature);var paramBytes=getParamBytesForAlg(alg),maxEncodedParamLength=paramBytes+1,inputLength=signature.length,offset=0;if(48!==signature[offset++])throw Error('Could not find expected "seq"');var seqLength=signature[offset++];if(129===seqLength&&(seqLength=signature[offset++]),inputLength-offset<seqLength)throw Error('"seq" specified length of "'+seqLength+'", only "'+(inputLength-offset)+'" remaining');if(2!==signature[offset++])throw Error('Could not find expected "int" for "r"');var rLength=signature[offset++];if(inputLength-offset-2<rLength)throw Error('"r" specified length of "'+rLength+'", only "'+(inputLength-offset-2)+'" available');if(maxEncodedParamLength<rLength)throw Error('"r" specified length of "'+rLength+'", max of "'+maxEncodedParamLength+'" is acceptable');var rOffset=offset;if(offset+=rLength,2!==signature[offset++])throw Error('Could not find expected "int" for "s"');var sLength=signature[offset++];if(inputLength-offset!==sLength)throw Error('"s" specified length of "'+sLength+'", expected "'+(inputLength-offset)+'"');if(maxEncodedParamLength<sLength)throw Error('"s" specified length of "'+sLength+'", max of "'+maxEncodedParamLength+'" is acceptable');var sOffset=offset;if((offset+=sLength)!==inputLength)throw Error('Expected to consume entire buffer, but "'+(inputLength-offset)+'" bytes remain');var rPadding=paramBytes-rLength,sPadding=paramBytes-sLength,dst=Buffer.allocUnsafe(rPadding+rLength+sPadding+sLength);for(offset=0;offset<rPadding;++offset)dst[offset]=0;signature.copy(dst,offset,rOffset+Math.max(-rPadding,0),rOffset+rLength),offset=paramBytes;for(var o=offset;offset<o+sPadding;++offset)dst[offset]=0;return signature.copy(dst,offset,sOffset+Math.max(-sPadding,0),sOffset+sLength),dst=base64Url(dst=dst.toString("base64"))}function countPadding(buf,start,stop){for(var padding=0;start+padding<stop&&0===buf[start+padding];)++padding;return buf[start+padding]>=128&&--padding,padding}function joseToDer(signature,alg){signature=signatureAsBuffer(signature);var paramBytes=getParamBytesForAlg(alg),signatureBytes=signature.length;if(signatureBytes!==2*paramBytes)throw TypeError('"'+alg+'" signatures must be "'+2*paramBytes+'" bytes, saw "'+signatureBytes+'"');var rPadding=countPadding(signature,0,paramBytes),sPadding=countPadding(signature,paramBytes,signature.length),rLength=paramBytes-rPadding,sLength=paramBytes-sPadding,rsBytes=2+rLength+1+1+sLength,shortLength=rsBytes<128,dst=Buffer.allocUnsafe((shortLength?2:3)+rsBytes),offset=0;return dst[offset++]=48,shortLength?dst[offset++]=rsBytes:(dst[offset++]=129,dst[offset++]=255&rsBytes),dst[offset++]=2,dst[offset++]=rLength,rPadding<0?(dst[offset++]=0,offset+=signature.copy(dst,offset,0,paramBytes)):offset+=signature.copy(dst,offset,rPadding,paramBytes),dst[offset++]=2,dst[offset++]=sLength,sPadding<0?(dst[offset++]=0,signature.copy(dst,offset,paramBytes)):signature.copy(dst,offset,paramBytes+sPadding),dst}module.exports={derToJose:derToJose,joseToDer:joseToDer}},"./node_modules/ecdsa-sig-formatter/src/param-bytes-for-alg.js":module=>{"use strict";function getParamSize(keySize){return(keySize/8|0)+(keySize%8==0?0:1)}var paramBytesForAlg={ES256:getParamSize(256),ES384:getParamSize(384),ES512:getParamSize(521)};function getParamBytesForAlg(alg){var paramBytes=paramBytesForAlg[alg];if(paramBytes)return paramBytes;throw Error('Unknown algorithm "'+alg+'"')}module.exports=getParamBytesForAlg},"./node_modules/jsonwebtoken/decode.js":(module,__unused_webpack_exports,__webpack_require__)=>{var jws=__webpack_require__("./node_modules/jws/index.js");module.exports=function(jwt,options){options=options||{};var decoded=jws.decode(jwt,options);if(!decoded)return null;var payload=decoded.payload;if("string"==typeof payload)try{var obj=JSON.parse(payload);null!==obj&&"object"==typeof obj&&(payload=obj)}catch(e){}return!0===options.complete?{header:decoded.header,payload:payload,signature:decoded.signature}:payload}},"./node_modules/jsonwebtoken/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports={verify:__webpack_require__("./node_modules/jsonwebtoken/verify.js"),sign:__webpack_require__("./node_modules/jsonwebtoken/sign.js"),JsonWebTokenError:__webpack_require__("./node_modules/jsonwebtoken/lib/JsonWebTokenError.js"),NotBeforeError:__webpack_require__("./node_modules/jsonwebtoken/lib/NotBeforeError.js"),TokenExpiredError:__webpack_require__("./node_modules/jsonwebtoken/lib/TokenExpiredError.js")},Object.defineProperty(module.exports,"decode",{enumerable:!1,value:__webpack_require__("./node_modules/jsonwebtoken/decode.js")})},"./node_modules/jsonwebtoken/lib/JsonWebTokenError.js":module=>{var JsonWebTokenError=function(message,error){Error.call(this,message),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=message,error&&(this.inner=error)};JsonWebTokenError.prototype=Object.create(Error.prototype),JsonWebTokenError.prototype.constructor=JsonWebTokenError,module.exports=JsonWebTokenError},"./node_modules/jsonwebtoken/lib/NotBeforeError.js":(module,__unused_webpack_exports,__webpack_require__)=>{var JsonWebTokenError=__webpack_require__("./node_modules/jsonwebtoken/lib/JsonWebTokenError.js"),NotBeforeError=function(message,date){JsonWebTokenError.call(this,message),this.name="NotBeforeError",this.date=date};NotBeforeError.prototype=Object.create(JsonWebTokenError.prototype),NotBeforeError.prototype.constructor=NotBeforeError,module.exports=NotBeforeError},"./node_modules/jsonwebtoken/lib/TokenExpiredError.js":(module,__unused_webpack_exports,__webpack_require__)=>{var JsonWebTokenError=__webpack_require__("./node_modules/jsonwebtoken/lib/JsonWebTokenError.js"),TokenExpiredError=function(message,expiredAt){JsonWebTokenError.call(this,message),this.name="TokenExpiredError",this.expiredAt=expiredAt};TokenExpiredError.prototype=Object.create(JsonWebTokenError.prototype),TokenExpiredError.prototype.constructor=TokenExpiredError,module.exports=TokenExpiredError},"./node_modules/jsonwebtoken/lib/asymmetricKeyDetailsSupported.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js");let semver=__webpack_require__("./node_modules/semver/index.js");module.exports=semver.satisfies(process.version,">=15.7.0")},"./node_modules/jsonwebtoken/lib/psSupported.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js"),semver=__webpack_require__("./node_modules/semver/index.js");module.exports=semver.satisfies(process.version,"^6.12.0 || >=8.0.0")},"./node_modules/jsonwebtoken/lib/rsaPssKeyDetailsSupported.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js");let semver=__webpack_require__("./node_modules/semver/index.js");module.exports=semver.satisfies(process.version,">=16.9.0")},"./node_modules/jsonwebtoken/lib/timespan.js":(module,__unused_webpack_exports,__webpack_require__)=>{var ms=__webpack_require__("./node_modules/ms/index.js");module.exports=function(time,iat){var timestamp=iat||Math.floor(Date.now()/1e3);if("string"==typeof time){var milliseconds=ms(time);if(void 0===milliseconds)return;return Math.floor(timestamp+milliseconds/1e3)}if("number"==typeof time)return timestamp+time}},"./node_modules/jsonwebtoken/lib/validateAsymmetricKey.js":(module,__unused_webpack_exports,__webpack_require__)=>{let ASYMMETRIC_KEY_DETAILS_SUPPORTED=__webpack_require__("./node_modules/jsonwebtoken/lib/asymmetricKeyDetailsSupported.js"),RSA_PSS_KEY_DETAILS_SUPPORTED=__webpack_require__("./node_modules/jsonwebtoken/lib/rsaPssKeyDetailsSupported.js"),allowedAlgorithmsForKeys={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},allowedCurves={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};module.exports=function(algorithm,key){if(!algorithm||!key)return;let keyType=key.asymmetricKeyType;if(!keyType)return;let allowedAlgorithms=allowedAlgorithmsForKeys[keyType];if(!allowedAlgorithms)throw Error(`Unknown key type "${keyType}".`);if(!allowedAlgorithms.includes(algorithm))throw Error(`"alg" parameter for "${keyType}" key type must be one of: ${allowedAlgorithms.join(", ")}.`);if(ASYMMETRIC_KEY_DETAILS_SUPPORTED)switch(keyType){case"ec":let keyCurve=key.asymmetricKeyDetails.namedCurve,allowedCurve=allowedCurves[algorithm];if(keyCurve!==allowedCurve)throw Error(`"alg" parameter "${algorithm}" requires curve "${allowedCurve}".`);break;case"rsa-pss":if(RSA_PSS_KEY_DETAILS_SUPPORTED){let length=parseInt(algorithm.slice(-3),10),{hashAlgorithm,mgf1HashAlgorithm,saltLength}=key.asymmetricKeyDetails;if(hashAlgorithm!==`sha${length}`||mgf1HashAlgorithm!==hashAlgorithm)throw Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${algorithm}.`);if(void 0!==saltLength&&saltLength>length>>3)throw Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${algorithm}.`)}}}},"./node_modules/jsonwebtoken/sign.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;let timespan=__webpack_require__("./node_modules/jsonwebtoken/lib/timespan.js"),PS_SUPPORTED=__webpack_require__("./node_modules/jsonwebtoken/lib/psSupported.js"),validateAsymmetricKey=__webpack_require__("./node_modules/jsonwebtoken/lib/validateAsymmetricKey.js"),jws=__webpack_require__("./node_modules/jws/index.js"),{includes,isBoolean,isInteger,isNumber,isPlainObject,isString,once}=__webpack_require__("./node_modules/lodash/lodash.js"),{KeyObject,createSecretKey,createPrivateKey}=__webpack_require__("?e2bf"),SUPPORTED_ALGS=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];PS_SUPPORTED&&SUPPORTED_ALGS.splice(3,0,"PS256","PS384","PS512");let sign_options_schema={expiresIn:{isValid:function(value){return isInteger(value)||isString(value)&&value},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(value){return isInteger(value)||isString(value)&&value},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(value){return isString(value)||Array.isArray(value)},message:'"audience" must be a string or array'},algorithm:{isValid:includes.bind(null,SUPPORTED_ALGS),message:'"algorithm" must be a valid string enum value'},header:{isValid:isPlainObject,message:'"header" must be an object'},encoding:{isValid:isString,message:'"encoding" must be a string'},issuer:{isValid:isString,message:'"issuer" must be a string'},subject:{isValid:isString,message:'"subject" must be a string'},jwtid:{isValid:isString,message:'"jwtid" must be a string'},noTimestamp:{isValid:isBoolean,message:'"noTimestamp" must be a boolean'},keyid:{isValid:isString,message:'"keyid" must be a string'},mutatePayload:{isValid:isBoolean,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:isBoolean,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:isBoolean,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},registered_claims_schema={iat:{isValid:isNumber,message:'"iat" should be a number of seconds'},exp:{isValid:isNumber,message:'"exp" should be a number of seconds'},nbf:{isValid:isNumber,message:'"nbf" should be a number of seconds'}};function validate(schema,allowUnknown,object,parameterName){if(!isPlainObject(object))throw Error('Expected "'+parameterName+'" to be a plain object.');Object.keys(object).forEach(function(key){let validator=schema[key];if(!validator){if(!allowUnknown)throw Error('"'+key+'" is not allowed in "'+parameterName+'"');return}if(!validator.isValid(object[key]))throw Error(validator.message)})}function validateOptions(options){return validate(sign_options_schema,!1,options,"options")}function validatePayload(payload){return validate(registered_claims_schema,!0,payload,"payload")}let options_to_payload={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},options_for_objects=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];module.exports=function(payload,secretOrPrivateKey,options,callback){"function"==typeof options?(callback=options,options={}):options=options||{};let isObjectPayload="object"==typeof payload&&!Buffer.isBuffer(payload),header=Object.assign({alg:options.algorithm||"HS256",typ:isObjectPayload?"JWT":void 0,kid:options.keyid},options.header);function failure(err){if(callback)return callback(err);throw err}if(!secretOrPrivateKey&&"none"!==options.algorithm)return failure(Error("secretOrPrivateKey must have a value"));if(null!=secretOrPrivateKey&&!(secretOrPrivateKey instanceof KeyObject))try{secretOrPrivateKey=createPrivateKey(secretOrPrivateKey)}catch(_){try{secretOrPrivateKey=createSecretKey("string"==typeof secretOrPrivateKey?Buffer.from(secretOrPrivateKey):secretOrPrivateKey)}catch(_){return failure(Error("secretOrPrivateKey is not valid key material"))}}if(header.alg.startsWith("HS")&&"secret"!==secretOrPrivateKey.type)return failure(Error(`secretOrPrivateKey must be a symmetric key when using ${header.alg}`));if(/^(?:RS|PS|ES)/.test(header.alg)){if("private"!==secretOrPrivateKey.type)return failure(Error(`secretOrPrivateKey must be an asymmetric key when using ${header.alg}`));if(!options.allowInsecureKeySizes&&!header.alg.startsWith("ES")&&void 0!==secretOrPrivateKey.asymmetricKeyDetails&&secretOrPrivateKey.asymmetricKeyDetails.modulusLength<2048)return failure(Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`))}if(void 0===payload)return failure(Error("payload is required"));if(isObjectPayload){try{validatePayload(payload)}catch(error){return failure(error)}options.mutatePayload||(payload=Object.assign({},payload))}else{let invalid_options=options_for_objects.filter(function(opt){return void 0!==options[opt]});if(invalid_options.length>0)return failure(Error("invalid "+invalid_options.join(",")+" option for "+typeof payload+" payload"))}if(void 0!==payload.exp&&void 0!==options.expiresIn)return failure(Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==payload.nbf&&void 0!==options.notBefore)return failure(Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{validateOptions(options)}catch(error){return failure(error)}if(!options.allowInvalidAsymmetricKeyTypes)try{validateAsymmetricKey(header.alg,secretOrPrivateKey)}catch(error){return failure(error)}let timestamp=payload.iat||Math.floor(Date.now()/1e3);if(options.noTimestamp?delete payload.iat:isObjectPayload&&(payload.iat=timestamp),void 0!==options.notBefore){try{payload.nbf=timespan(options.notBefore,timestamp)}catch(err){return failure(err)}if(void 0===payload.nbf)return failure(Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==options.expiresIn&&"object"==typeof payload){try{payload.exp=timespan(options.expiresIn,timestamp)}catch(err){return failure(err)}if(void 0===payload.exp)return failure(Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(options_to_payload).forEach(function(key){let claim=options_to_payload[key];if(void 0!==options[key]){if(void 0!==payload[claim])return failure(Error('Bad "options.'+key+'" option. The payload already has an "'+claim+'" property.'));payload[claim]=options[key]}});let encoding=options.encoding||"utf8";if("function"==typeof callback)callback=callback&&once(callback),jws.createSign({header:header,privateKey:secretOrPrivateKey,payload:payload,encoding:encoding}).once("error",callback).once("done",function(signature){if(!options.allowInsecureKeySizes&&/^(?:RS|PS)/.test(header.alg)&&signature.length<256)return callback(Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`));callback(null,signature)});else{let signature=jws.sign({header:header,payload:payload,secret:secretOrPrivateKey,encoding:encoding});if(!options.allowInsecureKeySizes&&/^(?:RS|PS)/.test(header.alg)&&signature.length<256)throw Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${header.alg}`);return signature}}},"./node_modules/jsonwebtoken/verify.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;let JsonWebTokenError=__webpack_require__("./node_modules/jsonwebtoken/lib/JsonWebTokenError.js"),NotBeforeError=__webpack_require__("./node_modules/jsonwebtoken/lib/NotBeforeError.js"),TokenExpiredError=__webpack_require__("./node_modules/jsonwebtoken/lib/TokenExpiredError.js"),decode=__webpack_require__("./node_modules/jsonwebtoken/decode.js"),timespan=__webpack_require__("./node_modules/jsonwebtoken/lib/timespan.js"),validateAsymmetricKey=__webpack_require__("./node_modules/jsonwebtoken/lib/validateAsymmetricKey.js"),PS_SUPPORTED=__webpack_require__("./node_modules/jsonwebtoken/lib/psSupported.js"),jws=__webpack_require__("./node_modules/jws/index.js"),{KeyObject,createSecretKey,createPublicKey}=__webpack_require__("?e2bf"),PUB_KEY_ALGS=["RS256","RS384","RS512"],EC_KEY_ALGS=["ES256","ES384","ES512"],RSA_KEY_ALGS=["RS256","RS384","RS512"],HS_ALGS=["HS256","HS384","HS512"];PS_SUPPORTED&&(PUB_KEY_ALGS.splice(PUB_KEY_ALGS.length,0,"PS256","PS384","PS512"),RSA_KEY_ALGS.splice(RSA_KEY_ALGS.length,0,"PS256","PS384","PS512")),module.exports=function(jwtString,secretOrPublicKey,options,callback){let done,decodedToken,getSecret;if("function"!=typeof options||callback||(callback=options,options={}),options||(options={}),options=Object.assign({},options),done=callback||function(err,data){if(err)throw err;return data},options.clockTimestamp&&"number"!=typeof options.clockTimestamp)return done(new JsonWebTokenError("clockTimestamp must be a number"));if(void 0!==options.nonce&&("string"!=typeof options.nonce||""===options.nonce.trim()))return done(new JsonWebTokenError("nonce must be a non-empty string"));if(void 0!==options.allowInvalidAsymmetricKeyTypes&&"boolean"!=typeof options.allowInvalidAsymmetricKeyTypes)return done(new JsonWebTokenError("allowInvalidAsymmetricKeyTypes must be a boolean"));let clockTimestamp=options.clockTimestamp||Math.floor(Date.now()/1e3);if(!jwtString)return done(new JsonWebTokenError("jwt must be provided"));if("string"!=typeof jwtString)return done(new JsonWebTokenError("jwt must be a string"));let parts=jwtString.split(".");if(3!==parts.length)return done(new JsonWebTokenError("jwt malformed"));try{decodedToken=decode(jwtString,{complete:!0})}catch(err){return done(err)}if(!decodedToken)return done(new JsonWebTokenError("invalid token"));let header=decodedToken.header;if("function"==typeof secretOrPublicKey){if(!callback)return done(new JsonWebTokenError("verify must be called asynchronous if secret or public key is provided as a callback"));getSecret=secretOrPublicKey}else getSecret=function(header,secretCallback){return secretCallback(null,secretOrPublicKey)};return getSecret(header,function(err,secretOrPublicKey){let valid;if(err)return done(new JsonWebTokenError("error in secret or public key callback: "+err.message));let hasSignature=""!==parts[2].trim();if(!hasSignature&&secretOrPublicKey)return done(new JsonWebTokenError("jwt signature is required"));if(hasSignature&&!secretOrPublicKey)return done(new JsonWebTokenError("secret or public key must be provided"));if(!hasSignature&&!options.algorithms)return done(new JsonWebTokenError('please specify "none" in "algorithms" to verify unsigned tokens'));if(null!=secretOrPublicKey&&!(secretOrPublicKey instanceof KeyObject))try{secretOrPublicKey=createPublicKey(secretOrPublicKey)}catch(_){try{secretOrPublicKey=createSecretKey("string"==typeof secretOrPublicKey?Buffer.from(secretOrPublicKey):secretOrPublicKey)}catch(_){return done(new JsonWebTokenError("secretOrPublicKey is not valid key material"))}}if(options.algorithms||("secret"===secretOrPublicKey.type?options.algorithms=HS_ALGS:["rsa","rsa-pss"].includes(secretOrPublicKey.asymmetricKeyType)?options.algorithms=RSA_KEY_ALGS:"ec"===secretOrPublicKey.asymmetricKeyType?options.algorithms=EC_KEY_ALGS:options.algorithms=PUB_KEY_ALGS),-1===options.algorithms.indexOf(decodedToken.header.alg))return done(new JsonWebTokenError("invalid algorithm"));if(header.alg.startsWith("HS")&&"secret"!==secretOrPublicKey.type)return done(new JsonWebTokenError(`secretOrPublicKey must be a symmetric key when using ${header.alg}`));if(/^(?:RS|PS|ES)/.test(header.alg)&&"public"!==secretOrPublicKey.type)return done(new JsonWebTokenError(`secretOrPublicKey must be an asymmetric key when using ${header.alg}`));if(!options.allowInvalidAsymmetricKeyTypes)try{validateAsymmetricKey(header.alg,secretOrPublicKey)}catch(e){return done(e)}try{valid=jws.verify(jwtString,decodedToken.header.alg,secretOrPublicKey)}catch(e){return done(e)}if(!valid)return done(new JsonWebTokenError("invalid signature"));let payload=decodedToken.payload;if(void 0!==payload.nbf&&!options.ignoreNotBefore){if("number"!=typeof payload.nbf)return done(new JsonWebTokenError("invalid nbf value"));if(payload.nbf>clockTimestamp+(options.clockTolerance||0))return done(new NotBeforeError("jwt not active",new Date(1e3*payload.nbf)))}if(void 0!==payload.exp&&!options.ignoreExpiration){if("number"!=typeof payload.exp)return done(new JsonWebTokenError("invalid exp value"));if(clockTimestamp>=payload.exp+(options.clockTolerance||0))return done(new TokenExpiredError("jwt expired",new Date(1e3*payload.exp)))}if(options.audience){let audiences=Array.isArray(options.audience)?options.audience:[options.audience];if(!(Array.isArray(payload.aud)?payload.aud:[payload.aud]).some(function(targetAudience){return audiences.some(function(audience){return audience instanceof RegExp?audience.test(targetAudience):audience===targetAudience})}))return done(new JsonWebTokenError("jwt audience invalid. expected: "+audiences.join(" or ")))}if(options.issuer&&("string"==typeof options.issuer&&payload.iss!==options.issuer||Array.isArray(options.issuer)&&-1===options.issuer.indexOf(payload.iss)))return done(new JsonWebTokenError("jwt issuer invalid. expected: "+options.issuer));if(options.subject&&payload.sub!==options.subject)return done(new JsonWebTokenError("jwt subject invalid. expected: "+options.subject));if(options.jwtid&&payload.jti!==options.jwtid)return done(new JsonWebTokenError("jwt jwtid invalid. expected: "+options.jwtid));if(options.nonce&&payload.nonce!==options.nonce)return done(new JsonWebTokenError("jwt nonce invalid. expected: "+options.nonce));if(options.maxAge){if("number"!=typeof payload.iat)return done(new JsonWebTokenError("iat required when maxAge is specified"));let maxAgeTimestamp=timespan(options.maxAge,payload.iat);if(void 0===maxAgeTimestamp)return done(new JsonWebTokenError('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(clockTimestamp>=maxAgeTimestamp+(options.clockTolerance||0))return done(new TokenExpiredError("maxAge exceeded",new Date(1e3*maxAgeTimestamp)))}return!0===options.complete?done(null,{header:header,payload:payload,signature:decodedToken.signature}):done(null,payload)})}},"./node_modules/jwa/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var bufferEqual=__webpack_require__("./node_modules/buffer-equal-constant-time/index.js"),Buffer=__webpack_require__("./node_modules/safe-buffer/index.js").Buffer,crypto=__webpack_require__("?5316"),formatEcdsa=__webpack_require__("./node_modules/ecdsa-sig-formatter/src/ecdsa-sig-formatter.js"),util=__webpack_require__("./node_modules/util/util.js"),MSG_INVALID_SECRET="secret must be a string or buffer",MSG_INVALID_VERIFIER_KEY="key must be a string or a buffer",supportsKeyObjects="function"==typeof crypto.createPublicKey;function checkIsPublicKey(key){if(!Buffer.isBuffer(key)&&"string"!=typeof key&&(!supportsKeyObjects||"object"!=typeof key||"string"!=typeof key.type||"string"!=typeof key.asymmetricKeyType||"function"!=typeof key.export))throw typeError(MSG_INVALID_VERIFIER_KEY)}function checkIsPrivateKey(key){if(!Buffer.isBuffer(key)&&"string"!=typeof key&&"object"!=typeof key)throw typeError("key must be a string, a buffer or an object")}function checkIsSecretKey(key){if(!Buffer.isBuffer(key)){if("string"==typeof key)return key;if(!supportsKeyObjects||"object"!=typeof key||"secret"!==key.type||"function"!=typeof key.export)throw typeError(MSG_INVALID_SECRET)}}function fromBase64(base64){return base64.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function toBase64(base64url){var padding=4-(base64url=base64url.toString()).length%4;if(4!==padding)for(var i=0;i<padding;++i)base64url+="=";return base64url.replace(/\-/g,"+").replace(/_/g,"/")}function typeError(template){var args=[].slice.call(arguments,1);return TypeError(util.format.bind(util,template).apply(null,args))}function bufferOrString(obj){return Buffer.isBuffer(obj)||"string"==typeof obj}function normalizeInput(thing){return bufferOrString(thing)||(thing=JSON.stringify(thing)),thing}function createHmacSigner(bits){return function sign(thing,secret){checkIsSecretKey(secret),thing=normalizeInput(thing);var hmac=crypto.createHmac("sha"+bits,secret);return fromBase64((hmac.update(thing),hmac.digest("base64")))}}function createHmacVerifier(bits){return function verify(thing,signature,secret){var computedSig=createHmacSigner(bits)(thing,secret);return bufferEqual(Buffer.from(signature),Buffer.from(computedSig))}}function createKeySigner(bits){return function sign(thing,privateKey){checkIsPrivateKey(privateKey),thing=normalizeInput(thing);var signer=crypto.createSign("RSA-SHA"+bits);return fromBase64((signer.update(thing),signer.sign(privateKey,"base64")))}}function createKeyVerifier(bits){return function verify(thing,signature,publicKey){checkIsPublicKey(publicKey),thing=normalizeInput(thing),signature=toBase64(signature);var verifier=crypto.createVerify("RSA-SHA"+bits);return verifier.update(thing),verifier.verify(publicKey,signature,"base64")}}function createPSSKeySigner(bits){return function sign(thing,privateKey){checkIsPrivateKey(privateKey),thing=normalizeInput(thing);var signer=crypto.createSign("RSA-SHA"+bits);return fromBase64((signer.update(thing),signer.sign({key:privateKey,padding:crypto.constants.RSA_PKCS1_PSS_PADDING,saltLength:crypto.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function createPSSKeyVerifier(bits){return function verify(thing,signature,publicKey){checkIsPublicKey(publicKey),thing=normalizeInput(thing),signature=toBase64(signature);var verifier=crypto.createVerify("RSA-SHA"+bits);return verifier.update(thing),verifier.verify({key:publicKey,padding:crypto.constants.RSA_PKCS1_PSS_PADDING,saltLength:crypto.constants.RSA_PSS_SALTLEN_DIGEST},signature,"base64")}}function createECDSASigner(bits){var inner=createKeySigner(bits);return function sign(){var signature=inner.apply(null,arguments);return formatEcdsa.derToJose(signature,"ES"+bits)}}function createECDSAVerifer(bits){var inner=createKeyVerifier(bits);return function verify(thing,signature,publicKey){return inner(thing,signature=formatEcdsa.joseToDer(signature,"ES"+bits).toString("base64"),publicKey)}}function createNoneSigner(){return function sign(){return""}}function createNoneVerifier(){return function verify(thing,signature){return""===signature}}supportsKeyObjects&&(MSG_INVALID_VERIFIER_KEY+=" or a KeyObject",MSG_INVALID_SECRET+="or a KeyObject"),module.exports=function jwa(algorithm){var match=algorithm.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!match)throw typeError('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',algorithm);var algo=(match[1]||match[3]).toLowerCase(),bits=match[2];return{sign:({hs:createHmacSigner,rs:createKeySigner,ps:createPSSKeySigner,es:createECDSASigner,none:createNoneSigner})[algo](bits),verify:({hs:createHmacVerifier,rs:createKeyVerifier,ps:createPSSKeyVerifier,es:createECDSAVerifer,none:createNoneVerifier})[algo](bits)}}},"./node_modules/jws/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{var SignStream=__webpack_require__("./node_modules/jws/lib/sign-stream.js"),VerifyStream=__webpack_require__("./node_modules/jws/lib/verify-stream.js");exports.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],exports.sign=SignStream.sign,exports.verify=VerifyStream.verify,exports.decode=VerifyStream.decode,exports.isValid=VerifyStream.isValid,exports.createSign=function createSign(opts){return new SignStream(opts)},exports.createVerify=function createVerify(opts){return new VerifyStream(opts)}},"./node_modules/jws/lib/data-stream.js":(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__("./node_modules/process/browser.js"),Buffer=__webpack_require__("./node_modules/safe-buffer/index.js").Buffer,Stream=__webpack_require__("./node_modules/stream-browserify/index.js");function DataStream(data){if(this.buffer=null,this.writable=!0,this.readable=!0,!data)return this.buffer=Buffer.alloc(0),this;if("function"==typeof data.pipe)return this.buffer=Buffer.alloc(0),data.pipe(this),this;if(data.length||"object"==typeof data)return this.buffer=data,this.writable=!1,process.nextTick((function(){this.emit("end",data),this.readable=!1,this.emit("close")}).bind(this)),this;throw TypeError("Unexpected data type ("+typeof data+")")}__webpack_require__("./node_modules/util/util.js").inherits(DataStream,Stream),DataStream.prototype.write=function write(data){this.buffer=Buffer.concat([this.buffer,Buffer.from(data)]),this.emit("data",data)},DataStream.prototype.end=function end(data){data&&this.write(data),this.emit("end",data),this.emit("close"),this.writable=!1,this.readable=!1},module.exports=DataStream},"./node_modules/jws/lib/sign-stream.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/safe-buffer/index.js").Buffer,DataStream=__webpack_require__("./node_modules/jws/lib/data-stream.js"),jwa=__webpack_require__("./node_modules/jwa/index.js"),Stream=__webpack_require__("./node_modules/stream-browserify/index.js"),toString=__webpack_require__("./node_modules/jws/lib/tostring.js"),util=__webpack_require__("./node_modules/util/util.js");function base64url(string,encoding){return Buffer.from(string,encoding).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jwsSecuredInput(header,payload,encoding){encoding=encoding||"utf8";var encodedHeader=base64url(toString(header),"binary"),encodedPayload=base64url(toString(payload),encoding);return util.format("%s.%s",encodedHeader,encodedPayload)}function jwsSign(opts){var header=opts.header,payload=opts.payload,secretOrKey=opts.secret||opts.privateKey,encoding=opts.encoding,algo=jwa(header.alg),securedInput=jwsSecuredInput(header,payload,encoding),signature=algo.sign(securedInput,secretOrKey);return util.format("%s.%s",securedInput,signature)}function SignStream(opts){var secretStream=new DataStream(opts.secret||opts.privateKey||opts.key);this.readable=!0,this.header=opts.header,this.encoding=opts.encoding,this.secret=this.privateKey=this.key=secretStream,this.payload=new DataStream(opts.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}util.inherits(SignStream,Stream),SignStream.prototype.sign=function sign(){try{var signature=jwsSign({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",signature),this.emit("data",signature),this.emit("end"),this.readable=!1,signature}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},SignStream.sign=jwsSign,module.exports=SignStream},"./node_modules/jws/lib/tostring.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;module.exports=function toString(obj){return"string"==typeof obj?obj:"number"==typeof obj||Buffer.isBuffer(obj)?obj.toString():JSON.stringify(obj)}},"./node_modules/jws/lib/verify-stream.js":(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__("./node_modules/safe-buffer/index.js").Buffer,DataStream=__webpack_require__("./node_modules/jws/lib/data-stream.js"),jwa=__webpack_require__("./node_modules/jwa/index.js"),Stream=__webpack_require__("./node_modules/stream-browserify/index.js"),toString=__webpack_require__("./node_modules/jws/lib/tostring.js"),util=__webpack_require__("./node_modules/util/util.js"),JWS_REGEX=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function isObject(thing){return"[object Object]"===Object.prototype.toString.call(thing)}function safeJsonParse(thing){if(isObject(thing))return thing;try{return JSON.parse(thing)}catch(e){return}}function headerFromJWS(jwsSig){var encodedHeader=jwsSig.split(".",1)[0];return safeJsonParse(Buffer.from(encodedHeader,"base64").toString("binary"))}function securedInputFromJWS(jwsSig){return jwsSig.split(".",2).join(".")}function signatureFromJWS(jwsSig){return jwsSig.split(".")[2]}function payloadFromJWS(jwsSig,encoding){encoding=encoding||"utf8";var payload=jwsSig.split(".")[1];return Buffer.from(payload,"base64").toString(encoding)}function isValidJws(string){return JWS_REGEX.test(string)&&!!headerFromJWS(string)}function jwsVerify(jwsSig,algorithm,secretOrKey){if(!algorithm){var err=Error("Missing algorithm parameter for jws.verify");throw err.code="MISSING_ALGORITHM",err}var signature=signatureFromJWS(jwsSig=toString(jwsSig)),securedInput=securedInputFromJWS(jwsSig);return jwa(algorithm).verify(securedInput,signature,secretOrKey)}function jwsDecode(jwsSig,opts){if(opts=opts||{},!isValidJws(jwsSig=toString(jwsSig)))return null;var header=headerFromJWS(jwsSig);if(!header)return null;var payload=payloadFromJWS(jwsSig);return("JWT"===header.typ||opts.json)&&(payload=JSON.parse(payload,opts.encoding)),{header:header,payload:payload,signature:signatureFromJWS(jwsSig)}}function VerifyStream(opts){var secretStream=new DataStream((opts=opts||{}).secret||opts.publicKey||opts.key);this.readable=!0,this.algorithm=opts.algorithm,this.encoding=opts.encoding,this.secret=this.publicKey=this.key=secretStream,this.signature=new DataStream(opts.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}util.inherits(VerifyStream,Stream),VerifyStream.prototype.verify=function verify(){try{var valid=jwsVerify(this.signature.buffer,this.algorithm,this.key.buffer),obj=jwsDecode(this.signature.buffer,this.encoding);return this.emit("done",valid,obj),this.emit("data",valid),this.emit("end"),this.readable=!1,valid}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},VerifyStream.decode=jwsDecode,VerifyStream.isValid=isValidJws,VerifyStream.verify=jwsVerify,module.exports=VerifyStream},"./node_modules/lodash.clonedeep/index.js":(module,exports,__webpack_require__)=>{module=__webpack_require__.nmd(module);var HASH_UNDEFINED="__lodash_hash_undefined__",argsTag="[object Arguments]",boolTag="[object Boolean]",dateTag="[object Date]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",promiseTag="[object Promise]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reFlags=/\w*$/,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,cloneableTags={};cloneableTags[argsTag]=cloneableTags["[object Array]"]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags["[object Error]"]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var freeGlobal="object"==typeof __webpack_require__.g&&__webpack_require__.g&&__webpack_require__.g.Object===Object&&__webpack_require__.g,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports=exports&&!exports.nodeType&&exports,freeModule=freeExports&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports;function addMapEntry(map,pair){return map.set(pair[0],pair[1]),map}function addSetEntry(set,value){return set.add(value),set}function arrayEach(array,iteratee){for(var index=-1,length=array?array.length:0;++index<length&&!1!==iteratee(array[index],index,array););return array}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array?array.length:0;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function getValue(object,key){return null==object?void 0:object[key]}function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol1=root.Symbol,Uint8Array1=root.Uint8Array,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=overArg(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise1=getNative(root,"Promise"),Set1=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise1),setCtorString=toSource(Set1),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol1?Symbol1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}function hashSet(key,value){return this.__data__[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0)&&(index==data.length-1?data.pop():splice.call(data,index,1),!0)}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key).delete(key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){return getMapData(this,key).set(key,value),this}function Stack(entries){this.__data__=new ListCache(entries)}function stackClear(){this.__data__=new ListCache}function stackDelete(key){return this.__data__.delete(key)}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this;cache=this.__data__=new MapCache(pairs)}return cache.set(key,value),this}function arrayLikeKeys(value,inherited){var result=isArray(value)||isArguments(value)?baseTimes(value.length,String):[],length=result.length,skipIndexes=!!length;for(var key in value)(inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&("length"==key||isIndex(key,length)))&&result.push(key);return result}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||(object[key]=value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return -1}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseClone(value,isDeep,isFull,customizer,key,object,stack){if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),void 0!==result)return result;if(!isObject(value))return value;var result,isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(isHostObject(value))return object?value:{};if(result=initCloneObject(isFunc?{}:value),!isDeep)return copySymbols(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;if(stack.set(value,result),!isArr)var props=isFull?getAllKeys(value):keys(value);return arrayEach(props||value,function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,isDeep,isFull,customizer,key,value,stack))}),result}function baseCreate(proto){return isObject(proto)?objectCreate(proto):{}}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseGetTag(value){return objectToString.call(value)}function baseIsNative(value){return!(!isObject(value)||isMasked(value))&&(isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor).test(toSource(value))}function baseKeys(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var result=new buffer.constructor(buffer.length);return buffer.copy(result),result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array1(result).set(new Uint8Array1(arrayBuffer)),result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneMap(map,isDeep,cloneFunc){return arrayReduce(isDeep?cloneFunc(mapToArray(map),!0):mapToArray(map),addMapEntry,new map.constructor)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}function cloneSet(set,isDeep,cloneFunc){return arrayReduce(isDeep?cloneFunc(setToArray(set),!0):setToArray(set),addSetEntry,new set.constructor)}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function copyObject(source,props,object,customizer){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;assignValue(object,key,void 0===newValue?source[key]:newValue)}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var getSymbols=nativeGetSymbols?overArg(nativeGetSymbols,Object):stubArray,getTag=baseGetTag;function initCloneArray(array){var length=array.length,result=array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:return cloneSymbol(object)}}function isIndex(value,length){return!!(length=null==length?9007199254740991:length)&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function cloneDeep(value){return baseClone(value,!0,!0)}function eq(value,other){return value===other||value!=value&&other!=other}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise1&&getTag(Promise1.resolve())!=promiseTag||Set1&&getTag(new Set1)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):void 0;if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});var isArray=Array.isArray;function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}var isBuffer=nativeIsBuffer||stubFalse;function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=9007199254740991}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}function stubArray(){return[]}function stubFalse(){return!1}module.exports=cloneDeep},"./node_modules/ms/index.js":module=>{function parse(str){if(!((str=String(str)).length>100)){var match=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);if(match){var n=parseFloat(match[1]);switch((match[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return 864e5*n;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function fmtShort(ms){var msAbs=Math.abs(ms);return msAbs>=864e5?Math.round(ms/864e5)+"d":msAbs>=36e5?Math.round(ms/36e5)+"h":msAbs>=6e4?Math.round(ms/6e4)+"m":msAbs>=1e3?Math.round(ms/1e3)+"s":ms+"ms"}function fmtLong(ms){var msAbs=Math.abs(ms);return msAbs>=864e5?plural(ms,msAbs,864e5,"day"):msAbs>=36e5?plural(ms,msAbs,36e5,"hour"):msAbs>=6e4?plural(ms,msAbs,6e4,"minute"):msAbs>=1e3?plural(ms,msAbs,1e3,"second"):ms+" ms"}function plural(ms,msAbs,n,name){return Math.round(ms/n)+" "+name+(msAbs>=1.5*n?"s":"")}module.exports=function(val,options){options=options||{};var type=typeof val;if("string"===type&&val.length>0)return parse(val);if("number"===type&&isFinite(val))return options.long?fmtLong(val):fmtShort(val);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(val))}},"./node_modules/process-nextick-args/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__("./node_modules/process/browser.js");function nextTick(fn,arg1,arg2,arg3){if("function"!=typeof fn)throw TypeError('"callback" argument must be a function');var args,i,len=arguments.length;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick(function afterTickOne(){fn.call(null,arg1)});case 3:return process.nextTick(function afterTickTwo(){fn.call(null,arg1,arg2)});case 4:return process.nextTick(function afterTickThree(){fn.call(null,arg1,arg2,arg3)});default:for(args=Array(len-1),i=0;i<args.length;)args[i++]=arguments[i];return process.nextTick(function afterTick(){fn.apply(null,args)})}}void 0!==process&&process.version&&0!==process.version.indexOf("v0.")&&(0!==process.version.indexOf("v1.")||0===process.version.indexOf("v1.8."))?module.exports=process:module.exports={nextTick:nextTick}},"./node_modules/readable-stream/lib/_stream_duplex.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var pna=__webpack_require__("./node_modules/process-nextick-args/index.js"),objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var util=Object.create(__webpack_require__("./node_modules/core-util-is/lib/util.js"));util.inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js");var Readable=__webpack_require__("./node_modules/readable-stream/lib/_stream_readable.js"),Writable=__webpack_require__("./node_modules/readable-stream/lib/_stream_writable.js");util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),options&&!1===options.readable&&(this.readable=!1),options&&!1===options.writable&&(this.writable=!1),this.allowHalfOpen=!0,options&&!1===options.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||pna.nextTick(onEndNT,this)}function onEndNT(self1){self1.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(value){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=value,this._writableState.destroyed=value)}}),Duplex.prototype._destroy=function(err,cb){this.push(null),this.end(),pna.nextTick(cb,err)}},"./node_modules/readable-stream/lib/_stream_passthrough.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=PassThrough;var Transform=__webpack_require__("./node_modules/readable-stream/lib/_stream_transform.js"),util=Object.create(__webpack_require__("./node_modules/core-util-is/lib/util.js"));function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}util.inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js"),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},"./node_modules/readable-stream/lib/_stream_readable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Duplex,StringDecoder,process=__webpack_require__("./node_modules/process/browser.js"),pna=__webpack_require__("./node_modules/process-nextick-args/index.js");module.exports=Readable;var isArray=__webpack_require__("./node_modules/readable-stream/node_modules/isarray/index.js");Readable.ReadableState=ReadableState,__webpack_require__("./node_modules/events/events.js").EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length},Stream=__webpack_require__("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}var util=Object.create(__webpack_require__("./node_modules/core-util-is/lib/util.js"));util.inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js");var debugUtil=__webpack_require__("?d17e"),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var BufferList=__webpack_require__("./node_modules/readable-stream/lib/internal/streams/BufferList.js"),destroyImpl=__webpack_require__("./node_modules/readable-stream/lib/internal/streams/destroy.js");util.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];function prependListener(emitter,event,fn){if("function"==typeof emitter.prependListener)return emitter.prependListener(event,fn);emitter._events&&emitter._events[event]?isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn)}function ReadableState(options,stream){Duplex=Duplex||__webpack_require__("./node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode);var hwm=options.highWaterMark,readableHwm=options.readableHighWaterMark,defaultHwm=this.objectMode?16:16384;hwm||0===hwm?this.highWaterMark=hwm:isDuplex&&(readableHwm||0===readableHwm)?this.highWaterMark=readableHwm:this.highWaterMark=defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__("./node_modules/readable-stream/node_modules/string_decoder/lib/string_decoder.js").s),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||__webpack_require__("./node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var er,state=stream._readableState;return null===chunk?(state.reading=!1,onEofChunk(stream,state)):(skipChunkCheck||(er=chunkInvalid(state,chunk)),er?stream.emit("error",er):state.objectMode||chunk&&chunk.length>0?("string"==typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=_uint8ArrayToBuffer(chunk)),addToFront?state.endEmitted?stream.emit("error",Error("stream.unshift() after end event")):addChunk(stream,state,chunk,!0):state.ended?stream.emit("error",Error("stream.push() after EOF")):(state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1))):addToFront||(state.reading=!1)),needMoreData(state)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(stream.emit("data",chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}function chunkInvalid(state,chunk){var er;return _isUint8Array(chunk)||"string"==typeof chunk||void 0===chunk||state.objectMode||(er=TypeError("Invalid non-string/buffer chunk")),er}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||0===state.length)}function computeNewHighWaterMark(n){return n>=8388608?n=8388608:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}function howMuchToRead(n,state){return n<=0||0===state.length&&state.ended?0:state.objectMode?1:n!=n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=computeNewHighWaterMark(n)),n<=state.length)?n:state.ended?state.length:(state.needReadable=!0,0)}function onEofChunk(stream,state){if(!state.ended){if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,emitReadable(stream)}}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,state.sync?pna.nextTick(emitReadable_,stream):emitReadable_(stream))}function emitReadable_(stream){debug("emit readable"),stream.emit("readable"),flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,pna.nextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug("maybeReadMore read 0"),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}function nReadingNextTick(self1){debug("readable nexttick read 0"),self1.read(0)}function resume(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,pna.nextTick(resume_,stream,state))}function resume_(stream,state){state.reading||(debug("resume read 0"),stream.read(0)),state.resumeScheduled=!1,state.awaitDrain=0,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){var ret;return 0===state.length?null:(state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.head.data:state.buffer.concat(state.length),state.buffer.clear()):ret=fromListPartial(n,state.buffer,state.decoder),ret)}function fromListPartial(n,list,hasStrings){var ret;return n<list.head.data.length?(ret=list.head.data.slice(0,n),list.head.data=list.head.data.slice(n)):ret=n===list.head.data.length?list.shift():hasStrings?copyFromBufferString(n,list):copyFromBuffer(n,list),ret}function copyFromBufferString(n,list){var p=list.head,c=1,ret=p.data;for(n-=ret.length;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),0==(n-=nb)){nb===str.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=str.slice(nb));break}++c}return list.length-=c,ret}function copyFromBuffer(n,list){var ret=Buffer.allocUnsafe(n),p=list.head,c=1;for(p.data.copy(ret),n-=p.data.length;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),0==(n-=nb)){nb===buf.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=buf.slice(nb));break}++c}return list.length-=c,ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw Error('"endReadable()" called on non-empty stream');state.endEmitted||(state.ended=!0,pna.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){state.endEmitted||0!==state.length||(state.endEmitted=!0,stream.readable=!1,stream.emit("end"))}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return -1}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){this.push(null),cb(err)},Readable.prototype.push=function(chunk,encoding){var skipChunkCheck,state=this._readableState;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&((encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){return StringDecoder||(StringDecoder=__webpack_require__("./node_modules/readable-stream/node_modules/string_decoder/lib/string_decoder.js").s),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc,this},Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var ret,state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),state.ended||state.reading?debug("reading or ended",doRead=!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state))),null===(ret=n>0?fromList(n,state):null)?(state.needReadable=!0,n=0):state.length-=n,0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){this.emit("error",Error("_read() is not implemented"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=pipeOpts&&!1===pipeOpts.end||dest===process.stdout||dest===process.stderr?unpipe:onend;function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,cleanup())}function onend(){debug("onend"),dest.end()}state.endEmitted?pna.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=!1;function cleanup(){debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain)&&ondrain()}var increasedAwaitDrain=!1;function ondata(chunk){debug("ondata"),increasedAwaitDrain=!1,!1!==dest.write(chunk)||increasedAwaitDrain||((1===state.pipesCount&&state.pipes===dest||state.pipesCount>1&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",src._readableState.awaitDrain),src._readableState.awaitDrain++,increasedAwaitDrain=!0),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&dest.emit("error",er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return src.on("data",ondata),prependListener(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,unpipeInfo);return this}var index=indexOf(state.pipes,dest);return -1===index||(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo)),this},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if("data"===ev)!1!==this._readableState.flowing&&this.resume();else if("readable"===ev){var state=this._readableState;state.endEmitted||state.readableListening||(state.readableListening=state.needReadable=!0,state.emittedReadable=!1,state.reading?state.length&&emitReadable(this):pna.nextTick(nReadingNextTick,this))}return res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!0,resume(this,state)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;for(var i in stream.on("end",function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)}),stream.on("data",function(chunk){debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),(!state.objectMode||null!=chunk)&&(state.objectMode||chunk&&chunk.length)&&(_this.push(chunk)||(paused=!0,stream.pause()))}),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},this},Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Readable._fromList=fromList},"./node_modules/readable-stream/lib/_stream_transform.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=Transform;var Duplex=__webpack_require__("./node_modules/readable-stream/lib/_stream_duplex.js"),util=Object.create(__webpack_require__("./node_modules/core-util-is/lib/util.js"));function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return this.emit("error",Error("write callback called multiple times"));ts.writechunk=null,ts.writecb=null,null!=data&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.on("prefinish",prefinish)}function prefinish(){var _this=this;"function"==typeof this._flush?this._flush(function(er,data){done(_this,er,data)}):done(this,null,null)}function done(stream,er,data){if(er)return stream.emit("error",er);if(null!=data&&stream.push(data),stream._writableState.length)throw Error("Calling transform done when ws.length != 0");if(stream._transformState.transforming)throw Error("Calling transform done when still transforming");return stream.push(null)}util.inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js"),util.inherits(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw Error("_transform() is not implemented")},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null!==ts.writechunk&&ts.writecb&&!ts.transforming?(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)):ts.needTransform=!0},Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,function(err2){cb(err2),_this2.emit("close")})}},"./node_modules/readable-stream/lib/_stream_writable.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var Duplex,realHasInstance,process=__webpack_require__("./node_modules/process/browser.js"),pna=__webpack_require__("./node_modules/process-nextick-args/index.js");function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){onCorkedFinish(_this,state)}}module.exports=Writable;var asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;Writable.WritableState=WritableState;var util=Object.create(__webpack_require__("./node_modules/core-util-is/lib/util.js"));util.inherits=__webpack_require__("./node_modules/inherits/inherits_browser.js");var internalUtil={deprecate:__webpack_require__("./node_modules/util-deprecate/browser.js")},Stream=__webpack_require__("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),Buffer=__webpack_require__("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}var destroyImpl=__webpack_require__("./node_modules/readable-stream/lib/internal/streams/destroy.js");function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__("./node_modules/readable-stream/lib/_stream_duplex.js"),options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode);var hwm=options.highWaterMark,writableHwm=options.writableHighWaterMark,defaultHwm=this.objectMode?16:16384;hwm||0===hwm?this.highWaterMark=hwm:isDuplex&&(writableHwm||0===writableHwm)?this.highWaterMark=writableHwm:this.highWaterMark=defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){onwrite(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){if(Duplex=Duplex||__webpack_require__("./node_modules/readable-stream/lib/_stream_duplex.js"),!realHasInstance.call(Writable,this)&&!(this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)}function writeAfterEnd(stream,cb){var er=Error("write after end");stream.emit("error",er),pna.nextTick(cb,er)}function validChunk(stream,state,chunk,cb){var valid=!0,er=!1;return null===chunk?er=TypeError("May not write null values to stream"):"string"==typeof chunk||void 0===chunk||state.objectMode||(er=TypeError("Invalid non-string/buffer chunk")),er&&(stream.emit("error",er),pna.nextTick(cb,er),valid=!1),valid}function decodeChunk(state,chunk,encoding){return state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=Buffer.from(chunk,encoding)),chunk}function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(ret||(state.needDrain=!0),state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function onwriteError(stream,state,sync,er,cb){--state.pendingcb,sync?(pna.nextTick(cb,er),pna.nextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,stream.emit("error",er)):(cb(er),stream._writableState.errorEmitted=!0,stream.emit("error",er),finishMaybe(stream,state))}function onwriteStateUpdate(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}function onwrite(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if(onwriteStateUpdate(state),er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?asyncWrite(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}function afterWrite(stream,state,finished,cb){finished||onwriteDrain(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function onwriteDrain(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var buffer=Array(state.bufferedRequestCount),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback,len=state.objectMode?1:chunk.length;if(doWrite(stream,state,!1,len,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final(function(err){state.pendingcb--,err&&stream.emit("error",err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)})}function prefinish(stream,state){state.prefinished||state.finalCalled||("function"==typeof stream._final?(state.pendingcb++,state.finalCalled=!0,pna.nextTick(callFinal,stream,state)):(state.prefinished=!0,stream.emit("prefinish")))}function finishMaybe(stream,state){var need=needFinish(state);return need&&(prefinish(stream,state),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"))),need}function endWritable(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?pna.nextTick(cb):stream.once("finish",cb)),state.ended=!0,stream.writable=!1}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;for(corkReq.entry=null;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree?state.corkedRequestsFree.next=corkReq:state.corkedRequestsFree=corkReq}util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function getBuffer(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){return!!realHasInstance.call(this,object)||this===Writable&&object&&object._writableState instanceof WritableState}})):realHasInstance=function(object){return object instanceof this},Writable.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))},Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState,ret=!1,isBuf=!state.objectMode&&_isUint8Array(chunk);return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=_uint8ArrayToBuffer(chunk)),"function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ended?writeAfterEnd(this,cb):(isBuf||validChunk(this,state,chunk,cb))&&(state.pendingcb++,ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){var state=this._writableState;state.corked++},Writable.prototype.uncork=function(){var state=this._writableState;!state.corked||(state.corked--,state.writing||state.corked||state.finished||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw TypeError("Unknown encoding: "+encoding);return this._writableState.defaultEncoding=encoding,this},Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(chunk,encoding,cb){cb(Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!=chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||state.finished||endWritable(this,state,cb)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){this.end(),cb(err)}},"./node_modules/readable-stream/lib/internal/streams/BufferList.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}var Buffer=__webpack_require__("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,util=__webpack_require__("?ed1b");function copyBuffer(src,target,offset){src.copy(target,offset)}module.exports=function(){function BufferList(){_classCallCheck(this,BufferList),this.head=null,this.tail=null,this.length=0}return BufferList.prototype.push=function push(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length},BufferList.prototype.unshift=function unshift(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length},BufferList.prototype.shift=function shift(){if(0!==this.length){var ret=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}},BufferList.prototype.clear=function clear(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function join(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret},BufferList.prototype.concat=function concat(n){if(0===this.length)return Buffer.alloc(0);if(1===this.length)return this.head.data;for(var ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)copyBuffer(p.data,ret,i),i+=p.data.length,p=p.next;return ret},BufferList}(),util&&util.inspect&&util.inspect.custom&&(module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+" "+obj})},"./node_modules/readable-stream/lib/internal/streams/destroy.js":(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var pna=__webpack_require__("./node_modules/process-nextick-args/index.js");function destroy(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?cb?cb(err):!err||this._writableState&&this._writableState.errorEmitted||pna.nextTick(emitErrorNT,this,err):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,function(err){!cb&&err?(pna.nextTick(emitErrorNT,_this,err),_this._writableState&&(_this._writableState.errorEmitted=!0)):cb&&cb(err)})),this}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(self1,err){self1.emit("error",err)}module.exports={destroy:destroy,undestroy:undestroy}},"./node_modules/readable-stream/lib/internal/streams/stream-browser.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/events/events.js").EventEmitter},"./node_modules/readable-stream/node_modules/isarray/index.js":module=>{var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},"./node_modules/readable-stream/node_modules/safe-buffer/index.js":(module,exports,__webpack_require__)=>{var buffer=__webpack_require__("./node_modules/buffer/index.js"),Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw TypeError("Argument must be a number");var buf=Buffer(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},"./node_modules/readable-stream/node_modules/string_decoder/lib/string_decoder.js":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,isEncoding=Buffer.isEncoding||function(encoding){switch((encoding=""+encoding)&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(enc){var retried;if(!enc)return"utf8";for(;;)switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase(),retried=!0}}function normalizeEncoding(enc){var nenc=_normalizeEncoding(enc);if("string"!=typeof nenc&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw Error("Unknown encoding: "+enc);return nenc||enc}function StringDecoder(encoding){var nb;switch(this.encoding=normalizeEncoding(encoding),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,nb=4;break;case"utf8":this.fillLast=utf8FillLast,nb=4;break;case"base64":this.text=base64Text,this.end=base64End,nb=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(nb)}function utf8CheckByte(byte){return byte<=127?0:byte>>5==6?2:byte>>4==14?3:byte>>3==30?4:byte>>6==2?-1:-2}function utf8CheckIncomplete(self1,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);return nb>=0?(nb>0&&(self1.lastNeed=nb-1),nb):--j<i||-2===nb?0:(nb=utf8CheckByte(buf[j]))>=0?(nb>0&&(self1.lastNeed=nb-2),nb):--j<i||-2===nb?0:(nb=utf8CheckByte(buf[j]))>=0?(nb>0&&(2===nb?nb=0:self1.lastNeed=nb-3),nb):0}function utf8CheckExtraBytes(self1,buf,p){if((192&buf[0])!=128)return self1.lastNeed=0,"";if(self1.lastNeed>1&&buf.length>1){if((192&buf[1])!=128)return self1.lastNeed=1,"";if(self1.lastNeed>2&&buf.length>2&&(192&buf[2])!=128)return self1.lastNeed=2,""}}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed,r=utf8CheckExtraBytes(this,buf,p);return void 0!==r?r:this.lastNeed<=buf.length?(buf.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(buf.copy(this.lastChar,p,0,buf.length),this.lastNeed-=buf.length)}function utf8Text(buf,i){var total=utf8CheckIncomplete(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);return buf.copy(this.lastChar,0,end),buf.toString("utf8",i,end)}function utf8End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+"":r}function utf16Text(buf,i){if((buf.length-i)%2==0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=buf[buf.length-1],buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;return 0===n?buf.toString("base64",i):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=buf[buf.length-1]:(this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1]),buf.toString("base64",i,buf.length-n))}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}exports.s=StringDecoder,StringDecoder.prototype.write=function(buf){var r,i;if(0===buf.length)return"";if(this.lastNeed){if(void 0===(r=this.fillLast(buf)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<buf.length?r?r+this.text(buf,i):this.text(buf,i):r||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length)return buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length),this.lastNeed-=buf.length}},"./node_modules/readable-stream/readable-browser.js":(module,exports,__webpack_require__)=>{(exports=module.exports=__webpack_require__("./node_modules/readable-stream/lib/_stream_readable.js")).Stream=exports,exports.Readable=exports,exports.Writable=__webpack_require__("./node_modules/readable-stream/lib/_stream_writable.js"),exports.Duplex=__webpack_require__("./node_modules/readable-stream/lib/_stream_duplex.js"),exports.Transform=__webpack_require__("./node_modules/readable-stream/lib/_stream_transform.js"),exports.PassThrough=__webpack_require__("./node_modules/readable-stream/lib/_stream_passthrough.js")},"./node_modules/@blockaid/ppom_release/package.json":module=>{"use strict";module.exports={i8:"1.4.1"}}}]);