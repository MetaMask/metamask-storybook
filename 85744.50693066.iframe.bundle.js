"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[85744],{"./shared/modules/network.utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C1:()=>getNetworkIcon,Dl:()=>getRpcDataByChainId,Oo:()=>isSafeChainId,SH:()=>sortNetworks,dV:()=>sortNetworksByPrioity,ph:()=>convertCaipToHexChainId,wz:()=>isPrefixedFormattedHexString});var _metamask_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@metamask/utils/dist/caip-types.mjs"),_metamask_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@metamask/utils/dist/hex.mjs"),_constants_network__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./shared/constants/network.ts"),_constants_multichain_networks__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./shared/constants/multichain/networks.ts");function isSafeChainId(chainId){return isSafeInteger(chainId)&&chainId>0&&chainId<=_constants_network__WEBPACK_IMPORTED_MODULE_0__.NH3}function isPrefixedFormattedHexString(value){return"string"==typeof value&&RegExp("^0x[1-9a-f]+[0-9a-f]*$","iu").test(value)}function isSafeInteger(value){return Number.isSafeInteger(value)}function convertCaipToHexChainId(id){var _parseCaipChainId=(0,_metamask_utils__WEBPACK_IMPORTED_MODULE_2__.rW)(id),namespace=_parseCaipChainId.namespace,reference=_parseCaipChainId.reference;if(namespace===_metamask_utils__WEBPACK_IMPORTED_MODULE_2__.wV.Eip155)return(0,_metamask_utils__WEBPACK_IMPORTED_MODULE_3__.mu)(parseInt(reference,10).toString(16));throw Error("Unsupported CAIP chain ID namespace: ".concat(namespace,". Only eip155 is supported."))}var sortNetworks=function(networks,sortedChainIds){return Object.values(networks).sort(function(a,b){var indexA=sortedChainIds.findIndex(function(param){return param.networkId===a.chainId}),indexB=sortedChainIds.findIndex(function(param){return param.networkId===b.chainId});return(-1===indexA?1/0:indexA)-(-1===indexB?1/0:indexB)})},getNetworkIcon=function(networkConfiguration){return networkConfiguration.isEvm?_constants_network__WEBPACK_IMPORTED_MODULE_0__.Clc[convertCaipToHexChainId(networkConfiguration.chainId)]:_constants_multichain_networks__WEBPACK_IMPORTED_MODULE_1__.gu[networkConfiguration.chainId]},getRpcDataByChainId=function(chainId,evmNetworks){var hexChainId=convertCaipToHexChainId(chainId);if(!evmNetworks[hexChainId])throw Error("Network configuration not found for chain ID: ".concat(chainId," (").concat(hexChainId,")"));var evmNetworkConfig=evmNetworks[hexChainId],rpcEndpoints=evmNetworkConfig.rpcEndpoints,defaultRpcEndpoint=rpcEndpoints[evmNetworkConfig.defaultRpcEndpointIndex];return{rpcEndpoints:rpcEndpoints,defaultRpcEndpoint:defaultRpcEndpoint}},sortNetworksByPrioity=function(networks,priorityList){return networks.sort(function(networkA,networkB){var indexA=priorityList.indexOf(networkA.chainId),indexB=priorityList.indexOf(networkB.chainId);return -1!==indexA&&-1!==indexB?indexA-indexB:-1!==indexA?-1:-1!==indexB?1:networkA.name.localeCompare(networkB.name)})}},"./ui/ducks/bridge/selectors.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$8:()=>getFromAmount,G8:()=>getFromToken,GG:()=>getFromChain,Gp:()=>getIsBridgeTx,OA:()=>getFromTokenBalance,OL:()=>getSlippage,PK:()=>getBridgeQuotes,SP:()=>getIsUnifiedUIEnabled,Ui:()=>getPriceImpactThresholds,Uv:()=>getToChains,W3:()=>getFromAccount,WM:()=>getTxAlerts,WZ:()=>getQuoteRequest,b6:()=>getToChain,c2:()=>getQuoteRefreshRate,cZ:()=>getIsSwap,dJ:()=>getToToken,dS:()=>getFromChains,f:()=>getIsToOrFromSolana,fP:()=>getHardwareWalletName,gE:()=>getBridgeSortOrder,it:()=>getWasTxDeclined,jZ:()=>getAccountGroupNameByInternalAccount,m7:()=>getTopAssetsFromFeatureFlags,qD:()=>getIsQuoteExpired,tt:()=>getFromAmountInCurrency,uu:()=>getIsSolanaSwap,v:()=>getValidationErrors,wm:()=>getToAccounts});var _metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./node_modules/@metamask/bridge-controller/dist/selectors.mjs"),_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./node_modules/@metamask/bridge-controller/dist/utils/bridge.mjs"),_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./node_modules/@metamask/bridge-controller/dist/utils/caip-formatters.mjs"),_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__("./node_modules/@metamask/bridge-controller/dist/utils/quote.mjs"),_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__("./node_modules/@metamask/bridge-controller/dist/constants/bridge.mjs"),_metamask_keyring_api__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@metamask/keyring-api/dist/index.mjs"),lodash__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash/lodash.js"),reselect__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./node_modules/reselect/dist/reselect.mjs"),bignumber_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/bignumber.js/bignumber.js"),_metamask_notification_services_controller_push_services__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("./node_modules/@metamask/notification-services-controller/dist/NotificationServicesPushController/utils/get-notification-data.mjs"),_shared_constants_multichain_networks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./shared/constants/multichain/networks.ts"),_selectors_selectors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/selectors/selectors.js"),_shared_constants_bridge__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./shared/constants/bridge.ts"),_shared_modules_selectors_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./shared/modules/selectors/util.js"),_shared_modules_selectors_networks__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./shared/modules/selectors/networks.ts"),_shared_constants_network__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./shared/constants/network.ts"),_selectors_multichain__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ui/selectors/multichain.ts"),_selectors_assets__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./ui/selectors/assets.ts"),_shared_constants_hardware_wallets__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./shared/constants/hardware-wallets.ts"),_shared_lib_asset_utils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./shared/lib/asset-utils.ts"),_shared_constants_multichain_assets__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./shared/constants/multichain/assets.ts"),_shared_modules_Numeric__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./shared/modules/Numeric.ts"),_selectors_accounts__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./ui/selectors/accounts.ts"),_selectors_remote_feature_flags__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./ui/selectors/remote-feature-flags.ts"),_selectors_multichain_accounts_account_tree__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./ui/selectors/multichain-accounts/account-tree.ts"),_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./ui/ducks/bridge/utils.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _object_without_properties(source,excluded){if(null==source)return{};var key,i,target=_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function _to_consumable_array(arr){return _array_without_holes(arr)||_iterable_to_array(arr)||_unsupported_iterable_to_array(arr)||_non_iterable_spread()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var hasSolanaAccounts=function(state){var _state_metamask_internalAccounts;return Object.values((null==(_state_metamask_internalAccounts=state.metamask.internalAccounts)?void 0:_state_metamask_internalAccounts.accounts)||{}).some(function(account){var DataAccount=_metamask_keyring_api__WEBPACK_IMPORTED_MODULE_0__.Ux.DataAccount;return!!(account&&account.type===DataAccount)})},getAllBridgeableNetworks=(0,_shared_modules_selectors_util__WEBPACK_IMPORTED_MODULE_6__._)(_shared_modules_selectors_networks__WEBPACK_IMPORTED_MODULE_7__.hX,function(networkConfigurationsByChainId){return(0,lodash__WEBPACK_IMPORTED_MODULE_1__.uniqBy)(_to_consumable_array(Object.values(networkConfigurationsByChainId)).concat([_object_spread_props(_object_spread({},_shared_constants_multichain_networks__WEBPACK_IMPORTED_MODULE_3__.Zu[_shared_constants_multichain_networks__WEBPACK_IMPORTED_MODULE_3__.AF.SOLANA]),{blockExplorerUrls:[],name:_shared_constants_multichain_networks__WEBPACK_IMPORTED_MODULE_3__.Zu[_shared_constants_multichain_networks__WEBPACK_IMPORTED_MODULE_3__.AF.SOLANA].nickname,nativeCurrency:_shared_constants_multichain_networks__WEBPACK_IMPORTED_MODULE_3__.Zu[_shared_constants_multichain_networks__WEBPACK_IMPORTED_MODULE_3__.AF.SOLANA].ticker,rpcEndpoints:[{url:"",type:"",networkClientId:""}],defaultRpcEndpointIndex:0,chainId:_shared_constants_multichain_networks__WEBPACK_IMPORTED_MODULE_3__.AF.SOLANA})]),"chainId").filter(function(param){var chainId=param.chainId;return _shared_constants_bridge__WEBPACK_IMPORTED_MODULE_5__.kI.includes(chainId)})}),getBridgeFeatureFlags=(0,_shared_modules_selectors_util__WEBPACK_IMPORTED_MODULE_6__._)([function(state){return(0,_selectors_remote_feature_flags__WEBPACK_IMPORTED_MODULE_16__.Y)(state).bridgeConfig}],function(bridgeConfig){return(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_19__.ZO)({remoteFeatureFlags:{bridgeConfig:bridgeConfig}})}),getPriceImpactThresholds=(0,_shared_modules_selectors_util__WEBPACK_IMPORTED_MODULE_6__._)(getBridgeFeatureFlags,function(bridgeFeatureFlags){return null==bridgeFeatureFlags?void 0:bridgeFeatureFlags.priceImpactThreshold}),getFromChains=(0,_shared_modules_selectors_util__WEBPACK_IMPORTED_MODULE_6__._)(getAllBridgeableNetworks,getBridgeFeatureFlags,function(state){return hasSolanaAccounts(state)},function(allBridgeableNetworks,bridgeFeatureFlags,hasSolanaAccount){return(hasSolanaAccount?allBridgeableNetworks:allBridgeableNetworks.filter(function(param){var chainId=param.chainId;return!(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.FD)(chainId)})).filter(function(param){var _bridgeFeatureFlags_chains_formatChainIdToCaip,chainId=param.chainId;return null==(_bridgeFeatureFlags_chains_formatChainIdToCaip=bridgeFeatureFlags.chains[(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_21__.Kr)(chainId)])?void 0:_bridgeFeatureFlags_chains_formatChainIdToCaip.isActiveSrc})}),getFromChain=(0,_shared_modules_selectors_util__WEBPACK_IMPORTED_MODULE_6__._)(_selectors_multichain__WEBPACK_IMPORTED_MODULE_9__.c0,getFromChains,function(providerConfig,fromChains){return fromChains.find(function(param){return param.chainId===providerConfig.chainId})}),getToChains=(0,_shared_modules_selectors_util__WEBPACK_IMPORTED_MODULE_6__._)(getAllBridgeableNetworks,getBridgeFeatureFlags,function(allBridgeableNetworks,bridgeFeatureFlags){return(0,lodash__WEBPACK_IMPORTED_MODULE_1__.uniqBy)(_to_consumable_array(allBridgeableNetworks).concat(_to_consumable_array(_shared_constants_network__WEBPACK_IMPORTED_MODULE_8__.Kqv)),"chainId").filter(function(param){var _bridgeFeatureFlags_chains_formatChainIdToCaip,_bridgeFeatureFlags_chains,chainId=param.chainId;return null==bridgeFeatureFlags||null==(_bridgeFeatureFlags_chains=bridgeFeatureFlags.chains)||null==(_bridgeFeatureFlags_chains_formatChainIdToCaip=_bridgeFeatureFlags_chains[(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_21__.Kr)(chainId)])?void 0:_bridgeFeatureFlags_chains_formatChainIdToCaip.isActiveDest})}),getTopAssetsFromFeatureFlags=function(state,chainId){if(chainId){var _bridgeFeatureFlags_chains_formatChainIdToCaip,bridgeFeatureFlags=getBridgeFeatureFlags(state);return null==bridgeFeatureFlags||null==(_bridgeFeatureFlags_chains_formatChainIdToCaip=bridgeFeatureFlags.chains[(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_21__.Kr)(chainId)])?void 0:_bridgeFeatureFlags_chains_formatChainIdToCaip.topAssets}},getToChain=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)([getFromChain,getToChains,function(state){var _state_bridge;return null==(_state_bridge=state.bridge)?void 0:_state_bridge.toChainId}],function(fromChain,toChains,toChainId){return toChainId?toChains.find(function(param){var chainId=param.chainId;return chainId===toChainId||(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_21__.Kr)(chainId)===toChainId}):fromChain}),getFromToken=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)([function(state){return state.bridge.fromToken},getFromChain],function(fromToken,fromChain){if(!(null==fromChain?void 0:fromChain.chainId))return null;if(null==fromToken?void 0:fromToken.address)return fromToken;var _getNativeAssetForChainId=(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.ts)(fromChain.chainId),nativeAsset=(_getNativeAssetForChainId.iconUrl,_object_without_properties(_getNativeAssetForChainId,["iconUrl"])),newToToken=(0,_utils__WEBPACK_IMPORTED_MODULE_18__.Oh)(nativeAsset);return newToToken?_object_spread_props(_object_spread({},newToToken),{chainId:(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_21__.Kr)(fromChain.chainId)}):newToToken}),getToToken=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)([getFromToken,getToChain,function(state){return state.bridge.toToken}],function(fromToken,toChain,toToken){if(!toChain||!fromToken)return null;if(toToken)return toToken;var defaultToken=(0,_utils__WEBPACK_IMPORTED_MODULE_18__.ez)(toChain,fromToken);return defaultToken?(0,_utils__WEBPACK_IMPORTED_MODULE_18__.Oh)(defaultToken):null}),getFromAmount=function(state){return state.bridge.fromTokenInputValue},getAccountGroupNameByInternalAccount=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)([_selectors_multichain_accounts_account_tree__WEBPACK_IMPORTED_MODULE_17__.X1,function(_,account){return account}],function(accountGroups,account){var _accountGroups_find,_account_metadata,_accountGroups_find_metadata_name;return(null==account?void 0:account.id)?null!=(_accountGroups_find_metadata_name=null==(_accountGroups_find=accountGroups.find(function(param){return param.accounts.includes(account.id)}))?void 0:_accountGroups_find.metadata.name)?_accountGroups_find_metadata_name:null==account||null==(_account_metadata=account.metadata)?void 0:_account_metadata.name:null}),getFromAccount=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)([function(state){var _getFromChain;return null==(_getFromChain=getFromChain(state))?void 0:_getFromChain.chainId},function(state){return state},_selectors_accounts__WEBPACK_IMPORTED_MODULE_15__._r],function(fromChainId,state,selectedInternalAccount){if(fromChainId){var _getInternalAccountBySelectedAccountGroupAndCaip;return null!=(_getInternalAccountBySelectedAccountGroupAndCaip=(0,_selectors_multichain_accounts_account_tree__WEBPACK_IMPORTED_MODULE_17__.zH)(state,(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_21__.Kr)(fromChainId)))?_getInternalAccountBySelectedAccountGroupAndCaip:selectedInternalAccount}return null}),getToAccounts=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)([getToChain,function(state){return state}],function(toChain,state){return toChain?(0,_selectors_accounts__WEBPACK_IMPORTED_MODULE_15__.$l)(state,(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_21__.Kr)(toChain.chainId)).map(function(account){var _getAccountGroupNameByInternalAccount;return _object_spread_props(_object_spread({},account),{isExternal:!1,displayName:null!=(_getAccountGroupNameByInternalAccount=getAccountGroupNameByInternalAccount(state,account))?_getAccountGroupNameByInternalAccount:account.metadata.name})}):[]}),_getFromNativeBalance=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)(getFromChain,function(state){return state.bridge.fromNativeBalance},_selectors_multichain__WEBPACK_IMPORTED_MODULE_9__.aQ,_selectors_accounts__WEBPACK_IMPORTED_MODULE_15__._r,function(fromChain,fromNativeBalance,nonEvmBalancesByAccountId,param){var id=param.id;if(!fromChain)return null;var chainId=fromChain.chainId,_getNativeAssetForChainId=(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.ts)(chainId),decimals=_getNativeAssetForChainId.decimals,address=_getNativeAssetForChainId.address,assetId=_getNativeAssetForChainId.assetId;if((0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.FD)(chainId)){var _nonEvmBalancesByAccountId_id_caipAssetType,_nonEvmBalancesByAccountId_id,_nonEvmBalancesByAccountId_id_caipAssetType_amount,caipAssetType=(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.c2)(address)?_shared_constants_multichain_assets__WEBPACK_IMPORTED_MODULE_13__.dW.SOL:null!=assetId?assetId:address;return null!=(_nonEvmBalancesByAccountId_id_caipAssetType_amount=null==nonEvmBalancesByAccountId||null==(_nonEvmBalancesByAccountId_id=nonEvmBalancesByAccountId[id])||null==(_nonEvmBalancesByAccountId_id_caipAssetType=_nonEvmBalancesByAccountId_id[caipAssetType])?void 0:_nonEvmBalancesByAccountId_id_caipAssetType.amount)?_nonEvmBalancesByAccountId_id_caipAssetType_amount:null}return fromNativeBalance?_shared_modules_Numeric__WEBPACK_IMPORTED_MODULE_14__.e.from(fromNativeBalance,10).shiftedBy(decimals).toString():null}),getFromTokenBalance=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)(getFromToken,getFromChain,function(state){return state.bridge.fromTokenBalance},_selectors_multichain__WEBPACK_IMPORTED_MODULE_9__.aQ,getFromAccount,function(fromToken,fromChain,fromTokenBalance,nonEvmBalancesByAccountId,fromAccount){if(!fromToken||!fromChain||!fromAccount)return null;var id=fromAccount.id,chainId=fromToken.chainId,decimals=fromToken.decimals,address=fromToken.address,assetId=fromToken.assetId;if((0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.FD)(chainId)){var _nonEvmBalancesByAccountId_id_caipAssetType,_nonEvmBalancesByAccountId_id,_nonEvmBalancesByAccountId_id_caipAssetType_amount,_ref,caipAssetType=(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.c2)(address)?_shared_constants_multichain_assets__WEBPACK_IMPORTED_MODULE_13__.dW.SOL:null!=assetId?assetId:address;return null!=(_ref=null!=(_nonEvmBalancesByAccountId_id_caipAssetType_amount=null==nonEvmBalancesByAccountId||null==(_nonEvmBalancesByAccountId_id=nonEvmBalancesByAccountId[id])||null==(_nonEvmBalancesByAccountId_id_caipAssetType=_nonEvmBalancesByAccountId_id[caipAssetType])?void 0:_nonEvmBalancesByAccountId_id_caipAssetType.amount)?_nonEvmBalancesByAccountId_id_caipAssetType_amount:fromToken.string)?_ref:null}return fromTokenBalance?_shared_modules_Numeric__WEBPACK_IMPORTED_MODULE_14__.e.from(fromTokenBalance,10).shiftedBy(decimals).toString():null}),getSlippage=function(state){return state.bridge.slippage},getQuoteRequest=function(state){return state.metamask.quoteRequest},getQuoteRefreshRate=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)(getBridgeFeatureFlags,getFromChain,function(extensionConfig,fromChain){var _extensionConfig_chains_formatChainIdToCaip,_ref;return null!=(_ref=fromChain&&(null==(_extensionConfig_chains_formatChainIdToCaip=extensionConfig.chains[(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_21__.Kr)(fromChain.chainId)])?void 0:_extensionConfig_chains_formatChainIdToCaip.refreshRate))?_ref:extensionConfig.refreshRate}),getBridgeSortOrder=function(state){return state.bridge.sortOrder},getFromTokenConversionRate=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)([getFromChain,function(state){return state.metamask.marketData},_selectors_assets__WEBPACK_IMPORTED_MODULE_10__.D7,getFromToken,_selectors_multichain__WEBPACK_IMPORTED_MODULE_9__.lT,function(state){return state.metamask.currencyRates},function(state){return state.bridge.fromTokenExchangeRate}],function(fromChain,marketData,conversionRates,fromToken,rates,currencyRates,fromTokenExchangeRate){if((null==fromChain?void 0:fromChain.chainId)&&fromToken){var _exchangeRateFromMarketData,nativeAssetId=null==(_getNativeAssetForChainId=(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.ts)(fromChain.chainId))?void 0:_getNativeAssetForChainId.assetId,tokenAssetId=(0,_shared_lib_asset_utils__WEBPACK_IMPORTED_MODULE_12__.tO)(fromToken.address,(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_21__.Kr)(fromChain.chainId)),nativeToCurrencyRate=(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.FD)(fromChain.chainId)?Number(null!=(_conversionRates_nativeAssetId_rate=null==conversionRates||null==(_conversionRates_nativeAssetId=conversionRates[nativeAssetId])?void 0:_conversionRates_nativeAssetId.rate)?_conversionRates_nativeAssetId_rate:null):null!=(_currencyRates_fromChain_nativeCurrency_conversionRate=null==(_currencyRates_fromChain_nativeCurrency=currencyRates[fromChain.nativeCurrency])?void 0:_currencyRates_fromChain_nativeCurrency.conversionRate)?_currencyRates_fromChain_nativeCurrency_conversionRate:null,nativeToUsdRate=(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.FD)(fromChain.chainId)?Number(null!=(_rates_fromChain_nativeCurrency_toLowerCase_usdConversionRate=null==rates||null==(_rates_fromChain_nativeCurrency_toLowerCase=rates[fromChain.nativeCurrency.toLowerCase()])?void 0:_rates_fromChain_nativeCurrency_toLowerCase.usdConversionRate)?_rates_fromChain_nativeCurrency_toLowerCase_usdConversionRate:null):null!=(_currencyRates_fromChain_nativeCurrency_usdConversionRate=null==(_currencyRates_fromChain_nativeCurrency1=currencyRates[fromChain.nativeCurrency])?void 0:_currencyRates_fromChain_nativeCurrency1.usdConversionRate)?_currencyRates_fromChain_nativeCurrency_usdConversionRate:null;if((0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.c2)(fromToken.address))return{valueInCurrency:nativeToCurrencyRate,usd:nativeToUsdRate};if((0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.FD)(fromChain.chainId)&&nativeAssetId&&tokenAssetId){var _getNativeAssetForChainId,_conversionRates_nativeAssetId,_currencyRates_fromChain_nativeCurrency,_rates_fromChain_nativeCurrency_toLowerCase,_currencyRates_fromChain_nativeCurrency1,_conversionRates_nativeAssetId_rate,_currencyRates_fromChain_nativeCurrency_conversionRate,_rates_fromChain_nativeCurrency_toLowerCase_usdConversionRate,_currencyRates_fromChain_nativeCurrency_usdConversionRate,_conversionRates_tokenAssetId,_conversionRates_nativeAssetId1,_rates_sol,_conversionRates_tokenAssetId_rate,_ref,_conversionRates_nativeAssetId_rate1,_ref1,tokenToNativeAssetRate=(0,_utils__WEBPACK_IMPORTED_MODULE_18__.Hb)(Number(null!=(_ref=null!=(_conversionRates_tokenAssetId_rate=null==conversionRates||null==(_conversionRates_tokenAssetId=conversionRates[tokenAssetId])?void 0:_conversionRates_tokenAssetId.rate)?_conversionRates_tokenAssetId_rate:fromTokenExchangeRate)?_ref:null),Number(null!=(_ref1=null!=(_conversionRates_nativeAssetId_rate1=null==conversionRates||null==(_conversionRates_nativeAssetId1=conversionRates[nativeAssetId])?void 0:_conversionRates_nativeAssetId1.rate)?_conversionRates_nativeAssetId_rate1:null==rates||null==(_rates_sol=rates.sol)?void 0:_rates_sol.conversionRate)?_ref1:null));return(0,_utils__WEBPACK_IMPORTED_MODULE_18__.np)(tokenToNativeAssetRate,Number(nativeToCurrencyRate),Number(nativeToUsdRate))}var tokenToNativeAssetRate1=null!=(_exchangeRateFromMarketData=(0,_utils__WEBPACK_IMPORTED_MODULE_18__.e9)(fromChain.chainId,fromToken.address,marketData))?_exchangeRateFromMarketData:(0,_utils__WEBPACK_IMPORTED_MODULE_18__.Hb)(fromTokenExchangeRate,nativeToCurrencyRate);return(0,_utils__WEBPACK_IMPORTED_MODULE_18__.np)(tokenToNativeAssetRate1,nativeToCurrencyRate,nativeToUsdRate)}return(0,_utils__WEBPACK_IMPORTED_MODULE_18__.np)()});(0,_shared_modules_selectors_util__WEBPACK_IMPORTED_MODULE_6__._)([getToChain,function(state){return state.metamask.marketData},_selectors_assets__WEBPACK_IMPORTED_MODULE_10__.D7,getToToken,_shared_modules_selectors_networks__WEBPACK_IMPORTED_MODULE_7__.hX,function(state){return{state:state,toTokenExchangeRate:state.bridge.toTokenExchangeRate,toTokenUsdExchangeRate:state.bridge.toTokenUsdExchangeRate}},_selectors_multichain__WEBPACK_IMPORTED_MODULE_9__.lT],function(toChain,marketData,conversionRates,toToken,allNetworksByChainId,param,rates){var state=param.state,toTokenExchangeRate=param.toTokenExchangeRate,toTokenUsdExchangeRate=param.toTokenUsdExchangeRate;if((null==toChain?void 0:toChain.chainId)&&!allNetworksByChainId[toChain.chainId]&&toTokenExchangeRate)return{valueInCurrency:toTokenExchangeRate,usd:toTokenUsdExchangeRate};if((null==toChain?void 0:toChain.chainId)&&toToken){var _exchangeRateFromMarketData,nativeAssetId=null==(_getNativeAssetForChainId=(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.ts)(toChain.chainId))?void 0:_getNativeAssetForChainId.assetId,tokenAssetId=(0,_shared_lib_asset_utils__WEBPACK_IMPORTED_MODULE_12__.tO)(toToken.address,(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_21__.Kr)(toChain.chainId));if((0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.FD)(toChain.chainId)&&nativeAssetId&&tokenAssetId){var _getNativeAssetForChainId,_conversionRates_tokenAssetId,_conversionRates_nativeAssetId,_rates_toChain_nativeCurrency_toLowerCase,_rates_toChain_nativeCurrency_toLowerCase1,_conversionRates_tokenAssetId_rate,_conversionRates_nativeAssetId_rate,_rates_toChain_nativeCurrency_toLowerCase_conversionRate,_rates_toChain_nativeCurrency_toLowerCase_usdConversionRate,tokenToNativeAssetRate=(0,_utils__WEBPACK_IMPORTED_MODULE_18__.Hb)(Number(null!=(_conversionRates_tokenAssetId_rate=null==conversionRates||null==(_conversionRates_tokenAssetId=conversionRates[tokenAssetId])?void 0:_conversionRates_tokenAssetId.rate)?_conversionRates_tokenAssetId_rate:null),Number(null!=(_conversionRates_nativeAssetId_rate=null==conversionRates||null==(_conversionRates_nativeAssetId=conversionRates[nativeAssetId])?void 0:_conversionRates_nativeAssetId.rate)?_conversionRates_nativeAssetId_rate:null));return(0,_utils__WEBPACK_IMPORTED_MODULE_18__.np)(tokenToNativeAssetRate,null!=(_rates_toChain_nativeCurrency_toLowerCase_conversionRate=null==rates||null==(_rates_toChain_nativeCurrency_toLowerCase=rates[toChain.nativeCurrency.toLowerCase()])?void 0:_rates_toChain_nativeCurrency_toLowerCase.conversionRate)?_rates_toChain_nativeCurrency_toLowerCase_conversionRate:null,null!=(_rates_toChain_nativeCurrency_toLowerCase_usdConversionRate=null==rates||null==(_rates_toChain_nativeCurrency_toLowerCase1=rates[toChain.nativeCurrency.toLowerCase()])?void 0:_rates_toChain_nativeCurrency_toLowerCase1.usdConversionRate)?_rates_toChain_nativeCurrency_toLowerCase_usdConversionRate:null)}var chainId=toChain.chainId,nativeToCurrencyRate=(0,_selectors_selectors__WEBPACK_IMPORTED_MODULE_4__._po)(state,chainId),nativeToUsdRate=(0,_selectors_selectors__WEBPACK_IMPORTED_MODULE_4__.EgK)(chainId)(state);if((0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.c2)(toToken.address))return{valueInCurrency:nativeToCurrencyRate,usd:nativeToUsdRate};var tokenToNativeAssetRate1=null!=(_exchangeRateFromMarketData=(0,_utils__WEBPACK_IMPORTED_MODULE_18__.e9)(chainId,toToken.address,marketData))?_exchangeRateFromMarketData:(0,_utils__WEBPACK_IMPORTED_MODULE_18__.Hb)(toTokenExchangeRate,nativeToCurrencyRate);return(0,_utils__WEBPACK_IMPORTED_MODULE_18__.np)(tokenToNativeAssetRate1,nativeToCurrencyRate,nativeToUsdRate)}return(0,_utils__WEBPACK_IMPORTED_MODULE_18__.np)()});var getIsQuoteExpired=function(param,currentTimeInMs){var metamask=param.metamask;return(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_19__.gP)(metamask,{},currentTimeInMs)},getBridgeQuotes=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)([function(param){return param.metamask},function(param){return param.bridge.sortOrder},function(param){return param.bridge.selectedQuote}],function(controllerStates,sortOrder,selectedQuote){return(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_19__.Hr)(controllerStates,{sortOrder:sortOrder,selectedQuote:selectedQuote})}),getIsBridgeTx=(0,_shared_modules_selectors_util__WEBPACK_IMPORTED_MODULE_6__._)(getFromChain,getToChain,function(fromChain,toChain){return!!toChain&&null!=fromChain&&!!fromChain.chainId&&fromChain.chainId!==toChain.chainId}),getIsSwap=(0,_shared_modules_selectors_util__WEBPACK_IMPORTED_MODULE_6__._)(getQuoteRequest,function(param){var srcChainId=param.srcChainId,destChainId=param.destChainId;return!!(srcChainId&&destChainId&&(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_21__.Kr)(srcChainId)===(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_21__.Kr)(destChainId))}),_getValidatedSrcAmount=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)(getFromToken,function(state){return state.metamask.quoteRequest.srcTokenAmount},function(fromToken,srcTokenAmount){return srcTokenAmount&&(null==fromToken?void 0:fromToken.decimals)?(0,_metamask_notification_services_controller_push_services__WEBPACK_IMPORTED_MODULE_23__.dU)(srcTokenAmount,Number(fromToken.decimals)).toString():null}),getFromAmountInCurrency=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)(getFromToken,getFromChain,_getValidatedSrcAmount,getFromTokenConversionRate,function(fromToken,fromChain,validatedSrcAmount,param){var _fromTokenToCurrencyExchangeRate_toString,_fromTokenToUsdExchangeRate_toString,fromTokenToCurrencyExchangeRate=param.valueInCurrency,fromTokenToUsdExchangeRate=param.usd;return(null==fromToken?void 0:fromToken.symbol)&&(null==fromChain?void 0:fromChain.chainId)&&validatedSrcAmount&&fromTokenToCurrencyExchangeRate?{valueInCurrency:new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(validatedSrcAmount).mul(new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(null!=(_fromTokenToCurrencyExchangeRate_toString=fromTokenToCurrencyExchangeRate.toString())?_fromTokenToCurrencyExchangeRate_toString:1)),usd:new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(validatedSrcAmount).mul(new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(null!=(_fromTokenToUsdExchangeRate_toString=null==fromTokenToUsdExchangeRate?void 0:fromTokenToUsdExchangeRate.toString())?_fromTokenToUsdExchangeRate_toString:1))}:{valueInCurrency:new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(0),usd:new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(0)}}),getTxAlerts=function(state){return state.bridge.txAlert},getValidationErrors=(0,_shared_modules_selectors_util__WEBPACK_IMPORTED_MODULE_6__._)(getBridgeQuotes,_getValidatedSrcAmount,getFromToken,getFromAmount,function(param){var metamask=param.metamask;return(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_19__.T$)(metamask)},getQuoteRequest,getTxAlerts,_getFromNativeBalance,getFromTokenBalance,function(param,validatedSrcAmount,fromToken,fromTokenInputValue,minimumBalanceForRentExemptionInSOL,quoteRequest,txAlert,nativeBalance,fromTokenBalance){var _activeQuote_quote,_activeQuote_sentAmount,_activeQuote_adjustedReturn,_activeQuote_quote1,_quoteRequest_srcChainId,activeQuote=param.activeQuote,quotesLastFetchedMs=param.quotesLastFetchedMs,isLoading=param.isLoading,quotesRefreshCount=param.quotesRefreshCount,gasIncluded=(null!=(_activeQuote_quote1=null==activeQuote?void 0:activeQuote.quote)?_activeQuote_quote1:{}).gasIncluded,srcChainId=null!=(_quoteRequest_srcChainId=quoteRequest.srcChainId)?_quoteRequest_srcChainId:null==activeQuote||null==(_activeQuote_quote=activeQuote.quote)?void 0:_activeQuote_quote.srcChainId,minimumBalanceToUse=srcChainId&&(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.FD)(srcChainId)?minimumBalanceForRentExemptionInSOL:"0";return{isTxAlertPresent:!!txAlert,isNoQuotesAvailable:!!(!activeQuote&&(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_24__.Al)(quoteRequest)&&quotesLastFetchedMs&&!isLoading&&quotesRefreshCount>0),isInsufficientGasBalance:!!(nativeBalance&&!activeQuote&&validatedSrcAmount&&fromToken&&!gasIncluded&&((0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.c2)(fromToken.address)?new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(nativeBalance).sub(minimumBalanceToUse).lte(validatedSrcAmount):new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(nativeBalance).lte(0))),isInsufficientGasForQuote:!!(nativeBalance&&activeQuote&&fromToken&&fromTokenInputValue&&!gasIncluded&&((0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.c2)(fromToken.address)?new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(nativeBalance).sub(activeQuote.totalMaxNetworkFee.amount).sub(activeQuote.sentAmount.amount).sub(minimumBalanceToUse).lte(0):new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(nativeBalance).lte(activeQuote.totalMaxNetworkFee.amount))),isInsufficientBalance:!(!validatedSrcAmount||!fromTokenBalance||isNaN(Number(fromTokenBalance)))&&new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(fromTokenBalance).lt(validatedSrcAmount),isEstimatedReturnLow:null!=activeQuote&&null!=(_activeQuote_sentAmount=activeQuote.sentAmount)&&!!_activeQuote_sentAmount.valueInCurrency&&null!=activeQuote&&null!=(_activeQuote_adjustedReturn=activeQuote.adjustedReturn)&&!!_activeQuote_adjustedReturn.valueInCurrency&&!!fromTokenInputValue&&new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(activeQuote.adjustedReturn.valueInCurrency).lt(new bignumber_js__WEBPACK_IMPORTED_MODULE_2__.BigNumber(1-_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_25__.kU).times(activeQuote.sentAmount.valueInCurrency))}}),getWasTxDeclined=function(state){return state.bridge.wasTxDeclined};(0,_shared_modules_selectors_util__WEBPACK_IMPORTED_MODULE_6__._)(getToChain,function(state){return hasSolanaAccounts(state)},function(toChain,hasSolanaAccount){return!!toChain&&(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.FD)(toChain.chainId)&&!hasSolanaAccount});var getIsToOrFromSolana=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)(getFromChain,getToChain,function(fromChain,toChain){if(!(null==fromChain?void 0:fromChain.chainId)||!(null==toChain?void 0:toChain.chainId))return!1;var fromChainIsSolana=(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.FD)(fromChain.chainId);return(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.FD)(toChain.chainId)!==fromChainIsSolana}),getIsSolanaSwap=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)(getFromChain,getToChain,function(fromChain,toChain){if(!(null==fromChain?void 0:fromChain.chainId)||!(null==toChain?void 0:toChain.chainId))return!1;var fromChainIsSolana=(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.FD)(fromChain.chainId),toChainIsSolana=(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_20__.FD)(toChain.chainId);return fromChainIsSolana&&toChainIsSolana}),getHardwareWalletName=function(state){switch((0,_selectors_selectors__WEBPACK_IMPORTED_MODULE_4__.ks6)(state)){case _shared_constants_hardware_wallets__WEBPACK_IMPORTED_MODULE_11__.gm.ledger:return _shared_constants_hardware_wallets__WEBPACK_IMPORTED_MODULE_11__.GZ.ledger;case _shared_constants_hardware_wallets__WEBPACK_IMPORTED_MODULE_11__.gm.trezor:return _shared_constants_hardware_wallets__WEBPACK_IMPORTED_MODULE_11__.GZ.trezor;case _shared_constants_hardware_wallets__WEBPACK_IMPORTED_MODULE_11__.gm.lattice:return _shared_constants_hardware_wallets__WEBPACK_IMPORTED_MODULE_11__.GZ.lattice;case _shared_constants_hardware_wallets__WEBPACK_IMPORTED_MODULE_11__.gm.oneKey:return _shared_constants_hardware_wallets__WEBPACK_IMPORTED_MODULE_11__.GZ.oneKey;default:return}},getIsUnifiedUIEnabled=(0,reselect__WEBPACK_IMPORTED_MODULE_22__.Mz)([getBridgeFeatureFlags,function(_state,chainId){return chainId}],function(bridgeFeatureFlags,chainId){if(null==chainId)return!1;var _bridgeFeatureFlags_chains,caipChainId=(0,_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_21__.Kr)(chainId);return null!=bridgeFeatureFlags&&null!=(_bridgeFeatureFlags_chains=bridgeFeatureFlags.chains)&&!!_bridgeFeatureFlags_chains[caipChainId]&&!!("isSingleSwapBridgeButtonEnabled"in bridgeFeatureFlags.chains[caipChainId]&&bridgeFeatureFlags.chains[caipChainId].isSingleSwapBridgeButtonEnabled)})},"./ui/hooks/useTokenBalances.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{mz:()=>stringifyBalance,mK:()=>useTokenBalances,H6:()=>useTokenTracker});var es=__webpack_require__("./node_modules/react-redux/es/index.js"),bn=__webpack_require__("./node_modules/bn.js/lib/bn.js"),bn_default=__webpack_require__.n(bn),actions=__webpack_require__("./ui/store/actions.ts"),metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts"),networks=__webpack_require__("./ui/selectors/multichain/networks.ts"),react=__webpack_require__("./node_modules/react/index.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}let hooks_useMultiPolling=function(usePollingOptions){var pollingTokens=(0,react.useRef)(new Map);(0,react.useEffect)(function(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=usePollingOptions.input[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)!function(){var input=_step.value,key=JSON.stringify(input);pollingTokens.current.has(key)||usePollingOptions.startPolling(input).then(function(token){return pollingTokens.current.set(key,token)})}()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion1=!0,_didIteratorError1=!1,_iteratorError1=void 0;try{for(var _step1,_iterator1=pollingTokens.current.entries()[Symbol.iterator]();!(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done);_iteratorNormalCompletion1=!0)!function(){var _step_value=_sliced_to_array(_step1.value,2),inputKey=_step_value[0],token=_step_value[1];usePollingOptions.input.some(function(i){return inputKey===JSON.stringify(i)})||(usePollingOptions.stopPollingByPollingToken(token),pollingTokens.current.delete(inputKey))}()}catch(err){_didIteratorError1=!0,_iteratorError1=err}finally{try{_iteratorNormalCompletion1||null==_iterator1.return||_iterator1.return()}finally{if(_didIteratorError1)throw _iteratorError1}}},[usePollingOptions.input&&JSON.stringify(usePollingOptions.input)]),(0,react.useEffect)(function(){return function(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=pollingTokens.current.values()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var token=_step.value;usePollingOptions.stopPollingByPollingToken(token)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},[])};var useTokenBalances=function(){var chainIds=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chainIds,tokenBalances=(0,es.d4)(metamask.HF),enabledChainIds=(0,es.d4)(networks.Rq),pollableChains=chainIds&&chainIds.length>0?chainIds:enabledChainIds;return hooks_useMultiPolling({startPolling:actions.tokenBalancesStartPolling,stopPollingByPollingToken:actions.tokenBalancesStopPollingByPollingToken,input:[pollableChains]}),{tokenBalances:tokenBalances}},useTokenTracker=function(param){var chainId=param.chainId,tokens=param.tokens,address=param.address,hideZeroBalanceTokens=param.hideZeroBalanceTokens,tokenBalances=useTokenBalances({chainIds:[chainId]}).tokenBalances;return{tokensWithBalances:tokens.reduce(function(acc,token){var _tokenBalances_address_chainId,_tokenBalances_address,_tokenBalances_address_chainId_token_address,hexBalance=null!=(_tokenBalances_address_chainId_token_address=null==(_tokenBalances_address=tokenBalances[address])||null==(_tokenBalances_address_chainId=_tokenBalances_address[chainId])?void 0:_tokenBalances_address_chainId[token.address])?_tokenBalances_address_chainId_token_address:"0x0";if("0x0"!==hexBalance||!hideZeroBalanceTokens){var decimalBalance=(0,conversion_utils.I0)(hexBalance);acc.push({address:token.address,symbol:token.symbol,decimals:token.decimals,balance:decimalBalance,balanceError:null,string:stringifyBalance(new(bn_default())(decimalBalance),new(bn_default())(token.decimals))})}return acc},[])}};function stringifyBalance(balance,bnDecimals){var balanceDecimals=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(balance.eq(new(bn_default())(0)))return"0";var decimals=parseInt(bnDecimals.toString(),10);if(0===decimals)return balance.toString();var bal=balance.toString(),len=bal.length,decimalIndex=len-decimals,prefix="";if(decimalIndex<=0){for(;prefix.length<=-1*decimalIndex;)prefix+="0",len+=1;bal=prefix+bal,decimalIndex=1}var whole=bal.substr(0,len-decimals);if(0===balanceDecimals)return whole;var fractional=bal.substr(decimalIndex,balanceDecimals);if(/0+$/u.test(fractional)){var withOnlySigZeroes=bal.substr(decimalIndex).replace(/0+$/u,"");return withOnlySigZeroes.length>0&&(withOnlySigZeroes=".".concat(withOnlySigZeroes)),"".concat(whole).concat(withOnlySigZeroes)}return"".concat(whole,".").concat(fractional)}},"./ui/pages/asset/util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{HC:()=>getShortDateFormatterV2,x8:()=>findAssetByAddress}),__webpack_require__("./node_modules/luxon/src/luxon.js");var getShortDateFormatterV2=function(){return Intl.DateTimeFormat(navigator.language,{year:"numeric",month:"short",day:"numeric"})},findAssetByAddress=function(data,address,chainId){if(!chainId)return console.error("Chain ID is required."),null;var tokens=data[chainId];return tokens?address?tokens.find(function(token){return token.address&&token.address.toLowerCase()===address.toLowerCase()}):tokens.find(function(token){return!token.address}):(console.warn("No tokens found for chainId: ".concat(chainId)),null)}},"./ui/selectors/assets.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x5:()=>getAccountAssets,DQ:()=>getAssetsMetadata,D7:()=>getAssetsRates,Zj:()=>getDefiPositions,iu:()=>getHistoricalMultichainAggregatedBalance,Ok:()=>getMultiChainAssets,q6:()=>getMultichainAggregatedBalance,NM:()=>getMultichainNativeTokenBalance,$T:()=>getTokenBalancesEvm});var token_selectors=__webpack_require__("./node_modules/@metamask/assets-controllers/dist/selectors/token-selectors.mjs"),caip_types=__webpack_require__("./node_modules/@metamask/utils/dist/caip-types.mjs"),bignumber=__webpack_require__("./node_modules/bignumber.js/bignumber.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),network=__webpack_require__("./shared/constants/network.ts"),util=__webpack_require__("./shared/modules/selectors/util.js"),bn=__webpack_require__("./node_modules/bn.js/lib/bn.js"),bn_default=__webpack_require__.n(bn),dist_util=__webpack_require__("./node_modules/@metamask/controller-utils/dist/util.mjs"),useTokenBalances=__webpack_require__("./ui/hooks/useTokenBalances.ts"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts");function calculateTokenBalance(param){var isNative=param.isNative,chainId=param.chainId,address=param.address,decimals=param.decimals,nativeBalances=param.nativeBalances,selectedAccountTokenBalancesAcrossChains=param.selectedAccountTokenBalancesAcrossChains;if(isNative){var nativeTokenBalanceHex=null==nativeBalances?void 0:nativeBalances[chainId];balance=nativeTokenBalanceHex&&"0x0"!==nativeTokenBalanceHex?(0,useTokenBalances.mz)(new(bn_default())((0,conversion_utils.I0)(nativeTokenBalanceHex)),new(bn_default())(decimals),5):"0"}else{var balance,_selectedAccountTokenBalancesAcrossChains_chainId,_selectedAccountTokenBalancesAcrossChains_chainId1,hexBalance=(null==selectedAccountTokenBalancesAcrossChains||null==(_selectedAccountTokenBalancesAcrossChains_chainId=selectedAccountTokenBalancesAcrossChains[chainId])?void 0:_selectedAccountTokenBalancesAcrossChains_chainId[(0,dist_util.sX)(address)])||(null==selectedAccountTokenBalancesAcrossChains||null==(_selectedAccountTokenBalancesAcrossChains_chainId1=selectedAccountTokenBalancesAcrossChains[chainId])?void 0:_selectedAccountTokenBalancesAcrossChains_chainId1[address]);balance=hexBalance&&"0x0"!==hexBalance?(0,useTokenBalances.mz)(new(bn_default())((0,conversion_utils.I0)(hexBalance)),new(bn_default())(decimals)):"0"}return balance}function calculateTokenFiatAmount(param){var _marketData_chainId_address,_marketData_chainId,_marketData_chainId_address1,_marketData_chainId1,_currencyRates_baseCurrency,_currencyRates_symbol,token=param.token,chainId=param.chainId,balance=param.balance,marketData=param.marketData,currencyRates=param.currencyRates,address=token.address,isNative=token.isNative,symbol=token.symbol,baseCurrency=null==(_marketData_chainId=marketData[chainId])||null==(_marketData_chainId_address=_marketData_chainId[address])?void 0:_marketData_chainId_address.currency,tokenMarketPrice=Number(null==(_marketData_chainId1=marketData[chainId])||null==(_marketData_chainId_address1=_marketData_chainId1[address])?void 0:_marketData_chainId_address1.price)||0,tokenExchangeRate=(null==(_currencyRates_baseCurrency=currencyRates[baseCurrency])?void 0:_currencyRates_baseCurrency.conversionRate)||0,parsedBalance=parseFloat(String(balance));return isNative&&currencyRates?((null==(_currencyRates_symbol=currencyRates[symbol])?void 0:_currencyRates_symbol.conversionRate)||0)*parsedBalance:tokenMarketPrice?tokenMarketPrice*tokenExchangeRate*parsedBalance:null}var metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),asset_util=__webpack_require__("./ui/pages/asset/util.ts"),accounts=__webpack_require__("./ui/selectors/accounts.ts"),multichain=__webpack_require__("./ui/selectors/multichain.ts"),selectors=__webpack_require__("./ui/selectors/selectors.js"),networks=__webpack_require__("./ui/selectors/multichain/networks.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function getAccountAssets(state){return state.metamask.accountsAssets}function getAssetsMetadata(state){return state.metamask.assetsMetadata}function getAssetsRates(state){return state.metamask.conversionRates}function getDefiPositions(state){var _state_metamask;return null==state||null==(_state_metamask=state.metamask)?void 0:_state_metamask.allDeFiPositions}var getTokenBalancesEvm=(0,util._)(selectors.xR5,selectors.vF0,metamask.HF,function(_state,accountAddress){return accountAddress},selectors.HWx,selectors.$4m,selectors.lX9,selectors.Xn,selectors.SLx,function(selectedAccountTokensChains,nativeBalances,tokenBalances,selectedAccountAddress,marketData,currencyRates,preferences,isOnCurrentNetwork,currentNetwork){var hideZeroBalanceTokens=preferences.hideZeroBalanceTokens,selectedAccountTokenBalancesAcrossChains=tokenBalances[selectedAccountAddress],isTestNetwork=network.YPx.includes(currentNetwork.chainId),filteredAccountTokensChains=Object.fromEntries(Object.entries(selectedAccountTokensChains).filter(function(param){var chainId=_sliced_to_array(param,1)[0];return isTestNetwork?network.YPx.includes(chainId):!network.YPx.includes(chainId)})),tokensWithBalance=[];return Object.entries(filteredAccountTokensChains).forEach(function(param){var _param=_sliced_to_array(param,2),stringChainKey=_param[0];_param[1].forEach(function(token){var title,balance=calculateTokenBalance({isNative:token.isNative,chainId:stringChainKey,address:token.address,decimals:token.decimals,nativeBalances:nativeBalances,selectedAccountTokenBalancesAcrossChains:selectedAccountTokenBalancesAcrossChains})||"0",tokenFiatAmount=calculateTokenFiatAmount({token:token,chainId:stringChainKey,balance:balance,marketData:marketData,currencyRates:currencyRates});(!hideZeroBalanceTokens||"0"!==balance||token.isNative&&isOnCurrentNetwork)&&(title=token.isNative?"ETH"===token.symbol?"Ethereum":token.symbol:token.name||token.symbol,tokensWithBalance.push(_object_spread_props(_object_spread({},token),{address:token.address,balance:balance,tokenFiatAmount:tokenFiatAmount,chainId:stringChainKey,string:String(balance),primary:"",secondary:0,title:title})))})}),tokensWithBalance}),getMultiChainAssets=(0,util._)(function(_state,selectedAccount){return selectedAccount},multichain.aQ,getAccountAssets,getAssetsMetadata,getAssetsRates,selectors.lX9,function(selectedAccountAddress,multichainBalances,accountAssets,assetsMetadata,assetRates,preferences){var hideZeroBalanceTokens=preferences.hideZeroBalanceTokens,assetIds=(null==accountAssets?void 0:accountAssets[selectedAccountAddress.id])||[],balances=null==multichainBalances?void 0:multichainBalances[selectedAccountAddress.id],allAssets=[];return assetIds.forEach(function(assetId){var _assetRates_assetId,_metadata_units_,_parseCaipAssetType=(0,caip_types.Ts)(assetId),chainId=_parseCaipAssetType.chainId,isNative="slip44"===_parseCaipAssetType.assetNamespace,balance=(null==balances?void 0:balances[assetId])||{amount:"0",unit:""},rate=null==assetRates||null==(_assetRates_assetId=assetRates[assetId])?void 0:_assetRates_assetId.rate,balanceInFiat=rate?new bignumber.BigNumber(balance.amount).times(rate).toNumber():null,assetMetadataFallback={name:balance.unit,symbol:balance.unit||"",fungible:!0,units:[{name:assetId,symbol:balance.unit||"",decimals:0}]},metadata=assetsMetadata[assetId]||assetMetadataFallback,decimals=(null==(_metadata_units_=metadata.units[0])?void 0:_metadata_units_.decimals)||0;(!hideZeroBalanceTokens||"0"!==balance.amount||isNative)&&allAssets.push({title:metadata.name,address:assetId,symbol:metadata.symbol,image:metadata.iconUrl,decimals:decimals,chainId:chainId,isNative:isNative,primary:balance.amount,secondary:balanceInFiat,string:"",tokenFiatAmount:balanceInFiat,isStakeable:!1})}),allAssets});(0,util._)(function(state){return state},function(_state,account){return account},function(_state,_account,tokenAddress){return tokenAddress},function(_state,_account,_tokenAddress,_chainId){return _chainId},function(state,account,tokenAddress,chainId){var accountToUse=null!=account?account:(0,accounts._r)(state),assetsToSearch=(0,multichain.Bu)(state,accountToUse)?(0,selectors.c3v)(state):(0,lodash.groupBy)(getMultiChainAssets(state,accountToUse),"chainId");return(0,asset_util.x8)(assetsToSearch,tokenAddress,chainId)});var zeroBalanceAssetFallback={amount:0,unit:""},getMultichainAggregatedBalance=(0,util._)(function(_state,selectedAccount){return selectedAccount},multichain.aQ,getAccountAssets,getAssetsRates,function(selectedAccountAddress,multichainBalances,accountAssets,assetRates){var id=(null!=selectedAccountAddress?selectedAccountAddress:{}).id,assetIds=id&&(null==accountAssets?void 0:accountAssets[id])||[],balances=id?null==multichainBalances?void 0:multichainBalances[id]:{},aggregatedBalance=new bignumber.BigNumber(0);return assetIds.forEach(function(assetId){var _assetRates_assetId,balance=(null==balances?void 0:balances[assetId])||zeroBalanceAssetFallback,rate=(null==assetRates||null==(_assetRates_assetId=assetRates[assetId])?void 0:_assetRates_assetId.rate)||"0",balanceInFiat=new bignumber.BigNumber(balance.amount).times(rate);aggregatedBalance=aggregatedBalance.plus(balanceInFiat)}),aggregatedBalance.toNumber()}),getHistoricalMultichainAggregatedBalance=(0,util._)(function(_state,selectedAccount){return selectedAccount},multichain.aQ,getAccountAssets,getAssetsRates,function(selectedAccountAddress,multichainBalances,accountAssets,assetRates){var assetIds=(null==accountAssets?void 0:accountAssets[selectedAccountAddress.id])||[],balances=null==multichainBalances?void 0:multichainBalances[selectedAccountAddress.id],historicalBalances={PT1H:{balance:0,percentChange:0,amountChange:0},P1D:{balance:0,percentChange:0,amountChange:0},P7D:{balance:0,percentChange:0,amountChange:0},P14D:{balance:0,percentChange:0,amountChange:0},P30D:{balance:0,percentChange:0,amountChange:0},P200D:{balance:0,percentChange:0,amountChange:0},P1Y:{balance:0,percentChange:0,amountChange:0}},totalCurrentBalance=new bignumber.BigNumber(0);assetIds.forEach(function(assetId){var _assetRate_marketData,balance=(null==balances?void 0:balances[assetId])||zeroBalanceAssetFallback,assetRate=null==assetRates?void 0:assetRates[assetId];if((null==assetRate||null==(_assetRate_marketData=assetRate.marketData)?void 0:_assetRate_marketData.pricePercentChange)&&assetRate.rate){var pricePercentChange=assetRate.marketData.pricePercentChange,currentBalanceInFiat=new bignumber.BigNumber(balance.amount).times(assetRate.rate||"0");totalCurrentBalance=totalCurrentBalance.plus(currentBalanceInFiat),Object.entries(pricePercentChange).forEach(function(param){var _param=_sliced_to_array(param,2),period=_param[0],percentChange=_param[1];if(period in historicalBalances){var historicalBalance=currentBalanceInFiat.div(Number((1+percentChange/100).toFixed(8))).toNumber();historicalBalances[period].balance+=historicalBalance}})}});var totalCurrentBalanceNum=totalCurrentBalance.toNumber();return Object.entries(historicalBalances).forEach(function(param){var _param=_sliced_to_array(param,2),data=(_param[0],_param[1]);if(0!==totalCurrentBalanceNum){var amountChange=totalCurrentBalanceNum-data.balance,percentChange=amountChange/data.balance*100;data.amountChange=Number(amountChange.toFixed(8)),data.percentChange=Number(percentChange.toFixed(8))}}),historicalBalances}),getMultichainNativeAssetType=(0,util._)(accounts._r,getAccountAssets,networks.O4,function(selectedAccount,accountAssets,currentNetwork){return((null==accountAssets?void 0:accountAssets[selectedAccount.id])||[]).find(function(assetType){var _parseCaipAssetType=(0,caip_types.Ts)(assetType),chainId=_parseCaipAssetType.chainId,assetNamespace=_parseCaipAssetType.assetNamespace;return chainId===currentNetwork.chainId&&"slip44"===assetNamespace})}),getMultichainNativeTokenBalance=(0,util._)(function(_state,selectedAccount){return selectedAccount},multichain.aQ,getMultichainNativeAssetType,function(selectedAccountAddress,multichainBalances,nativeAssetType){var balances=null==multichainBalances?void 0:multichainBalances[selectedAccountAddress.id];return nativeAssetType&&(null==balances?void 0:balances[nativeAssetType])?balances[nativeAssetType]:zeroBalanceAssetFallback});(0,util._)(function(param){var metamask=param.metamask,initialState={accountTree:metamask.accountTree,internalAccounts:metamask.internalAccounts,allTokens:metamask.allTokens,allIgnoredTokens:metamask.allIgnoredTokens,tokenBalances:metamask.tokenBalances,marketData:metamask.marketData,currencyRates:metamask.currencyRates,currentCurrency:metamask.currentCurrency,networkConfigurationsByChainId:metamask.networkConfigurationsByChainId,accountsByChainId:metamask.accountsByChainId};return _object_spread({},initialState,{accountsAssets:metamask.accountsAssets,assetsMetadata:metamask.assetsMetadata,balances:metamask.balances,conversionRates:metamask.conversionRates})},function(assetListState){return(0,token_selectors.w)(assetListState)})},"./ui/selectors/multichain-accounts/account-tree.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{gN:()=>getAccountGroupWithInternalAccounts,SL:()=>getAccountTree,X1:()=>getAllAccountGroups,zH:()=>getInternalAccountBySelectedAccountGroupAndCaip,DC:()=>getInternalAccountListSpreadByScopesByGroupId,No:()=>getInternalAccountsFromGroupById,VR:()=>getMultichainAccountGroupById,Mx:()=>getMultichainAccountsByWalletId,uW:()=>getNetworkAddressCount,ER:()=>getSelectedAccountGroup,QI:()=>getWallet,v:()=>getWalletIdAndNameByAccountAddress,lh:()=>getWalletsWithAccounts,F8:()=>getWalletsWithAccountsSimplified});var dist=__webpack_require__("./node_modules/@metamask/account-api/dist/index.mjs"),keyring_api_dist=__webpack_require__("./node_modules/@metamask/keyring-api/dist/index.mjs"),reselect=__webpack_require__("./node_modules/reselect/dist/reselect.mjs"),caip_types=__webpack_require__("./node_modules/@metamask/utils/dist/caip-types.mjs"),util=__webpack_require__("./shared/modules/selectors/util.js"),selectors=__webpack_require__("./ui/selectors/selectors.js"),accounts=__webpack_require__("./ui/selectors/accounts.ts"),networks=__webpack_require__("./ui/selectors/multichain/networks.ts"),constants=__webpack_require__("./node_modules/@metamask/multichain-network-controller/dist/constants.mjs"),network=__webpack_require__("./shared/constants/network.ts"),network_utils=__webpack_require__("./shared/modules/network.utils.ts"),isTestNetwork=function(chainId){return(0,caip_types.K4)(chainId)?chainId.startsWith("eip155:")?network.YPx.includes((0,network_utils.ph)(chainId)):constants.mk.includes(chainId):network.YPx.includes(chainId)},utils=__webpack_require__("./ui/selectors/multichain-accounts/utils.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _to_consumable_array(arr){return _array_without_holes(arr)||_iterable_to_array(arr)||_unsupported_iterable_to_array(arr)||_non_iterable_spread()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var getAccountTree=(0,util._)(function(state){return state.metamask.accountTree},function(accountTree){return accountTree}),createConsolidatedWallets=function(internalAccounts,accountTree,connectedAccounts,selectedAccount,pinnedAccounts,hiddenAccounts,getAccountsForGroup){var pinnedAccountsSet=new Set(pinnedAccounts),hiddenAccountsSet=new Set(hiddenAccounts),connectedAccountIdsSet=new Set(connectedAccounts.map(function(account){return account.id})),accountsById=internalAccounts.reduce(function(accounts,account){return accounts[account.id]=account,accounts},{});return Object.entries(accountTree.wallets).reduce(function(consolidatedWallets,param){var _param=_sliced_to_array(param,2),walletId=_param[0],wallet=_param[1];consolidatedWallets[walletId]={id:walletId,type:wallet.type,metadata:wallet.metadata,groups:{}};var allAccountIdsInWallet=Array.from(new Set(Object.values(wallet.groups).flatMap(function(group){return group.accounts})));return Object.entries(wallet.groups).forEach(function(param,groupIndex){var _param=_sliced_to_array(param,2),groupId=_param[0],group=_param[1],accountsFromGroup=getAccountsForGroup(group.accounts,groupIndex,allAccountIdsInWallet,accountsById).map(function(accountId){var accountWithMetadata=_object_spread({},accountsById[accountId]);return accountWithMetadata.pinned=pinnedAccountsSet.has(accountWithMetadata.address),accountWithMetadata.hidden=hiddenAccountsSet.has(accountWithMetadata.address),accountWithMetadata.active=selectedAccount.id===accountWithMetadata.id&&connectedAccountIdsSet.has(accountWithMetadata.id),accountWithMetadata});consolidatedWallets[walletId].groups[groupId]={id:groupId,type:group.type,metadata:group.metadata,accounts:accountsFromGroup}}),consolidatedWallets},{})},getWalletsWithAccounts=(0,util._)(selectors.zi3,getAccountTree,selectors.v8m,accounts._r,selectors.DRO,selectors.Znp,function(internalAccounts,accountTree,connectedAccounts,selectedAccount,pinnedAccounts,hiddenAccounts){return createConsolidatedWallets(internalAccounts,accountTree,connectedAccounts,selectedAccount,pinnedAccounts,hiddenAccounts,function(groupAccounts){return groupAccounts})}),getWalletsWithAccountsSimplified=(0,util._)(selectors.zi3,getAccountTree,selectors.v8m,accounts._r,selectors.DRO,selectors.Znp,function(internalAccounts,accountTree,connectedAccounts,selectedAccount,pinnedAccounts,hiddenAccounts){return createConsolidatedWallets(internalAccounts,accountTree,connectedAccounts,selectedAccount,pinnedAccounts,hiddenAccounts,function(_,groupIndex,allAccountIdsInWallet,accountsById){return 0===groupIndex?Object.keys(accountsById).filter(function(accountId){return allAccountIdsInWallet.includes(accountId)}):[]})}),getWalletIdAndNameByAccountAddress=(0,util._)(getWalletsWithAccounts,function(_,address){return address},function(walletsWithAccounts,address){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=Object.entries(walletsWithAccounts)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step_value=_sliced_to_array(_step.value,2),walletId=_step_value[0],wallet=_step_value[1],_iteratorNormalCompletion1=!0,_didIteratorError1=!1,_iteratorError1=void 0;try{for(var _step1,_iterator1=Object.values(wallet.groups)[Symbol.iterator]();!(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done);_iteratorNormalCompletion1=!0)if(_step1.value.accounts.find(function(acc){return acc.address.toLowerCase()===address.toLowerCase()}))return{id:walletId,name:wallet.metadata.name}}catch(err){_didIteratorError1=!0,_iteratorError1=err}finally{try{_iteratorNormalCompletion1||null==_iterator1.return||_iterator1.return()}finally{if(_didIteratorError1)throw _iteratorError1}}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null}),getMultichainAccountGroupById=(0,util._)(getAccountTree,function(_,accountId){return accountId},function(accountTree,accountId){var wallet=accountTree.wallets[(0,utils.q)(accountId)];return null==wallet?void 0:wallet.groups[accountId]}),getAllAccountGroups=(0,util._)(getAccountTree,function(accountTree){return Object.values(accountTree.wallets).flatMap(function(wallet){return Object.values(wallet.groups)})}),getMultichainAccountGroups=(0,util._)(getAllAccountGroups,function(accountGroups){return accountGroups.filter(function(group){return group.id.startsWith(dist.ZG.Entropy)})});(0,util._)(getAllAccountGroups,function(accountGroups){return accountGroups.filter(function(group){return!group.id.startsWith(dist.ZG.Entropy)})});var getAccountGroupWithInternalAccounts=(0,util._)(getAllAccountGroups,accounts.at,function(accountGroups,internalAccounts){return accountGroups.map(function(accountGroup){return _object_spread_props(_object_spread({},accountGroup),{accounts:accountGroup.accounts.map(function(accountId){return internalAccounts.find(function(account){return account.id===accountId})}).filter(function(account){return void 0!==account})})})}),getMultichainAccountsToScopesMap=(0,util._)(getMultichainAccountGroups,accounts.at,function(multichainAccounts,internalAccounts){var multichainAccountsToScopesMap=new Map;return multichainAccounts.forEach(function(multichainAccount){var multichainAccountIdToCaip25Ids=new Map;Object.values(multichainAccount.accounts).forEach(function(internalAccountId){var internalAccount=internalAccounts.find(function(account){return account.id===internalAccountId});if(internalAccount){var caip25Id=_sliced_to_array(internalAccount.scopes,1)[0];if(caip25Id){var _caip25Id_split=_sliced_to_array(caip25Id.split(":"),2),namespace=_caip25Id_split[0],reference=_caip25Id_split[1];multichainAccountIdToCaip25Ids.set(caip25Id,"".concat(namespace,":").concat(reference,":").concat(internalAccount.address))}}}),multichainAccountsToScopesMap.set(multichainAccount.id,multichainAccountIdToCaip25Ids)}),multichainAccountsToScopesMap});(0,util._)(getMultichainAccountsToScopesMap,function(_,accountGroup,scope){return{accountGroup:accountGroup,scope:scope}},function(multichainAccountsToScopesMap,param){var accountGroup=param.accountGroup,scope=param.scope,multichainAccountGroup=multichainAccountsToScopesMap.get(accountGroup.id);if(multichainAccountGroup)return multichainAccountGroup.get(scope)}),(0,util._)(getAccountGroupWithInternalAccounts,function(_,scopes){return scopes},function(accountGroupsWithInternalAccounts,scopes){var _scopes_reduce=scopes.reduce(function(acc,scope){return _sliced_to_array(scope.split(":"),1)[0]===caip_types.wV.Eip155?acc.hasEvmScope=!0:acc.cleanedScopes.push(scope),acc},{cleanedScopes:[],hasEvmScope:!1}),cleanedScopes=_scopes_reduce.cleanedScopes;if(_scopes_reduce.hasEvmScope)return accountGroupsWithInternalAccounts;var scopesToAccountGroupsMap=new Map;return cleanedScopes.forEach(function(scope){var accountGroupsWithScope=accountGroupsWithInternalAccounts.filter(function(accountGroup){return accountGroup.accounts.some(function(internalAccount){return internalAccount.scopes.includes(scope)})});scopesToAccountGroupsMap.set(scope,accountGroupsWithScope)}),Array.from(scopesToAccountGroupsMap.values()).flat()});var getGroupByGroupId=function(wallets,groupId){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=Object.values(wallets)[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var wallet=_step.value;if(wallet.groups[groupId])return wallet.groups[groupId]}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null},getInternalAccountFromGroup=function(group,caipChainId,internalAccounts){if(!group)return null;var sanitizedChainId=(0,utils.g)(caipChainId),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=group.accounts[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var internalAccount=internalAccounts[_step.value];if(null==internalAccount?void 0:internalAccount.scopes.includes(sanitizedChainId))return internalAccount}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return null};(0,util._)(getAccountTree,accounts.pW,function(_,groupId,caipChainId){return{groupId:groupId,caipChainId:caipChainId}},function(accountTree,internalAccounts,param){var groupId=param.groupId,caipChainId=param.caipChainId;return getInternalAccountFromGroup(getGroupByGroupId(accountTree.wallets,groupId),caipChainId,internalAccounts)});var getSelectedAccountGroup=(0,util._)(getAccountTree,function(accountTree){return accountTree.selectedAccountGroup}),getInternalAccountBySelectedAccountGroupAndCaip=(0,util._)(getAccountTree,accounts.pW,getSelectedAccountGroup,function(_,caipChainId){return caipChainId},function(accountTree,internalAccounts,selectedAccountGroup,caipChainId){return selectedAccountGroup?getInternalAccountFromGroup(getGroupByGroupId(accountTree.wallets,selectedAccountGroup),caipChainId,internalAccounts):null}),getWallet=(0,reselect.Mz)(function(state){var _state_metamask_accountTree,_state_metamask;return null==(_state_metamask=state.metamask)||null==(_state_metamask_accountTree=_state_metamask.accountTree)?void 0:_state_metamask_accountTree.wallets},function(_,walletId){return walletId},function(wallets,walletId){return null==wallets?void 0:wallets[walletId]}),getMultichainAccountsByWalletId=(0,reselect.Mz)(getAccountTree,function(_,walletId){return walletId},function(accountTree,walletId){var wallet=accountTree.wallets[walletId];return null==wallet?void 0:wallet.groups}),getInternalAccountsFromGroupById=(0,reselect.Mz)(getAccountTree,accounts.pW,function(_,groupId){return groupId},function(accountTree,internalAccounts,groupId){if(!groupId)return[];var group=getGroupByGroupId(accountTree.wallets,groupId);return group?group.accounts.map(function(accountId){return internalAccounts[accountId]}).filter(function(account){return!!account}):[]});(0,util._)([getAccountGroupWithInternalAccounts,function(_state,addresses){return new Set(addresses.map(function(address){return address.toLowerCase()}))}],function(accountGroupWithInternalAccounts,addressesSet){var matchingGroups=new Set;return accountGroupWithInternalAccounts.forEach(function(group){group.accounts.some(function(account){return addressesSet.has(account.address.toLowerCase())})&&matchingGroups.add(group)}),_to_consumable_array(matchingGroups)});var getInternalAccountListSpreadByScopesByGroupId=(0,util._)([getInternalAccountsFromGroupById,networks.lI],function(internalAccounts,networks){var caipNetworks=networks[0],evmNetworkIds=new Set(Object.keys(caipNetworks).filter(function(chainId){return chainId.startsWith(caip_types.wV.Eip155)&&!isTestNetwork(chainId)})),result=[];return internalAccounts.forEach(function(account){(account.type===keyring_api_dist.j0.Eoa?_to_consumable_array(evmNetworkIds):account.scopes||[]).forEach(function(scope){if(!isTestNetwork(scope)){var _caipNetworks_scope;result.push({account:account,scope:scope,networkName:(null==(_caipNetworks_scope=caipNetworks[scope])?void 0:_caipNetworks_scope.name)||"Unknown Network"})}})}),result}),getNetworkAddressCount=(0,util._)([getInternalAccountListSpreadByScopesByGroupId],function(accounts){return accounts?accounts.length:0})},"./ui/selectors/multichain-accounts/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>getSanitizedChainId,q:()=>extractWalletIdFromGroupId});var getSanitizedChainId=function(chainId){return chainId.startsWith("eip155")?"eip155:0":chainId},extractWalletIdFromGroupId=function(accountGroupId){if(accountGroupId.startsWith("snap:")){if(accountGroupId.includes("@")&&accountGroupId.includes("/")){var lastSlashIndex=accountGroupId.lastIndexOf("/");return accountGroupId.substring(0,lastSlashIndex)}return accountGroupId.includes("/")?accountGroupId.split("/").slice(0,-1).join("/"):accountGroupId}return accountGroupId.split("/")[0]}}}]);