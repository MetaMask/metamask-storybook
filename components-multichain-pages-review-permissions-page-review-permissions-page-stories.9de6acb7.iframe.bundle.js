"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[36957],{"./ui/components/multichain/disconnect-all-modal/disconnect-all-modal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>DisconnectAllModal,y:()=>DisconnectType});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_component_library__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/components/component-library/index.ts"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/hooks/useI18nContext.js"),DisconnectType=function(DisconnectType){return DisconnectType.Account="disconnectAllAccountsText",DisconnectType.Snap="disconnectAllSnapsText",DisconnectType}({}),DisconnectAllModal=function(param){var onClick=param.onClick,onClose=param.onClose,t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_2__.P)();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.aF,{isOpen:!0,onClose:onClose,"data-testid":"disconnect-all-modal"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.mH,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.$m,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.rQ,{onClose:onClose},t("disconnect")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.cw,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.EY,null,t("disconnectAllDescriptionText"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.jl,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_1__.$n,{onClick:onClick,startIconName:_component_library__WEBPACK_IMPORTED_MODULE_1__.$M.Logout,block:!0,danger:!0,"data-testid":"disconnect-all"},t("disconnect")))))};try{DisconnectAllModal.displayName="DisconnectAllModal",DisconnectAllModal.__docgenInfo={description:"",displayName:"DisconnectAllModal",props:{type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"disconnectAllAccountsText"'},{value:'"disconnectAllSnapsText"'}]}},hostname:{defaultValue:null,description:"",name:"hostname",required:!0,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/components/multichain/disconnect-all-modal/disconnect-all-modal.tsx#DisconnectAllModal"]={docgenInfo:DisconnectAllModal.__docgenInfo,name:"DisconnectAllModal",path:"ui/components/multichain/disconnect-all-modal/disconnect-all-modal.tsx#DisconnectAllModal"})}catch(__react_docgen_typescript_loader_error){}},"./ui/components/multichain/pages/review-permissions-page/review-permissions-page.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>review_permissions_page_stories});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),react_router=__webpack_require__("./node_modules/react-router-dom/node_modules/react-router/esm/react-router.js"),caip_types=__webpack_require__("./node_modules/@metamask/utils/dist/caip-types.mjs"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),networks=__webpack_require__("./shared/modules/selectors/networks.ts"),selectors=__webpack_require__("./ui/selectors/index.js"),actions=__webpack_require__("./ui/__mocks__/actions.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),multichain=__webpack_require__("./ui/components/multichain/index.js"),NoConnectionContent=function(){var t=(0,useI18nContext.P)();return react.createElement(component_library.az,{className:"connections-page__no-site-connected-content",display:design_system.nl.Flex,flexDirection:design_system.bo.Column,alignItems:design_system.k2.center,justifyContent:design_system.A9.center,gap:2,paddingLeft:4,paddingRight:4},react.createElement(component_library.EY,{variant:design_system.J3.bodyMdMedium,textAlign:design_system.nO.Center},t("noConnectedAccountTitle")),react.createElement(component_library.EY,{variant:design_system.J3.bodyMd,textAlign:design_system.nO.Center},t("noConnectionDescription")))},page=__webpack_require__("./ui/components/multichain/pages/page/index.ts"),routes=__webpack_require__("./ui/helpers/constants/routes.ts"),disconnect_all_modal=__webpack_require__("./ui/components/multichain/disconnect-all-modal/disconnect-all-modal.tsx"),util=__webpack_require__("./ui/helpers/utils/util.js"),PermissionsHeader=function(param){var securedOrigin=param.securedOrigin,connectedSubjectsMetadata=param.connectedSubjectsMetadata,t=(0,useI18nContext.P)(),history=(0,react_router.W6)();return react.createElement(page.Y9,{backgroundColor:design_system.i0.backgroundDefault,startAccessory:react.createElement(component_library.a2,{ariaLabel:t("back"),iconName:component_library.$M.ArrowLeft,className:"connections-header__start-accessory",color:design_system.Li.iconDefault,onClick:function(){return history.goBack()},size:component_library.f3.Sm})},react.createElement(component_library.az,{display:design_system.nl.Flex,alignItems:design_system.k2.center,gap:2,justifyContent:design_system.A9.center,className:"connections-header__title"},(null==connectedSubjectsMetadata?void 0:connectedSubjectsMetadata.iconUrl)?react.createElement(component_library.eK,{name:connectedSubjectsMetadata.name,size:component_library.pS.Sm,src:connectedSubjectsMetadata.iconUrl}):react.createElement(component_library.In,{name:component_library.$M.Global,size:component_library.lK.Sm,color:design_system.Li.iconDefault}),react.createElement(component_library.EY,{as:"span",variant:design_system.J3.headingMd,textAlign:design_system.nO.Center,ellipsis:!0},(0,util.US)(securedOrigin))))};try{PermissionsHeader.displayName="PermissionsHeader",PermissionsHeader.__docgenInfo={description:"",displayName:"PermissionsHeader",props:{securedOrigin:{defaultValue:null,description:"",name:"securedOrigin",required:!0,type:{name:"string"}},connectedSubjectsMetadata:{defaultValue:null,description:"",name:"connectedSubjectsMetadata",required:!1,type:{name:"{ name: string; iconUrl: string; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/components/multichain/permissions-header/permissions-header.tsx#PermissionsHeader"]={docgenInfo:PermissionsHeader.__docgenInfo,name:"PermissionsHeader",path:"ui/components/multichain/permissions-header/permissions-header.tsx#PermissionsHeader"})}catch(__react_docgen_typescript_loader_error){}var constants_network=__webpack_require__("./shared/constants/network.ts"),trace=__webpack_require__("./shared/lib/trace.ts"),site_cell=__webpack_require__("./ui/components/multichain/pages/review-permissions-page/site-cell/site-cell.tsx");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function _ts_generator(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var ReviewPermissions=function(){var t=(0,useI18nContext.P)(),dispatch=(0,es.wA)(),history=(0,react_router.W6)(),securedOrigin=decodeURIComponent((0,react_router.g)().origin),_useState=_sliced_to_array((0,react.useState)(!1),2),showAccountToast=_useState[0],setShowAccountToast=_useState[1],_useState1=_sliced_to_array((0,react.useState)(!1),2),showNetworkToast=_useState1[0],setShowNetworkToast=_useState1[1],_useState2=_sliced_to_array((0,react.useState)(!1),2),showDisconnectAllModal=_useState2[0],setShowDisconnectAllModal=_useState2[1],showPermittedNetworkToastOpen=(0,es.d4)(selectors.dBX);(0,react.useEffect)(function(){showPermittedNetworkToastOpen&&(setShowNetworkToast(showPermittedNetworkToastOpen),dispatch((0,actions.hidePermittedNetworkToast)()))},[showPermittedNetworkToastOpen]);var connectedSubjectsMetadata=(0,es.d4)(selectors.Ycw)[securedOrigin],subjects=(0,es.d4)(selectors.$Hp),disconnectAllPermissions=function(){var subject=subjects[securedOrigin];if(subject){var permissionMethodNames=Object.values(subject.permissions).map(function(param){return param.parentCapability});if(permissionMethodNames.length>0){var permissionsRecord=_define_property({},securedOrigin,permissionMethodNames);dispatch((0,actions.removePermissionsFor)(permissionsRecord))}}dispatch((0,actions.hidePermittedNetworkToast)())},networkConfigurationsByCaipChainId=(0,es.d4)(networks.fN),_useMemo=_sliced_to_array((0,react.useMemo)(function(){return Object.entries(networkConfigurationsByCaipChainId).reduce(function(param,param1){var _param=_sliced_to_array(param,2),nonTestNetworksList=_param[0],testNetworksList=_param[1],_param1=_sliced_to_array(param1,2),chainId=_param1[0],network=_param1[1];return(constants_network.efT.includes(chainId)?testNetworksList:nonTestNetworksList).push(_object_spread_props(_object_spread({},network),{caipChainId:chainId})),[nonTestNetworksList,testNetworksList]},[[],[]])},[networkConfigurationsByCaipChainId]),2),nonTestNetworks=_useMemo[0],testNetworks=_useMemo[1],connectedChainIds=(0,es.d4)(function(state){return(0,selectors.FuI)(state,securedOrigin)}),allAccounts=(0,es.d4)(selectors.HMN),nonRemappedConnectedAccountAddresses=(0,es.d4)(function(state){return(0,selectors.dXA)(state,securedOrigin)}),connectedAccountAddresses=(0,lodash.uniq)(nonRemappedConnectedAccountAddresses.map(function(caipAccountId){var _parseCaipAccountId=(0,caip_types.Dz)(caipAccountId),address=_parseCaipAccountId.address;return _parseCaipAccountId.chain.namespace===caip_types.wV.Eip155?"eip155:0:".concat(address):caipAccountId}));return react.createElement(page.YW,{"data-testid":"connections-page",className:"main-container connections-page"},react.createElement(react.Fragment,null,react.createElement(PermissionsHeader,{securedOrigin:securedOrigin,connectedSubjectsMetadata:connectedSubjectsMetadata}),react.createElement(page.UC,{padding:0},connectedAccountAddresses.length>0?react.createElement(site_cell.K,{nonTestNetworks:nonTestNetworks,testNetworks:testNetworks,accounts:allAccounts,onSelectAccountAddresses:function(caipAccountIds){if(0===caipAccountIds.length)return void setShowDisconnectAllModal(!0);dispatch((0,actions.setPermittedAccounts)(securedOrigin,caipAccountIds)),setShowAccountToast(!0)},onSelectChainIds:function(chainIds){return _async_to_generator(function(){return _ts_generator(this,function(_state){return 0===chainIds.length?setShowDisconnectAllModal(!0):(dispatch((0,actions.setPermittedChains)(securedOrigin,chainIds)),setShowNetworkToast(!0)),[2]})})()},selectedAccountAddresses:connectedAccountAddresses,selectedChainIds:connectedChainIds,hideAllToasts:function(){setShowAccountToast(!1),setShowNetworkToast(!1)}}):react.createElement(NoConnectionContent,null),showDisconnectAllModal?react.createElement(disconnect_all_modal.f,{type:disconnect_all_modal.y.Account,hostname:securedOrigin,onClose:function(){return setShowDisconnectAllModal(!1)},onClick:function(){(0,trace.uP)({name:trace.dg.DisconnectAllModal}),disconnectAllPermissions(),setShowDisconnectAllModal(!1),(0,trace.t7)({name:trace.dg.DisconnectAllModal})}}):null),react.createElement(page.wi,null,react.createElement(react.Fragment,null,connectedAccountAddresses.length>0?react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Column,width:design_system.Zf.Full,gap:2,alignItems:design_system.k2.center},showAccountToast?react.createElement(multichain.N9,null,react.createElement(multichain.y8,{text:t("accountPermissionToast"),onClose:function(){return setShowAccountToast(!1)},startAdornment:react.createElement(component_library.eK,{name:null==connectedSubjectsMetadata?void 0:connectedSubjectsMetadata.name,size:component_library.pS.Sm,src:null==connectedSubjectsMetadata?void 0:connectedSubjectsMetadata.iconUrl})})):null,showNetworkToast?react.createElement(multichain.N9,null,react.createElement(multichain.y8,{text:t("networkPermissionToast"),onClose:function(){return setShowNetworkToast(!1)},startAdornment:react.createElement(component_library.eK,{name:null==connectedSubjectsMetadata?void 0:connectedSubjectsMetadata.name,size:component_library.pS.Sm,src:null==connectedSubjectsMetadata?void 0:connectedSubjectsMetadata.iconUrl})})):null,react.createElement(component_library.$n,{size:component_library.Mp.Lg,block:!0,variant:component_library.Ak.Secondary,startIconName:component_library.$M.Logout,danger:!0,onClick:function(){return setShowDisconnectAllModal(!0)},"data-test-id":"disconnect-all"},t("disconnect"))):react.createElement(react.Fragment,null,connectedAccountAddresses.length>0?react.createElement(component_library.$$,{size:component_library.w9.Lg,block:!0,"data-test-id":"no-connections-button",onClick:function(){return _async_to_generator(function(){var requestId;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,dispatch((0,actions.requestAccountsAndChainPermissionsWithId)(securedOrigin))];case 1:return requestId=_state.sent(),history.push("".concat(routes.Fh,"/").concat(requestId)),[2]}})})()}},t("connectAccounts")):null)))))};let review_permissions_page_stories={title:"Components/Multichain/ReviewPermissions"};var DefaultStory=function(){return react.createElement(ReviewPermissions,null)};DefaultStory.storyName="Default",DefaultStory.parameters={...DefaultStory.parameters,docs:{...DefaultStory.parameters?.docs,source:{originalSource:"() => <ReviewPermissions />",...DefaultStory.parameters?.docs?.source}}};let __namedExportsOrder=["DefaultStory"]},"./ui/components/multichain/pages/review-permissions-page/site-cell/site-cell-connection-list-item.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>SiteCellConnectionListItem});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_component_library__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/component-library/index.ts"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/hooks/useI18nContext.js"),SiteCellConnectionListItem=function(param){var title=param.title,iconName=param.iconName,connectedMessage=param.connectedMessage,unconnectedMessage=param.unconnectedMessage,isConnectFlow=param.isConnectFlow,onClick=param.onClick,content=param.content,paddingTopValue=param.paddingTopValue,paddingBottomValue=param.paddingBottomValue,t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_3__.P)();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.az,{"data-testid":"site-cell-connection-list-item",display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.nl.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.bo.Row,alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.k2.baseline,width:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.Zf.Full,backgroundColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.i0.backgroundDefault,gap:4,className:"multichain-connection-list-item",paddingTop:paddingTopValue,paddingBottom:paddingBottomValue},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.hS,{marginTop:1,iconName:iconName,size:_component_library__WEBPACK_IMPORTED_MODULE_2__.OQ.Md,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.Li.iconAlternative,backgroundColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.i0.backgroundMuted}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.az,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.nl.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.bo.Column,width:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.Zf.FiveTwelfths,style:{alignSelf:"center",flexGrow:1},gap:1},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.J3.bodyMd,textAlign:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.nO.Left},title),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.az,{display:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.nl.Flex,flexDirection:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.bo.Row,alignItems:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.k2.center,gap:1},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{as:"span",width:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.Zf.Max,color:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.r7.textAlternative,variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_1__.J3.bodySm,ellipsis:!0},isConnectFlow?unconnectedMessage:connectedMessage),content)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_component_library__WEBPACK_IMPORTED_MODULE_2__.vx,{onClick:function(){return onClick()},"data-testid":"edit"},t("edit")))};SiteCellConnectionListItem.propTypes={title:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,iconName:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,connectedMessage:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,paddingTopValue:prop_types__WEBPACK_IMPORTED_MODULE_4___default().number,paddingBottomValue:prop_types__WEBPACK_IMPORTED_MODULE_4___default().number,unconnectedMessage:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,isConnectFlow:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool,onClick:prop_types__WEBPACK_IMPORTED_MODULE_4___default().func,content:prop_types__WEBPACK_IMPORTED_MODULE_4___default().node},SiteCellConnectionListItem.__docgenInfo={description:"",methods:[],displayName:"SiteCellConnectionListItem",props:{title:{description:"Title that should be displayed in the connection list item",type:{name:"string"},required:!1},iconName:{description:"The name of the icon that should be passed to the AvatarIcon component",type:{name:"string"},required:!1},connectedMessage:{description:"The message that should be displayed when there are connected accounts",type:{name:"string"},required:!1},paddingTopValue:{description:"Padding Top Value to keep the padding between list items same",type:{name:"number"},required:!1},paddingBottomValue:{description:"Padding Bottom Value to keep the padding between list items same",type:{name:"number"},required:!1},unconnectedMessage:{description:"The message that should be displayed when there are no connected accounts",type:{name:"string"},required:!1},isConnectFlow:{description:"If the component should show context related to adding a connection or editing one",type:{name:"bool"},required:!1},onClick:{description:"Handler called when the edit button is clicked",type:{name:"func"},required:!1},content:{description:"Components to display in the connection list item",type:{name:"node"},required:!1}}}},"./ui/components/multichain/pages/review-permissions-page/site-cell/site-cell.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>SiteCell});var react=__webpack_require__("./node_modules/react/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),multichain=__webpack_require__("./ui/components/multichain/index.js"),metametrics=__webpack_require__("./ui/contexts/metametrics.js"),constants_metametrics=__webpack_require__("./shared/constants/metametrics.ts"),string_utils=__webpack_require__("./shared/modules/string-utils.ts"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react_tippy=__webpack_require__("./node_modules/react-tippy/dist/react-tippy.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),avatar_group_types=__webpack_require__("./ui/components/multichain/avatar-group/avatar-group.types.tsx"),selectors=__webpack_require__("./ui/selectors/index.js"),constants_network=__webpack_require__("./shared/constants/network.ts"),SiteCellTooltip=function(param){var accounts=param.accounts,networks=param.networks,t=(0,useI18nContext.P)(),avatarAccountVariant=(0,es.d4)(selectors.bNi)?component_library.Uj.Blockies:component_library.Uj.Jazzicon,avatarAccountsData=null==accounts?void 0:accounts.map(function(account){return{avatarValue:account.address}}),avatarNetworksData=null==networks?void 0:networks.map(function(network){return{avatarValue:constants_network.Clc[network.chainId],symbol:network.name}});return react.createElement(react_tippy.Tooltip,{position:"bottom",html:react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Column,"data-test-id":"site-cell-tooltip"},react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Column},null==accounts?void 0:accounts.slice(0,4).map(function(acc){return react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Row,alignItems:design_system.k2.center,textAlign:design_system.nO.Left,key:acc.address,padding:1,paddingInline:2,gap:2},react.createElement(component_library.vs,{size:component_library.oG.Xs,address:acc.address,variant:avatarAccountVariant,borderStyle:design_system.kD.none}),react.createElement(component_library.EY,{color:design_system.r7.overlayInverse,variant:design_system.J3.bodyMdMedium,"data-testid":"accounts-list-item-connected-account-name",ellipsis:!0},acc.metadata.name||acc.label))}),null==networks?void 0:networks.slice(0,4).map(function(network){return react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Row,alignItems:design_system.k2.center,textAlign:design_system.nO.Left,key:network.chainId,padding:1,paddingInline:2,gap:2},react.createElement(component_library.Gn,{size:component_library.LM.Xs,src:constants_network.Clc[network.chainId],name:network.name,borderStyle:design_system.kD.none}),react.createElement(component_library.EY,{color:design_system.r7.overlayInverse,variant:design_system.J3.bodyMdMedium,"data-testid":"accounts-list-item-connected-account-name",ellipsis:!0},network.name))}),(null==accounts?void 0:accounts.length)>4||(null==networks?void 0:networks.length)>4?react.createElement(component_library.az,{display:design_system.nl.Flex,alignItems:design_system.k2.center,textAlign:design_system.nO.Left,paddingInline:2},react.createElement(component_library.EY,{color:design_system.r7.textMuted,variant:design_system.J3.bodyMdMedium,"data-testid":"accounts-list-item-plus-more-tooltip"},(null==accounts?void 0:accounts.length)>0?t("moreAccounts",[(null==accounts?void 0:accounts.length)-4]):t("moreNetworks",[networks.length-4]))):null)),arrow:!0,offset:0,delay:50,duration:0,size:"small",title:t("alertDisableTooltip"),trigger:"mouseenter focus",theme:"dark",tag:"div"},(null==accounts?void 0:accounts.length)>0&&react.createElement(multichain.Z7,{members:avatarAccountsData,limit:4,avatarType:avatar_group_types.u.ACCOUNT,borderColor:design_system.i0.backgroundDefault}),(null==networks?void 0:networks.length)>0&&react.createElement(multichain.Z7,{members:avatarNetworksData,limit:4,avatarType:avatar_group_types.u.TOKEN}))};SiteCellTooltip.propTypes={accounts:prop_types_default().arrayOf(prop_types_default().shape({address:prop_types_default().string,label:prop_types_default().string,metadata:prop_types_default().shape({name:prop_types_default().string})})),networks:prop_types_default().arrayOf(prop_types_default().shape({chainId:prop_types_default().string,name:prop_types_default().string}))},SiteCellTooltip.__docgenInfo={description:"",methods:[],displayName:"SiteCellTooltip",props:{accounts:{description:`An array of account objects to be displayed in the tooltip.
Each object should contain \`address\`, \`label\`, and \`metadata.name\`.`,type:{name:"arrayOf",value:{name:"shape",value:{address:{name:"string",required:!1},label:{name:"string",required:!1},metadata:{name:"shape",value:{name:{name:"string",required:!1}},required:!1}}}},required:!1},networks:{description:"An array of network objects to display in the tooltip.",type:{name:"arrayOf",value:{name:"shape",value:{chainId:{name:"string",required:!1},name:{name:"string",required:!1}}}},required:!1}}};var site_cell_connection_list_item=__webpack_require__("./ui/components/multichain/pages/review-permissions-page/site-cell/site-cell-connection-list-item.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}function _iterable_to_array(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _to_consumable_array(arr){return _array_without_holes(arr)||_iterable_to_array(arr)||_unsupported_iterable_to_array(arr)||_non_iterable_spread()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var SiteCell=function(param){var nonTestNetworks=param.nonTestNetworks,testNetworks=param.testNetworks,accounts=param.accounts,onSelectAccountAddresses=param.onSelectAccountAddresses,onSelectChainIds=param.onSelectChainIds,selectedAccountAddresses=param.selectedAccountAddresses,selectedChainIds=param.selectedChainIds,isConnectFlow=param.isConnectFlow,_param_hideAllToasts=param.hideAllToasts,hideAllToasts=void 0===_param_hideAllToasts?function(){}:_param_hideAllToasts,t=(0,useI18nContext.P)(),trackEvent=(0,react.useContext)(metametrics.O2),allNetworks=_to_consumable_array(nonTestNetworks).concat(_to_consumable_array(testNetworks)),_useState=_sliced_to_array((0,react.useState)(!1),2),showEditAccountsModal=_useState[0],setShowEditAccountsModal=_useState[1],_useState1=_sliced_to_array((0,react.useState)(!1),2),showEditNetworksModal=_useState1[0],setShowEditNetworksModal=_useState1[1],selectedAccounts=accounts.filter(function(param){var caipAccountId=param.caipAccountId;return selectedAccountAddresses.some(function(selectedAccountAddress){return(0,string_utils.y)(selectedAccountAddress,caipAccountId)})}),selectedNetworks=allNetworks.filter(function(param){var caipChainId=param.caipChainId;return selectedChainIds.includes(caipChainId)}),selectedChainIdsLength=selectedChainIds.length,accountMessageConnectedState=1===selectedAccounts.length?t("connectedWithAccountName",[selectedAccounts[0].metadata.name||selectedAccounts[0].label]):t("connectedWithAccount",[selectedAccounts.length]),accountMessageNotConnectedState=1===selectedAccounts.length?t("requestingForAccount",[selectedAccounts[0].metadata.name||selectedAccounts[0].label]):t("requestingFor"),networkMessageConnectedState=1===selectedChainIdsLength?t("connectedWithNetworkName",[selectedNetworks[0].name]):t("connectedWithNetwork",[selectedChainIdsLength]),networkMessageNotConnectedState=1===selectedChainIdsLength?t("requestingForNetwork",[selectedNetworks[0].name]):t("requestingFor");return react.createElement(react.Fragment,null,react.createElement(component_library.az,{padding:4,gap:4,backgroundColor:design_system.i0.backgroundDefault,borderRadius:design_system.Z6.LG},react.createElement(site_cell_connection_list_item.d,{title:t("accountsPermissionsTitle"),iconName:component_library.$M.Wallet,connectedMessage:accountMessageConnectedState,unconnectedMessage:accountMessageNotConnectedState,isConnectFlow:isConnectFlow,onClick:function(){null==hideAllToasts||hideAllToasts(),setShowEditAccountsModal(!0),trackEvent({category:constants_metametrics.FZ.Navigation,event:constants_metametrics.gP.ViewPermissionedAccounts,properties:{location:"Connect view (permissions tab), Permissions toast, Permissions (dapp)"}})},paddingBottomValue:2,paddingTopValue:0,content:1===selectedAccounts.length?react.createElement(component_library.vs,{address:selectedAccounts[0].address,size:component_library.oG.Xs,borderColor:design_system.cG.transparent}):react.createElement(SiteCellTooltip,{accounts:selectedAccounts})}),react.createElement(site_cell_connection_list_item.d,{title:t("permission_walletSwitchEthereumChain"),iconName:component_library.$M.Data,connectedMessage:networkMessageConnectedState,unconnectedMessage:networkMessageNotConnectedState,isConnectFlow:isConnectFlow,onClick:function(){null==hideAllToasts||hideAllToasts(),setShowEditNetworksModal(!0),trackEvent({category:constants_metametrics.FZ.Navigation,event:constants_metametrics.gP.ViewPermissionedNetworks,properties:{location:"Connect view (permissions tab), Permissions toast, Permissions (dapp)"}})},paddingTopValue:2,paddingBottomValue:0,content:react.createElement(SiteCellTooltip,{networks:selectedNetworks})})),showEditAccountsModal&&react.createElement(multichain.Mm,{accounts:accounts,defaultSelectedAccountAddresses:selectedAccountAddresses,onClose:function(){return setShowEditAccountsModal(!1)},onSubmit:onSelectAccountAddresses}),showEditNetworksModal&&react.createElement(multichain.ZR,{nonTestNetworks:nonTestNetworks,testNetworks:testNetworks,defaultSelectedChainIds:selectedChainIds,onClose:function(){return setShowEditNetworksModal(!1)},onSubmit:onSelectChainIds}))};try{SiteCell.displayName="SiteCell",SiteCell.__docgenInfo={description:"",displayName:"SiteCell",props:{nonTestNetworks:{defaultValue:null,description:"",name:"nonTestNetworks",required:!0,type:{name:"Network[]"}},testNetworks:{defaultValue:null,description:"",name:"testNetworks",required:!0,type:{name:"Network[]"}},accounts:{defaultValue:null,description:"",name:"accounts",required:!0,type:{name:"MergedInternalAccountWithCaipAccountId[]"}},onSelectAccountAddresses:{defaultValue:null,description:"",name:"onSelectAccountAddresses",required:!0,type:{name:"(addresses: `${string}:${string}:${string}`[]) => void"}},onSelectChainIds:{defaultValue:null,description:"",name:"onSelectChainIds",required:!0,type:{name:"(chainIds: `${string}:${string}`[]) => void"}},selectedAccountAddresses:{defaultValue:null,description:"",name:"selectedAccountAddresses",required:!0,type:{name:"`${string}:${string}:${string}`[]"}},selectedChainIds:{defaultValue:null,description:"",name:"selectedChainIds",required:!0,type:{name:"`${string}:${string}`[]"}},isConnectFlow:{defaultValue:null,description:"",name:"isConnectFlow",required:!1,type:{name:"boolean"}},hideAllToasts:{defaultValue:{value:"() => undefined"},description:"",name:"hideAllToasts",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/components/multichain/pages/review-permissions-page/site-cell/site-cell.tsx#SiteCell"]={docgenInfo:SiteCell.__docgenInfo,name:"SiteCell",path:"ui/components/multichain/pages/review-permissions-page/site-cell/site-cell.tsx#SiteCell"})}catch(__react_docgen_typescript_loader_error){}}}]);